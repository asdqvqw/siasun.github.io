import{_ as g,aV as _,aK as w,o as h,c as x,a as C,b as y,f as b,l as V,m as E}from"./index-1c344ead.js";import{S as G,P as L,W as k,D as B,V as f,G as D}from"./three.module-b20bde78.js";import{G as H,O as M}from"./GLTFLoader-710f8df6.js";const N={class:"home"},W={__name:"index",setup(F){const u=new H;let i=_([]),r,s,d=_(null);const t=new G,l=new L(75,window.innerWidth/window.innerHeight,.1,1e3),n=new k({antialias:!0});n.setSize(window.innerWidth,window.innerHeight),n.setClearColor(0);for(let e=0;e<5;e++){const o=new B(16777215,1);o.position.set((e%2===0?1:-1)*(e+1)*10,(e%2===0?1:-1)*(e+1)*10,10),t.add(o)}const m=(e,o)=>{u.load(e,a=>{const c=a.scene;c.position.copy(o),i.value.push(c),t.add(c)},a=>{console.log(a.loaded/a.total*100+"% loaded")},a=>{console.error("Error loading model:",a)})};m("./main/test.glb",new f(0,0,2.5)),m("./main/v.glb",new f(0,0,0));const p=()=>{n.render(t,l),r&&r.update(),requestAnimationFrame(p)};w(()=>{l.position.set(3,1,3),d.value.appendChild(n.domElement),s=new D(500,500),s.material.opacity=.8,s.material.transparent=!0,t.add(s),r=new M(l,n.domElement),r.update(),p()});const v=()=>{if(i.value.length>0){const e=i.value.pop();e&&(console.log("Removing car:",e),t.remove(e),e.removeFromParent(),console.log("Current scene children:",t.children),e.traverse(o=>{if(o.isMesh)if(o.geometry.dispose(),o.material.isMaterial)o.material.dispose();else for(const a of o.material)a.dispose()}),n.render(t,l),console.log("Car removed successfully."))}else console.log("No cars to remove.")};return(e,o)=>{const a=V;return h(),x("div",N,[C("div",{class:"canvas-container",ref_key:"canvasDom",ref:d},[y(a,{class:"toggle-button",onClick:v},{default:b(()=>[E("删除")]),_:1})],512)])}}},T=g(W,[["__scopeId","data-v-48cdfe0c"]]);export{T as default};
