import{_ as D,aV as V,o as C,c as E,b as e,f as t,m as d,bl as r,a as c,cv as U,l as J,E as L,p as T,q as A,Q as H,bc as q,g as j,cw as B}from"./index-e3c3ccff.js";import{E as P,a as M}from"./el-table-column-4df7f294.js";/* empty css                    */import"./el-tag-ec687b5d.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-91791709.js";import"./el-scrollbar-1616d62b.js";import{E as F}from"./el-dialog-e69e6c9f.js";import{p as k,j as y,O as Q}from"./commondata-86d89212.js";/* empty css                */import{E as z,a as K}from"./el-form-item-2b2274b8.js";import{E as W}from"./el-switch-6576365a.js";import{_ as X}from"./check-4df054e9.js";import{_ as O}from"./DefinScrollbar-94f662b6.js";import"./8Array-c7fce432.js";import"./CloneObject-ccd2b450.js";import"./index-176a71e9.js";import"./isEqual-b5cff9cc.js";import"./debounce-a335400b.js";/* empty css                                                                       */const Y=m=>(T("data-v-3291d278"),m=m(),A(),m),Z=Y(()=>c("br",null,null,-1)),ee={slot:"footer",class:"dialog-footer"},te="添加数据",le={__name:"function",setup(m){let n=V({name:"",des:"",key:"",value:!1});const f=V(!1),g=(v,l)=>{const u=y.value.function.find(h=>h.key===l.key);u&&(u.value=l.value)},S=()=>{f.value=!0},R=()=>{if(n.value.name&&n.value.des&&n.value.key){const v={...n.value};y.value.function.push(v),k.value.push(v),f.value=!1}else U.error("请填写完整数据")},$=v=>{const l=y.value.function.findIndex(h=>h.key===v.key);l!==-1&&y.value.function.splice(l,1);const u=k.value.indexOf(v);u!==-1&&k.value.splice(u,1)};return(v,l)=>{const u=P,h=W,b=J,I=M,_=L,a=z,s=K,i=F;return C(),E("div",null,[e(I,{data:r(k),style:{width:"100%"},class:"functioncDate"},{default:t(()=>[e(u,{prop:"name",label:"⚠️ 功能定制"}),e(u,{prop:"des",label:"说明"}),e(u,{prop:"key",label:"英文名"}),e(u,{prop:"value",label:"是否启用"},{default:t(o=>[e(h,{modelValue:o.row.value,"onUpdate:modelValue":w=>o.row.value=w,"active-value":!0,"inactive-value":!1,onChange:w=>g(o.$index,o.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(u,{label:"操作"},{default:t(o=>[e(b,{type:"danger",onClick:w=>$(o.row)},{default:t(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Z,e(b,{type:"primary",onClick:S},{default:t(()=>[d("添加新数据")]),_:1}),e(i,{title:te,modelValue:f.value,"onUpdate:modelValue":l[5]||(l[5]=o=>f.value=o),visible:f.value,width:"800px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"40%"}},{default:t(()=>[e(s,{ref:"form",model:r(n),"label-width":"80px"},{default:t(()=>[e(a,{label:"名称"},{default:t(()=>[e(_,{modelValue:r(n).name,"onUpdate:modelValue":l[0]||(l[0]=o=>r(n).name=o),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(a,{label:"说明"},{default:t(()=>[e(_,{modelValue:r(n).des,"onUpdate:modelValue":l[1]||(l[1]=o=>r(n).des=o),placeholder:"请输入说明"},null,8,["modelValue"])]),_:1}),e(a,{label:"英文名"},{default:t(()=>[e(_,{modelValue:r(n).key,"onUpdate:modelValue":l[2]||(l[2]=o=>r(n).key=o),placeholder:"key值"},null,8,["modelValue"])]),_:1}),e(a,{label:"是否启用"},{default:t(()=>[e(h,{modelValue:r(n).value,"onUpdate:modelValue":l[3]||(l[3]=o=>r(n).value=o),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),c("div",ee,[e(b,{onClick:l[4]||(l[4]=o=>f.value=!1)},{default:t(()=>[d("取 消")]),_:1}),e(b,{type:"primary",onClick:R},{default:t(()=>[d("确 定")]),_:1})])]),_:1},8,["modelValue","visible"])])}}},ae=D(le,[["__scopeId","data-v-3291d278"]]);const x=m=>(T("data-v-d9ccca97"),m=m(),A(),m),oe={class:"page-container main-view"},ne={class:"table-box content-container page-content-box",style:{"background-image":"linear-gradient(to bottom right, #d0dcdc95, #d5eedf17)"}},se={class:"left"},ue=x(()=>c("hr",{class:"hengxian"},null,-1)),de={class:"left"},ie=x(()=>c("h2",null,"⚠️ 用户配置：",-1)),ce=x(()=>c("hr",{class:"hengxian2"},null,-1)),re={key:0},_e=x(()=>c("hr",{class:"hengxian3"},null,-1)),pe={key:1},me=x(()=>c("hr",{class:"hengxian2"},null,-1)),ve={__name:"userparm",setup(m){const n=V(!1),f=()=>{n.value=!0},g=V(!1),S=V(!0),R=V(!0),$=(_,a)=>{y.value.other[a.key]=parseInt(a.value)},v=H(()=>JSON.stringify(y.value,null,2)),l=()=>{g.value=!0},u=()=>{router.push("/main/third")},h=()=>{router.push("/main/param/index")},b=()=>{let _={data:{file:"SystemParm.json",value:y.value},group:"siasun",account:"test",password:"123456"};console.log(_),B({method:"post",url:"/api/ctrl/jsoneditor",data:JSON.stringify(_)}).then(a=>{U.success("请求成功");var s={type:"syncParm",data:!0};console.log(JSON.stringify(s)),B({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(s)}).then(i=>{U.success("同步参数")}).catch(i=>{}).finally(()=>{})}).catch(a=>{U.error("请求失败")}).finally(()=>{})},I=()=>{const _=JSON.stringify(y.value),a=new Blob([_],{type:"application/json"}),s=window.URL.createObjectURL(a),i=document.createElement("a");i.href=s,i.download="SystemParm.json",document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(s),document.body.removeChild(i)};return(_,a)=>{const s=J,i=F,o=P,w=L,G=M;return C(),E("div",null,[c("div",oe,[c("div",ne,[e(O,{height:"100%",showUpBt:!0},{default:t(()=>[c("div",se,[e(s,{type:"info",onClick:f},{default:t(()=>[d(" 查看设备 ")]),_:1}),e(i,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=p=>n.value=p),title:"设备总览",visible:n.value,width:"900px",onClose:a[1]||(a[1]=p=>n.value=!1)},{default:t(()=>[e(O,{height:"100%",showUpBt:!0},{default:t(()=>[e(X)]),_:1})]),_:1},8,["modelValue","visible"]),d("   "),e(s,{type:"info",onClick:l},{default:t(()=>[d(" 查看 ")]),_:1}),e(i,{modelValue:g.value,"onUpdate:modelValue":a[2]||(a[2]=p=>g.value=p),title:"数据",visible:g.value,onClose:a[3]||(a[3]=p=>g.value=!1)},{default:t(()=>[e(O,{height:"100%",showUpBt:!0},{default:t(()=>[c("pre",null,q(v.value),1)]),_:1})]),_:1},8,["modelValue","visible"]),d("   "),e(s,{type:"primary",onClick:u},{default:t(()=>[d("上一步")]),_:1}),e(s,{type:"primary",onClick:h},{default:t(()=>[d("返回")]),_:1}),e(s,{type:"success",onClick:b},{default:t(()=>[d("同步到AGV")]),_:1}),e(s,{type:"success",onClick:I},{default:t(()=>[d("导出到本地")]),_:1})]),ue,c("div",de,[ie,d(" 配置用户参数，功能等： "),ce,R.value?(C(),E("div",re,[e(G,{data:r(Q),style:{width:"100%"},class:"OTHERPARM"},{default:t(()=>[e(o,{prop:"name",label:"⚠️ 控制周期与线程超时保护 "}),e(o,{prop:"value",label:" "},{default:t(p=>[e(w,{modelValue:p.row.value,"onUpdate:modelValue":N=>p.row.value=N,placeholder:"请选择",style:{width:"100%"},onChange:N=>$(p.$index,p.row),type:"number"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])])):j("",!0),_e,S.value?(C(),E("div",pe,[e(ae)])):j("",!0)]),me]),_:1})])])])}}},De=D(ve,[["__scopeId","data-v-d9ccca97"]]);export{De as default};
