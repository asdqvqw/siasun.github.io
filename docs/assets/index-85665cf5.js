import{R as Ue,D as me,W as He,b as je,S as Xe,P as Ye,G as We,M as Ce,L as Ze,V as Qe,B as ea,a as aa,E as ta,Q as la,c as ae,d as oa}from"./three.module-2fa5ea98.js";import{G as na,O as sa}from"./GLTFLoader-8d8d2fbb.js";import{a as ua,b as ia}from"./timer-486d2b06.js";import{aV as s,_ as te,Q as H,o as B,c as j,b as e,f as a,l as ne,p as ce,q as ve,a as i,m as x,bc as Ne,bl as R,cl as Ve,cm as oe,cn as ra,F as Le,ck as O,cj as X,r as U,bQ as ca,co as va,aK as Ie,a0 as da,g as Ke,aC as Te,e as fa}from"./index-02639357.js";import{E as se}from"./el-dialog-4d9a1aad.js";import{E as ue,a as ie}from"./el-table-column-343ed821.js";/* empty css                    */import"./el-tag-dc4d0661.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-4a354208.js";import"./el-scrollbar-540daa95.js";import{E as De}from"./el-button-group-5b3e1d0b.js";import{E as pa,a as ma}from"./el-form-item-d00340a8.js";import{E as _a}from"./el-switch-b57db4f7.js";/* empty css                */import{E as ya,a as ga}from"./el-select-14cfe572.js";import{a as ka}from"./index-954f2623.js";import{a as ba,b as ha}from"./index-a201f7b6.js";import"./_Uint8Array-95410dc0.js";import"./_initCloneObject-971e04a4.js";import"./isEqual-801b63cc.js";import"./debounce-59d8211e.js";import"./index-78502526.js";import"./browser-a7c46139.js";const t=s({electricalModule:{kinematic:{drive:[{wheel:{fServoSpeed:-.21026467742281965,nServoErrCode:0,nServoState:56417}},{wheel:{fServoSpeed:.20026467742281967,nServoErrCode:0,nServoState:16227}}],nDriveCount:2},safeCheck:{bEmgStop:!1,bHardBumper:!1,nPlsTrig:2},sensor:{battmetr:{fCapPercent:74.4000015258789,sState:2},camera:{fthita:0,fx:0,fy:0},magnetic:{fDev:[0,0],sGrade:0}}},equipmentInfo:{rack:{lifter_axis:{bBottom:!1,bTop:!1,fAxisPosition:0,fAxisSpeed:0},turn_axis:{bLevel:!1,bZero:!1,fAxisPosition:0,fAxisSpeed:0}},strEquipmentTaskMessage:" ",uEquipmentState:3,uEquipmentTaskError:0,uEquipmentTaskID:0,uEquipmentTaskState:65535},event:{advise:"",detail:"",name:""},nAgvState:0,navInfo:{fRealThita:6.255185604095459,fRealX:.0290000438690186,fRealY:.09000000357627869,fThitaDev:0,fXDev:0,fmVersion:"172.32.128.0",swVersion:"2.0.2.0"},tcInfo:{iDevX:0,iDevY:0,sCurSpeed:0,sHeading:0,sProgress:0,uFromNode:65535,uToNode:65535,uWorkState:0,ucEventState:0,ucTaskState:3,usBatterState:1,usCargoState:0,usEventDetail:0,usKey:65535,usTaskID:65535},uAgvType:0});let Ee=s(1);const ge=new Ue;const xa=S=>(ce("data-v-c0927727"),S=S(),ve(),S),Sa=xa(()=>i("span",{style:{"font-size":"18px"}}," 导航",-1)),wa={__name:"nav",setup(S){const g=s(!1),N=()=>{g.value=!0},r=H(()=>[{key:"导航软件版本",value:t.value.navInfo.fmVersion,key2:"导航环境模型版本",value2:t.value.navInfo.swVersion},{key:"理论位置",value:`(${t.value.tcInfo.iDevX},${t.value.tcInfo.iDevY})`,key2:"当前位置",value2:`(${t.value.navInfo.fRealX.toFixed(3)},${-t.value.navInfo.fRealY.toFixed(3)},${(t.value.navInfo.fRealThita*180/Math.PI).toFixed(3)})`},{key:"角度偏差",value:t.value.navInfo.fXDev.toFixed(4),key2:"左右偏差",value2:t.value.navInfo.fThitaDev.toFixed(4)},{key:"发送舵角",value:"",key2:"发送速度",value2:""}]);return(K,p)=>{const v=ne,c=ue,n=ie,o=se;return B(),j("div",null,[e(v,{class:"controlnav",type:"info",onClick:N},{default:a(()=>[Sa]),_:1}),e(o,{modelValue:g.value,"onUpdate:modelValue":p[0]||(p[0]=f=>g.value=f),title:"导航信息",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[e(n,{data:r.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(c,{prop:"key"}),e(c,{prop:"value"}),e(c,{prop:"key2"}),e(c,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},Ca=te(wa,[["__scopeId","data-v-c0927727"]]);const de=S=>(ce("data-v-af6281e2"),S=S(),ve(),S),Ia=de(()=>i("span",{style:{"font-size":"18px"}}," 电气",-1)),Ea=de(()=>i("br",null,null,-1)),Na=de(()=>i("br",null,null,-1)),Ma=de(()=>i("br",null,null,-1)),Ka=de(()=>i("br",null,null,-1)),Ta=de(()=>i("br",null,null,-1)),$a={__name:"ele",setup(S){const g=s(!1),N=()=>{g.value=!0},r=H(()=>{let k="";const A=t.value.electricalModule.safeCheck.nPlsTrig;return A===0?k="未触发":A===1?k="近":A===2?k="中":A===3&&(k="远"),[{key:"保险杠状态",value:t.value.electricalModule.safeCheck.bHardBumper?"触发":"未触发",key2:"急停状态",value2:t.value.electricalModule.safeCheck.bEmgStop?"触发":"未触发",key3:"pls状态",value3:k}]}),K=H(()=>[{key:"X",value:t.value.electricalModule.sensor.camera.fx.toFixed(4),key2:"Y",value2:t.value.electricalModule.sensor.camera.fy.toFixed(4),key3:"角度",value3:t.value.electricalModule.sensor.camera.fthita.toFixed(4)}]),p=H(()=>[{key:"磁导航偏差1",value:t.value.electricalModule.sensor.magnetic.fDev[0],key2:"磁导航偏差2",value2:t.value.electricalModule.sensor.magnetic.fDev[1],key3:"磁导航状态",value3:t.value.electricalModule.sensor.magnetic.sGrade}]),v=s(0),c=s(null),n=s(null),o=s(null),f=s(0),w=s("驱动轴0"),h=s(0),M=s(0),u=s(0),T=s(0),L=s(0),I=s(0),m=()=>{f.value<v.value-1?f.value++:f.value=0,console.log(f.value),w.value="驱动轴"+f.value.toString()},y=H(()=>{if(v.value=t.value.electricalModule.kinematic.nDriveCount,t.value.electricalModule.kinematic.drive[f.value].wheel!==void 0){switch(c.value=t.value.electricalModule.kinematic.drive[f.value].wheel.fServoSpeed.toFixed(5),n.value=t.value.electricalModule.kinematic.drive[f.value].wheel.nServoErrCode,n.value){case 0:n.value="无错误";break;case 100:n.value="Motec 系统故障/Kinco 内部错误报警";break;case 101:n.value=" Motec 驱动器启动故障/Kinco 编码器ABZ连接报警";break;case 102:n.value="Motec 参数错误/Kinco 编码器UVW连接报警";break;case 103:n.value=" Motec 欠压报警/Kinco  编码器计数报警";break;case 104:n.value="Motec 过压报警/Kinco 温度报警";break;case 105:n.value=" Motec I2T报警/Kinco 高压报警";break;case 106:n.value=" Motec 超过峰值电流/Kinco 低压报警";break;case 107:n.value=" Motec 位置误差超限/Kinco 过流报警";break;case 108:n.value="Motec 编码器故障/Kinco 吸收电阻报警";break;case 109:n.value="Motec 速度误差超限/Kinco 位置误差过大报警";break;case 110:n.value="Kinco 逻辑低压报警";break;case 111:n.value=" Kinco 电机或驱动器iit报警";break;case 112:n.value=" Kinco 脉冲频率过高报警";break;case 113:n.value="Kinco STO错误";break;case 114:n.value="Kinco 电机励磁报警";break;case 115:n.value="Motec 电机没有使能/Kinco 存储器报警";break}o.value=t.value.electricalModule.kinematic.drive[f.value].wheel.nServoState}return t.value.electricalModule.kinematic.drive[f.value].steer!==void 0?(h.value=t.value.electricalModule.kinematic.drive[f.value].steer.fServoPosition.toFixed(5),M.value=t.value.electricalModule.kinematic.drive[f.value].steer.nServoState,u.value=t.value.electricalModule.kinematic.drive[f.value].steer.nServoErrCode,T.value=t.value.electricalModule.kinematic.drive[f.value].steer.bPositiveLimitSwt,L.value=t.value.electricalModule.kinematic.drive[f.value].steer.bNegativeLimitSwt,I.value=t.value.electricalModule.kinematic.drive[f.value].steer.bZeroSwt):(h.value="🚫无",M.value="🚫无",u.value="🚫无",T.value="🚫无",L.value="🚫无",I.value="🚫无"),[{key:"轮实际速度",value:c.value,key2:"轮伺服状态码",value2:o.value,key3:"轮伺服错误码",value3:n.value},{key:"舵实际位置",value:h.value,key2:"舵伺服状态码",value2:M.value,key3:"舵伺服错误码",value3:u.value},{key:"舵限位开关1",value:T.value,key2:"舵限位开关2",value2:L.value,key3:"舵零位开关",value3:I.value}]});return(k,A)=>{const $=ne,b=ue,P=ie,Y=se;return B(),j("div",null,[e($,{class:"controlele",type:"info",onClick:N},{default:a(()=>[Ia]),_:1}),e(Y,{modelValue:g.value,"onUpdate:modelValue":A[0]||(A[0]=ee=>g.value=ee),title:"电气",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[Ea,e(P,{data:r.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(b,{prop:"key",label:"防碰"}),e(b,{prop:"value"}),e(b,{prop:"key2"}),e(b,{prop:"value2"}),e(b,{prop:"key3"}),e(b,{prop:"value3"})]),_:1},8,["data"]),Na,e(P,{data:K.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(b,{prop:"key",label:"二维码"}),e(b,{prop:"value"}),e(b,{prop:"key2"}),e(b,{prop:"value2"}),e(b,{prop:"key3"}),e(b,{prop:"value3"})]),_:1},8,["data"]),Ma,e(P,{data:p.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(b,{prop:"key",label:"磁导航"}),e(b,{prop:"value"}),e(b,{prop:"key2"}),e(b,{prop:"value2"}),e(b,{prop:"key3"}),e(b,{prop:"value3"})]),_:1},8,["data"]),Ka,e(P,{data:y.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(b,{prop:"key",label:"伺服"}),e(b,{prop:"value"}),e(b,{prop:"key2"}),e(b,{prop:"value2",label:"切换驱动单元"}),e(b,{prop:"key3"},{header:a(()=>[e($,{onClick:m},{default:a(()=>[x(Ne(w.value),1)]),_:1})]),_:1}),e(b,{prop:"value3"})]),_:1},8,["data"]),Ta]),_:1},8,["modelValue"])])}}},Va=te($a,[["__scopeId","data-v-af6281e2"]]),La={style:{"margin-left":"18%"}},Da=i("h4",null,"五米测试",-1),Aa=i("br",null,null,-1),Oa={style:{"margin-left":"58%","margin-top":"-10%"}},Pa=i("h4",null,"手动任务",-1),qa=i("br",null,null,-1),Fa=i("br",null,null,-1),Ja=i("br",null,null,-1),Ra={style:{"margin-left":"18%"}},Ba=i("h4",null,"设备动作",-1),Ga=i("br",null,null,-1),za=i("br",null,null,-1),Ua=i("br",null,null,-1),Ha={style:{"margin-left":"48%","margin-top":"-20%"}},ja=i("h4",null,"手控类型",-1),Xa=i("br",null,null,-1),Ya=i("br",null,null,-1),Wa=i("br",null,null,-1),Za=i("br",null,null,-1),Qa=i("br",null,null,-1),et={__name:"manualboxtwo",setup(S){const g=s(),N=()=>{var m={type:"manualtype",data:g.value};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{X.success("设置成功")}).catch(y=>{}).finally(()=>{})},r=s(0),K=()=>{var m={type:"fivetest",data:!0};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{X.success("五米开始")}).catch(y=>{}).finally(()=>{})},p=()=>{var m={type:"fivetest",data:!1};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{X.success("五米结束")}).catch(y=>{}).finally(()=>{})},v=s(1),c=Array.from({length:50}).map((m,y)=>({value:`${y+1}`,label:`${y+1}`})),n=()=>{var m={type:"excutetask",data:Number(v.value)};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{X.success("设置任务")}).catch(y=>{}).finally(()=>{})},o=s(null),f=()=>{var m={type:"equipment",data:{axID:Number(r.value),direction:1}};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{X.success("开始")}).catch(y=>{}).finally(()=>{})},w=()=>{clearTimeout(o.value);var m={type:"equipment",data:{axID:Number(r.value),direction:0}};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{}).catch(y=>{}).finally(()=>{}),X.success("停止")},h=s(null),M=()=>{var m={type:"equipment",data:{axID:Number(r.value),direction:2}};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{X.success("开始")}).catch(y=>{}).finally(()=>{})},u=()=>{clearTimeout(h.value);var m={type:"equipment",data:{axID:Number(r.value),direction:0}};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{}).catch(y=>{}).finally(()=>{}),X.success("停止")},T=s(null),L=()=>{var m={type:"equipment",data:{axID:Number(r.value),direction:3}};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{X.success("开始")}).catch(y=>{}).finally(()=>{})},I=()=>{clearTimeout(T.value);var m={type:"equipment",data:{axID:Number(r.value),direction:0}};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(m)}).then(y=>{}).catch(y=>{}).finally(()=>{}),X.success("停止")};return(m,y)=>{const k=ne,A=De,$=ya,b=ga;return B(),j(Le,null,[i("div",null,[i("div",La,[Da,Aa,e(k,{onClick:K,style:{"margin-left":"-5%"},type:"primary",icon:R(Ve)},{default:a(()=>[x("开始")]),_:1},8,["icon"]),e(k,{onClick:p,style:{"margin-left":"5%"},type:"primary",icon:R(oe)},{default:a(()=>[x("停止")]),_:1},8,["icon"])]),i("div",Oa,[Pa,qa,e(A,{modelValue:v.value,"onUpdate:modelValue":y[0]||(y[0]=P=>v.value=P),placeholder:"Activity count",options:R(c)},null,8,["modelValue","options"]),e(k,{onClick:n,style:{"margin-left":"2%"},type:"primary",icon:R(oe)},{default:a(()=>[x("设置")]),_:1},8,["icon"])])]),Fa,Ja,i("div",Ra,[Ba,Ga,e(b,{modelValue:r.value,"onUpdate:modelValue":y[1]||(y[1]=P=>r.value=P),placeholder:"请选择",style:{"margin-left":"-9%"}},{default:a(()=>[e($,{label:"举升",value:0}),e($,{label:"转盘",value:1}),e($,{label:"2",value:2}),e($,{label:"3",value:3}),e($,{label:"4",value:4}),e($,{label:"5",value:5}),e($,{label:"6",value:6})]),_:1},8,["modelValue"]),za,Ua,e(k,{onMousedown:f,onMouseup:w,style:{"margin-left":"-10%"},type:"primary",icon:R(oe)},{default:a(()=>[x("正向")]),_:1},8,["icon"]),e(k,{onMousedown:M,onMouseup:u,style:{"margin-left":"-5%"},type:"primary",icon:R(oe)},{default:a(()=>[x("反向")]),_:1},8,["icon"]),e(k,{onMousedown:L,onMouseup:I,style:{"margin-left":"0%"},type:"primary",icon:R(ra)},{default:a(()=>[x("复位")]),_:1},8,["icon"]),i("div",Ha,[ja,Xa,e(b,{modelValue:g.value,"onUpdate:modelValue":y[2]||(y[2]=P=>g.value=P),placeholder:"手控工具切换"},{default:a(()=>[e($,{label:"手控盒",value:1}),e($,{label:"手柄",value:2})]),_:1},8,["modelValue"]),e(k,{onClick:N,style:{"margin-left":"2%"},type:"primary",icon:R(oe)},{default:a(()=>[x("设置")]),_:1},8,["icon"])])]),Ya,Wa,Za,Qa],64)}}};const Q=S=>(ce("data-v-f57c2aa3"),S=S(),ve(),S),at={style:{"margin-left":"11%"}},tt=Q(()=>i("h4",{style:{"margin-left":"27%"}},"控 制",-1)),lt={style:{height:"60%","margin-top":"-52%",width:"100%","margin-left":"90%"}},ot=Q(()=>i("h4",{style:{"margin-left":"3%"}},"速 度",-1)),nt={style:{"margin-left":"10%","margin-top":"10%"}},st=Q(()=>i("h4",null,"三 档 开 关",-1)),ut=Q(()=>i("h4",null,"上 线",-1)),it={style:{width:"40%","margin-left":"60%","margin-top":"-20%"}},rt=Q(()=>i("h4",null,"PLS 切区",-1)),ct={style:{margin:"0 auto"}},vt=Q(()=>i("h4",null,"上 线 点",-1)),dt={style:{margin:"0 auto"}},ft=Q(()=>i("br",null,null,-1)),pt=Q(()=>i("div",{style:{width:"100%",height:"1px","background-color":"black"}},null,-1)),mt=Q(()=>i("br",null,null,-1)),_t={__name:"manualbox",setup(S){const g=s(!1),N=s("DEF"),r=s(!1),K=s(""),p=s(""),v=Array.from({length:16}).map((d,l)=>({value:`${l}`,label:`${l}`})),c=Array.from({length:200}).map((d,l)=>({value:`${l+1}`,label:`${l+1}`})),n=s(!1),o=s("left"),f=s(0),w=s(0),h=s(),M=s(),u=U({id:"",text:"",params:{}}),T=s();let L=1;const I=U({id:1,text:"↖",params:{a:4}}),m=U({id:2,text:"↑",params:{a:0}}),y=U({id:3,text:"↗",params:{a:5}}),k=U({id:4,text:"←",params:{a:2}}),A=U({id:5,text:"×",params:{a:10}}),$=U({id:6,text:"→",params:{a:3}}),b=U({id:7,text:"↙",params:{a:6}}),P=U({id:8,text:"↓",params:{a:1}}),Y=U({id:9,text:"↘",params:{a:7}}),ee=U({id:10,text:"",params:{a:13}}),re=U({id:11,text:"",params:{a:12}});function G(d){n.value=!0,r.value==!0&&he(),f.value=0,w.value=0,T.value=d,E(d),h.value=setInterval(()=>{V()},600)}const _e=s(null);function W(d){_e.value=setTimeout(()=>{n.value=!0,r.value==!0&&he(),f.value=0,w.value=0,T.value=d,E(d),h.value=setInterval(()=>{V()},600)},500)}const _=()=>{n.value=!1,r.value==!0&&(M.value=setInterval(()=>{ye()},600),console.log("Start()")),clearTimeout(h.value),T.value="",h.value="",F(),clearTimeout(_e.value),clearTimeout(h.value)},E=d=>{switch(d){case 1:u.id=I.id,u.params=I.params;break;case 2:u.id=m.id,u.params=m.params;break;case 3:u.id=y.id,u.params=y.params;break;case 4:u.id=k.id,u.params=k.params;break;case 5:u.id=A.id,u.params=A.params;break;case 6:u.id=$.id,u.params=$.params;break;case 7:u.id=b.id,u.params=b.params;break;case 8:u.id=P.id,u.params=P.params;break;case 9:u.id=Y.id,u.params=Y.params;break;case 10:u.id=ee.id,u.params=ee.params;break;case 11:u.id=re.id,u.params=re.params;break}},V=()=>{f.value++;var d;g.value==!0&&(u.params.a==4||u.params.a==5||u.params.a==6||u.params.a==7)?(d={uCmdType:0,uCmdParm:u.params.a+4,uCmdParmExt:""},console.log("!!!PRESSING!!!")):g.value==!0&&(u.params.a==2||u.params.a==3)?d={uCmdType:0,uCmdParm:u.params.a+10,uCmdParmExt:""}:d={uCmdType:0,uCmdParm:u.params.a,uCmdParmExt:""},console.log(JSON.stringify(d)),console.log(typeof JSON.stringify(d)),O({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{w.value++})};function J(){n.value=!1,r.value==!0&&(M.value=setInterval(()=>{ye()},600),console.log("Start()")),clearTimeout(h.value),T.value="",h.value=""}const F=()=>{n.value==!0&&(r.value==!0&&(M.value=setInterval(()=>{ye()},600),console.log("Start()")),clearTimeout(h.value),T.value="",h.value="",console.log("mouse leave"),n.value=!1)},le=()=>{let d="/api/ctrl/manual";L=1,pe(d)},be=()=>{let d="/api/ctrl/manual";L=2,pe(d)},fe=()=>{let d="/api/ctrl/manual";L=3,pe(d)},Ae=()=>{let d="/api/ctrl/manual";L=4,pe(d)},Oe=()=>{let d="/api/ctrl/manual";L=5,pe(d)},pe=(d,l)=>{var D={uCmdType:3,uCmdParm:L,uCmdParmExt:""};console.log(JSON.stringify(D)),console.log(typeof JSON.stringify(D)),O({method:"post",url:d,data:JSON.stringify(D)}).then(z=>{}).catch(z=>{}).finally(()=>{})},Pe=()=>{var d={uCmdType:2,uCmdParm:0,uCmdParmExt:""};console.log(JSON.stringify(d)),console.log(typeof JSON.stringify(d)),O({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{})},qe=d=>{d==!0?(M.value=setInterval(()=>{ye()},600),console.log("Start()")):he()},ye=()=>{console.log("number");var d={uCmdType:4,uCmdParm:12,uCmdParmExt:""};console.log(JSON.stringify(d)),O({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{})};function he(){console.log("onEnd()"),clearInterval(M.value),M.value=""}const xe=d=>{let l=1;switch(d.target.value){case"left":l=1;break;case"mid":l=2;break;case"right":l=3;break}var D={triswt:l};console.log(JSON.stringify(D)),console.log(typeof JSON.stringify(D)),O({method:"post",url:"/api/ctrl/triswt",data:JSON.stringify(D)}).then(z=>{}).catch(z=>{}).finally(()=>{})},Fe=()=>{var d={plscut:Number(K.value)};console.log(JSON.stringify(d)),O({method:"post",url:"/api/ctrl/plscut",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{})},Je=()=>{var d={onlinepoint:Number(p.value)};console.log(JSON.stringify(d)),O({method:"post",url:"/api/ctrl/onlinepoint",data:JSON.stringify(d)}).then(l=>{}).catch(l=>{}).finally(()=>{})},Re=()=>{g.value==!0?N.value="PRESS":N.value="DEF"};return(d,l)=>{const D=pa,z=ca,q=ne,Se=va,Be=ka,Ge=_a,Z=ma,we=ba,ze=ha,Me=De;return B(),j("div",null,[e(Z,{style:{height:"80%",width:"70%"}},{default:a(()=>[i("div",at,[e(D,null,{default:a(()=>[tt]),_:1}),e(D,{style:{"margin-bottom":"3%","margin-top":"3%","margin-left":"3%",height:"23%"}},{default:a(()=>[e(Se,{style:{width:"100%"}},{default:a(()=>[e(q,{disabled:!r.value,onMouseleave:l[0]||(l[0]=C=>F()),onMousedown:l[1]||(l[1]=C=>G(I.id)),onMouseup:J,type:"info",onTouchstart:l[2]||(l[2]=C=>W(I.id)),onTouchend:_,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(z,{size:"30"},{default:a(()=>[x(" ↖ ")]),_:1})]),_:1},8,["disabled"]),e(q,{disabled:!r.value,onMouseleave:l[3]||(l[3]=C=>F()),onMousedown:l[4]||(l[4]=C=>G(m.id)),onMouseup:J,type:"info",onTouchstart:l[5]||(l[5]=C=>W(m.id)),onTouchend:_,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(z,{size:"30"},{default:a(()=>[x(" ↑ ")]),_:1})]),_:1},8,["disabled"]),e(q,{disabled:!r.value,onMouseleave:l[6]||(l[6]=C=>F()),onMousedown:l[7]||(l[7]=C=>G(y.id)),onMouseup:J,type:"info",onTouchstart:l[8]||(l[8]=C=>W(y.id)),onTouchend:_,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(z,{size:"30"},{default:a(()=>[x(" ↗ ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(D,{style:{"margin-bottom":"3%",height:"23%","margin-left":"3%"}},{default:a(()=>[e(Se,{style:{width:"100%"}},{default:a(()=>[e(q,{disabled:!r.value,onMouseleave:l[9]||(l[9]=C=>F()),onMousedown:l[10]||(l[10]=C=>G(k.id)),onMouseup:J,type:"info",onTouchstart:l[11]||(l[11]=C=>W(k.id)),onTouchend:_,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(z,{size:"30"},{default:a(()=>[x(" ← ")]),_:1})]),_:1},8,["disabled"]),e(q,{disabled:!r.value,onClick:d.changeClick,type:"info",style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(Be,{disabled:!r.value,onChange:Re,modelValue:g.value,"onUpdate:modelValue":l[12]||(l[12]=C=>g.value=C),size:"large"},{default:a(()=>[x(Ne(N.value),1)]),_:1},8,["disabled","modelValue"])]),_:1},8,["disabled","onClick"]),e(q,{disabled:!r.value,onMouseleave:l[13]||(l[13]=C=>F()),onMousedown:l[14]||(l[14]=C=>G($.id)),onMouseup:J,type:"info",onTouchstart:l[15]||(l[15]=C=>W($.id)),onTouchend:_,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(z,{size:"30"},{default:a(()=>[x(" → ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(D,{style:{"margin-bottom":"3%",height:"23%","margin-left":"3%"}},{default:a(()=>[e(Se,{style:{width:"100%"}},{default:a(()=>[e(q,{disabled:!r.value,onMouseleave:l[16]||(l[16]=C=>F()),onMousedown:l[17]||(l[17]=C=>G(b.id)),onMouseup:J,type:"info",onTouchstart:l[18]||(l[18]=C=>W(b.id)),onTouchend:_,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(z,{size:"30"},{default:a(()=>[x(" ↙ ")]),_:1})]),_:1},8,["disabled"]),e(q,{disabled:!r.value,onMouseleave:l[19]||(l[19]=C=>F()),onMousedown:l[20]||(l[20]=C=>G(P.id)),onMouseup:J,type:"info",onTouchstart:l[21]||(l[21]=C=>W(P.id)),onTouchend:_,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(z,{size:"30"},{default:a(()=>[x(" ↓ ")]),_:1})]),_:1},8,["disabled"]),e(q,{disabled:!r.value,onMouseleave:l[22]||(l[22]=C=>F()),onMousedown:l[23]||(l[23]=C=>G(Y.id)),onMouseup:J,type:"info",onTouchstart:l[24]||(l[24]=C=>W(Y.id)),onTouchend:_,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:a(()=>[e(z,{size:"30"},{default:a(()=>[x(" ↘ ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(Ge,{onChange:qe,modelValue:r.value,"onUpdate:modelValue":l[25]||(l[25]=C=>r.value=C),"active-text":"Open","inactive-text":"Close"},null,8,["modelValue"])]),i("div",lt,[e(D,null,{default:a(()=>[ot]),_:1}),e(D,null,{default:a(()=>[e(q,{onClick:le,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[x("1 级")]),_:1})]),_:1}),e(D,null,{default:a(()=>[e(q,{onClick:be,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[x("2 级")]),_:1})]),_:1}),e(D,null,{default:a(()=>[e(q,{onClick:fe,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[x("3 级")]),_:1})]),_:1}),e(D,null,{default:a(()=>[e(q,{onClick:Ae,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[x("4 级")]),_:1})]),_:1}),e(D,null,{default:a(()=>[e(q,{onClick:Oe,type:"success",style:{width:"15%","margin-bottom":"-2%"}},{default:a(()=>[x("5 级")]),_:1})]),_:1})])]),_:1}),i("div",nt,[e(Z,{style:{"margin-left":"10%"}},{default:a(()=>[st]),_:1}),e(Z,{style:{"margin-top":"1%"}},{default:a(()=>[e(ze,{modelValue:o.value,"onUpdate:modelValue":l[26]||(l[26]=C=>o.value=C),style:{margin:"0 auto"}},{default:a(()=>[e(we,{onChange:xe,size:"large",label:"left"},{default:a(()=>[x("手动")]),_:1}),e(we,{onChange:xe,size:"large",label:"mid"},{default:a(()=>[x("空闲")]),_:1}),e(we,{onChange:xe,size:"large",label:"right"},{default:a(()=>[x("自动")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Z,{style:{"margin-left":"10%","margin-top":"3%"}},{default:a(()=>[ut]),_:1}),e(Z,{style:{"margin-left":"6%","margin-top":"1%"}},{default:a(()=>[e(q,{onClick:Pe,size:"large",style:{margin:"0 auto"},type:"primary",icon:R(Ve)},{default:a(()=>[x("上线")]),_:1},8,["icon"])]),_:1})]),i("div",it,[e(Z,null,{default:a(()=>[rt]),_:1}),e(Z,null,{default:a(()=>[i("div",ct,[e(D,{prop:"count"},{default:a(()=>[e(Me,{modelValue:K.value,"onUpdate:modelValue":l[27]||(l[27]=C=>K.value=C),placeholder:"Activity count",options:R(v)},null,8,["modelValue","options"]),e(q,{onClick:Fe,style:{"margin-left":"2px"},type:"primary",icon:R(oe)},{default:a(()=>[x("设置")]),_:1},8,["icon"])]),_:1})])]),_:1}),e(Z,{style:{"margin-top":"10%"}},{default:a(()=>[vt]),_:1}),e(Z,null,{default:a(()=>[i("div",dt,[e(D,{prop:"count"},{default:a(()=>[e(Me,{modelValue:p.value,"onUpdate:modelValue":l[28]||(l[28]=C=>p.value=C),placeholder:"Activity count",options:R(c)},null,8,["modelValue","options"]),e(q,{onClick:Je,style:{"margin-left":"2px"},type:"primary",icon:R(oe)},{default:a(()=>[x("设置")]),_:1},8,["icon"])]),_:1})])]),_:1})]),ft,pt,mt,e(et)])}}},yt=te(_t,[["__scopeId","data-v-f57c2aa3"]]);const gt={style:{"margin-left":"35%","margin-top":"7%"}},kt=da('<div class="container" data-v-2b210d2e><div id="battery" data-v-2b210d2e><div id="charge" data-v-2b210d2e></div><div id="charge-level" data-v-2b210d2e></div></div><div id="charging-time" data-v-2b210d2e></div></div>',1),bt=[kt],ht={__name:"BatteryDisplay",setup(S){const g=s({}),N=()=>{g.value=t.value,r(g.value),ua.value=setTimeout(()=>{N()},2e4)};Ie(N);const r=K=>{console.log("fakeMsg",K);const p=s(""),v=s(""),c=s(null);v.value=document.getElementById("charge"),p.value=document.getElementById("charge-level"),c.value=document.getElementById("charging-time");function n(){o(),f()}n();function o(){K.electricalModule.sensor.battmetr.bCharge?(v.value&&v.value.classList&&v.value.classList.add("active"),v.value!==""&&(v.value.innerText="")):v.value.classList.remove("active")}function f(){let w=`${K.electricalModule.sensor.battmetr.fCapPercent.toFixed(2)}%`;v.value&&v.value.style&&(v.value.style.width=w),p.value&&(p.value.textContent=w,console.log("charge.value.style.width",v.value.style.width))}};return(K,p)=>(B(),j("div",gt,bt))}},xt=te(ht,[["__scopeId","data-v-2b210d2e"]]);const St=S=>(ce("data-v-19e6b8b5"),S=S(),ve(),S),wt={key:0},Ct={key:1,class:"better"},It={class:"dianchi"},Et=St(()=>i("br",null,null,-1)),Nt={__name:"conagv",setup(S){const g=s(!1),N=()=>{g.value=!0},r=s(!1),K=()=>{r.value=!r.value},p=s(0),v=H(()=>(t.value.nAgvState===0?p.value="加载中":t.value.nAgvState===1?p.value="空闲":t.value.nAgvState===2?p.value="手动":t.value.nAgvState===3&&(p.value="自动"),t.value.event.name===""?Ee.value=1:Ee.value=2,[{key:"车号",value:3,key2:"模式",value2:p.value},{key:"开始路段",value:t.value.tcInfo.uFromNode,key2:"结束路段",value2:t.value.tcInfo.uToNode},{key:"理论位置",value:`(${t.value.tcInfo.iDevX},${t.value.tcInfo.iDevY})`,key2:"当前位置",value2:`(${t.value.navInfo.fRealX.toFixed(3)},${-t.value.navInfo.fRealY.toFixed(3)})`},{key:"事件",value:t.value.event.name,key2:"原因",value2:t.value.event.detail},{key:"建议",value:t.value.event.advise,key2:"",value2:""}]));return(c,n)=>{const o=ne,f=ue,w=ie,h=se;return B(),j("div",{class:Te(r.value?"agv2":"agv")},[i("div",{class:Te(r.value?"table2":"table")},[e(o,{onClick:K,class:"button",type:"text"},{default:a(()=>[x(Ne(r.value?"＋":"一"),1)]),_:1}),r.value?(B(),j("div",wt," AGV ")):Ke("",!0),r.value?Ke("",!0):(B(),j("div",Ct,[i("div",It,[e(xt)]),e(w,{data:v.value,border:"",class:"datatable"},{default:a(()=>[e(f,{prop:"key",label:"AGV"}),e(f,{prop:"value"}),e(f,{prop:"key2"}),e(f,{prop:"value2"})]),_:1},8,["data"]),e(o,{class:"fuwei",type:"info"},{default:a(()=>[x("复位")]),_:1}),e(o,{class:"quxiaorenwu",type:"info"},{default:a(()=>[x("取消任务")]),_:1}),e(o,{class:"jusheng",type:"info"},{default:a(()=>[x("举升")]),_:1}),e(o,{class:"fangxia",type:"info"},{default:a(()=>[x("放下")]),_:1}),e(o,{class:"quchongdian",type:"info"},{default:a(()=>[x("去充电")]),_:1}),e(o,{class:"shoudongkongzhi",type:"info",onClick:N},{default:a(()=>[x("手动控制")]),_:1})])),e(h,{modelValue:g.value,"onUpdate:modelValue":n[0]||(n[0]=M=>g.value=M),title:"手动控制",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[Et,e(yt)]),_:1},8,["modelValue"])],2)],2)}}},Mt=te(Nt,[["__scopeId","data-v-19e6b8b5"]]),Kt={AgvEquipmentInfo:[{Key:" eServoRelayCheck",value:"举升伺服未上电"},{Key:" eEmgCheck",value:"急停按下"},{Key:" eIoMarkCheck",value:"未发现地标"},{Key:" eMagnetDevCheck",value:"左右磁导航偏差过大"},{Key:" eFindLifterError",value:"举升伺服故障"},{Key:" eFindCarrierError",value:"整体轴伺服报错"},{Key:" eLifterSyncError",value:"举升编码器同步错误"},{Key:" elifterCentreCheck",value:"同步开关错误"},{Key:" elifterPositionCheck",value:"位置开关校验高度错误"},{Key:" elifterPositionCheckHight",value:"高度校验位置开关错误"},{Key:" ePreLifterHeightCheck",value:"举升任务高度错误"},{Key:" eLifterTopNotSafe",value:"举升高度不安全"},{Key:" eSecondAxisCheckCargoStatus",value:"副轴货物状态异常"},{Key:" eFirstAxisCheckCargoStatus",value:"主轴货物状态异常"},{Key:" eSecondAxisCargoExist",value:"副轴货物存在"},{Key:" eFirstAxisCargoExist",value:"主轴货物存在"},{Key:" eSecondAxisCargoNotExist",value:"副轴货物不存在"},{Key:" eFirstAxisCargoNotExist",value:"主轴货物不存在"},{Key:" eLifterHeightCheckright",value:"举升位置不安全"},{Key:" resume",value:"复位设备伺服"},{Key:" LifterAutoGotoHeight",value:"举升运动中"},{Key:" FirstAxisCargoNotExist",value:"主轴送货完成后发现货物"},{Key:" SecondAxisCargoNotExist",value:"副轴送货完成后发现货物"},{Key:" FirstAxisCargoExist",value:"主轴取货完成后未发现货物"},{Key:" SecondAxisCargoExist",value:"副轴取货完成后未发现货物"},{Key:" LifterReset",value:"举升复位到0"},{Key:" CarrierAutoGotoHeight",value:"整体轴运动中"},{Key:" CameraCheck",value:"获得工作模式并检查是否超时"},{Key:" eStartModeErr",value:"开始工作模式错误"},{Key:" eEndModeErr",value:"结束工作模式错误"},{Key:" eStateErr",value:"3D相机工作状态错误"},{Key:" eGoodExistErr",value:"前方货架有货"},{Key:" LifterAxis_Up",value:"举升轴上限位检测"},{Key:" LifterAxis_Down",value:"举升轴下限位检测"},{Key:" eLifterServoErr",value:"举升伺服故障"},{Key:" TurnAxis_Up",value:"旋转轴限位检测"},{Key:" TurnAxis_Down",value:"旋转轴限位检测"},{Key:" TurnAxis_Gohome",value:"旋转轴校零"},{Key:" LifterAxis_Gohome",value:"举升轴校零"},{Key:" eEmgbtnPressed",value:"急停按下"},{Key:" CheckDeltaAng",value:"角度补偿检测"},{Key:" StartLoadTune",value:"开始载货调整"},{Key:" ClearDeltaAng",value:"清除角度补偿"},{Key:" CheckDeltaY",value:"Y轴补偿检测"},{Key:" ClearDeltaY",value:"清除Y轴补偿"},{Key:" EndTune",value:"结束载货"},{Key:" CheckDeltaX",value:"X轴补偿检测"},{Key:" AutoGotoTopExt",value:"举升轴到上限位"},{Key:" eNotfindtheTop",value:"举升轴找不到上限位"},{Key:" LifterHeightCheck",value:"举升轴高度检测"},{Key:" CargoCheck",value:"货物检测"},{Key:" eLoadCargoExistError",value:"货物不存在"},{Key:" UpdateGryoPos",value:"更新惯导位置"},{Key:" CargoExist",value:"货物存在"},{Key:" StartUnLoadTune",value:"开始卸载调整"},{Key:" HandleUnLoadCheck",value:"卸货检查"},{Key:" eRackAngleNotSafe",value:"转盘角度不安全"},{Key:" AutoGotoBottomExt",value:"举升轴到下限位"},{Key:" eLifterBottomNotSafe",value:"举升轴到底不安全"},{Key:" eUnLoadCargoExistError",value:"货物未卸载"},{Key:" StartSyncSpin",value:"开始同步旋转"},{Key:" eSpinDiffOverLimit",value:"自旋角度超限"},{Key:" eRackServoErr",value:"旋转伺服故障"},{Key:" HandleSyncSpin",value:"处理同步旋转"},{Key:" EndSyncSpin",value:"结束同步旋转"},{Key:" StartCameraCheck",value:"开始3D相机检测"},{Key:" SpinCheck",value:"旋转检测"},{Key:" Start",value:"自旋准备"},{Key:" RackRun",value:"开始自旋"},{Key:" End",value:"结束自旋"},{Key:" ClearNavDeltaAng",value:"清除导航补偿角度"},{Key:" eCanNotGetNavThita",value:"无法得到导航角度"},{Key:" eCanNotGetNavY",value:"无法得到导航角度"},{Key:" eCanNotGetNavX",value:"无法得到导航角度"},{Key:" CheckNavAng",value:"检测导航角度"},{Key:" CheckNavAng",value:"检测导航角度"}]};const ke=S=>(ce("data-v-7516be3b"),S=S(),ve(),S),Tt=ke(()=>i("span",{style:{"font-size":"18px"}}," 车体设备",-1)),$t=ke(()=>i("br",null,null,-1)),Vt=ke(()=>i("br",null,null,-1)),Lt=ke(()=>i("br",null,null,-1)),Dt={__name:"dev",setup(S){const g=s(!1),N=()=>{g.value=!0},r=H(()=>[{key:"转盘纵向开关",value:t.value.equipmentInfo.rack.turn_axis.bZero?"🔴":"🟢",key2:"转盘横向开关",value2:t.value.equipmentInfo.rack.turn_axis.bLevel?"🔴":"🟢"},{key:"转盘位置",value:(t.value.equipmentInfo.rack.turn_axis.fAxisPosition/1e3).toFixed(3),key2:"",value2:""}]),K=H(()=>[{key:"举升高位开关",value:t.value.equipmentInfo.rack.lifter_axis.bTop?"🔴":"🟢",key2:"举升零位开关",value2:t.value.equipmentInfo.rack.lifter_axis.bBottom?"🔴":"🟢"},{key:"举升位置",value:t.value.equipmentInfo.rack.lifter_axis.fAxisPosition.toFixed(3),key2:"",value2:""}]),p=s(0),v=s(0),c=s(0),n=s(0),o=s(0),f=H(()=>{if(p.value=t.value.equipmentInfo.uEquipmentState,p.value===0?p.value="其他":p.value===1?p.value="开始":p.value===2?p.value="暂停":p.value===3&&(p.value="结束"),n.value=t.value.equipmentInfo.uEquipmentTaskError,n.value===0&&(n.value="无故障"),v.value=t.value.equipmentInfo.uEquipmentTaskID,v.value===0)c.value="无任务",o.value="无";else{o.value=t.value.equipmentInfo.strEquipmentTaskMessage;const h=Kt.AgvEquipmentInfo.reduce((M,u)=>(M[u.Key]=u.value,M),{})[o.value]||"";o.value=h,c.value=t.value.equipmentInfo.uEquipmentTaskState,c.value===0?c.value="运行中":c.value===1?c.value="结束":c.value===-1&&(c.value="无任务")}return[{key:"当前设备状态",value:p.value,key2:"当前设备任务号",value2:v.value},{key:"当前设备任务状态",value:c.value,key2:"当前设备故障码",value2:n.value},{key:"当前设备动作步骤",value:o.value,key2:"当前动作轴id",value2:""},{key:"当前动作轴位置",value:"",key2:"当前动作轴开关状态",value2:""}]});return(w,h)=>{const M=ne,u=ue,T=ie,L=se;return B(),j("div",null,[e(M,{class:"controldev",type:"info",onClick:N},{default:a(()=>[Tt]),_:1}),e(L,{modelValue:g.value,"onUpdate:modelValue":h[0]||(h[0]=I=>g.value=I),title:"车体设备",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[$t,e(T,{data:r.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(u,{prop:"key",label:"转盘"}),e(u,{prop:"value"}),e(u,{prop:"key2"}),e(u,{prop:"value2"})]),_:1},8,["data"]),Vt,e(T,{data:K.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(u,{prop:"key",label:"举升"}),e(u,{prop:"value"}),e(u,{prop:"key2"}),e(u,{prop:"value2"})]),_:1},8,["data"]),Lt,e(T,{data:f.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(u,{prop:"key",label:"设备信息"}),e(u,{prop:"value"}),e(u,{prop:"key2"}),e(u,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},At=te(Dt,[["__scopeId","data-v-7516be3b"]]);const Ot=S=>(ce("data-v-4c89509f"),S=S(),ve(),S),Pt=Ot(()=>i("span",{style:{"font-size":"18px"}}," 控制台",-1)),qt={__name:"tc",setup(S){const g=s(!1),N=()=>{g.value=!0},r=s(0),K=s(0),p=s(0),v=s(0),c=s(0),n=s(0),o=s(0),f=s(0),w=s(0),h=s(0),M=s(0),u=s(0),T=s(0),L=H(()=>{switch(T.value=t.value.tcInfo.sHeading,v.value=t.value.tcInfo.sCurSpeed,n.value=t.value.tcInfo.uWorkState,n.value===1?n.value="运行":n.value===2?n.value="挂起":n.value===3?n.value="静态OP":n.value===4?n.value="充电":n.value===5?n.value="等待":n.value===6?n.value="睡眠":n.value===0?n.value="空闲":n.value===7&&(n.value="唤醒"),o.value=t.value.tcInfo.ucEventState,o.value){case 0:o.value="无故障";break;case 1:o.value=" 自旋误差超限";break;case 2:o.value="导航误差超限";break;case 3:o.value="位置校验失败";break;case 4:o.value="地标信号异常";break;case 5:o.value="磁导航通讯超时";break;case 6:o.value="惯导信息故障";break;case 7:o.value="定位模块通讯中断";break;case 30:o.value="CAN通讯超时";break;case 31:o.value="CanOpen伺服故障";break;case 32:o.value="舵碰限位";break;case 33:o.value="车轮过热";break;case 34:o.value="自制伺服故障";break;case 35:o.value="Mcu重启";break;case 36:o.value="IO检测板故障";break;case 37:o.value="机械臂网络连接断开";break;case 60:o.value="车载设备故障";break;case 61:o.value="设备车体互锁";break;case 90:o.value="伺服电源故障";break;case 91:o.value="用户紧急停车";break;case 92:o.value="硬件保险杠碰撞";break;case 93:o.value="PLS近距离急停";break;case 94:o.value="PLS中距离停车";break;case 95:o.value="PLS切区错误";break;case 96:o.value="3D相机状态错误";break;case 97:o.value="软pls状态错误";break;case 120:o.value="控制台挂起";break;case 121:o.value="网络通讯超时";break;case 122:o.value="控制台任务删除";break;case 123:o.value="禁止上线";break;case 124:o.value="AGV紧急停车";break;case 125:o.value="任务错误";break;case 150:o.value="电池电量低";break;case 151:o.value="电池电量太低";break;case 152:o.value="充电失败";break;case 153:o.value="电池系统故障";break;case 180:o.value="地图信息错误";break;case 210:o.value="用户暂停";break}return f.value=t.value.tcInfo.usEventDetail,f.value===0&&(f.value="无故障"),M.value=t.value.tcInfo.usTaskID,u.value=t.value.tcInfo.usKey,h.value=t.value.tcInfo.ucTaskState,t.value.nAgvState===3?h.value===1?h.value="开始":h.value===2?h.value="运行中":h.value===3&&(h.value="结束"):h.value="无任务",c.value=t.value.tcInfo.usCargoState,c.value===0?c.value="未载货":c.value===1&&(c.value="载货"),w.value=t.value.tcInfo.usBatterState,w.value===0?w.value="无需充电":w.value===1?w.value="正常电量":w.value===2?w.value="电量低":w.value===3&&(w.value="电量极低"),r.value=t.value.tcInfo.uFromNode,K.value=t.value.tcInfo.uToNode,p.value=t.value.tcInfo.sProgress,[{key:"开始节点",value:r.value,key2:"目标节点",value2:K.value},{key:"当前进度量",value:p.value,key2:"控制台设置速度",value2:v.value},{key:"货物状态",value:c.value,key2:"工作状态",value2:n.value},{key:"1级故障码",value:o.value,key2:"2级故障码",value2:f.value},{key:"电池状态",value:w.value,key2:"",value2:""},{key:"任务状态",value:h.value,key2:"任务号",value2:M.value},{key:"动作key",value:u.value,key2:"heading",value2:T.value}]});return(I,m)=>{const y=ne,k=ue,A=ie,$=se;return B(),j("div",null,[e(y,{class:"controlnav",type:"info",onClick:N},{default:a(()=>[Pt]),_:1}),e($,{modelValue:g.value,"onUpdate:modelValue":m[0]||(m[0]=b=>g.value=b),title:"控制台信息",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:a(()=>[e(A,{data:L.value,border:"",style:{width:"90%","margin-left":"5%","background-color":"rgba(255, 255, 255, 0.5)"}},{default:a(()=>[e(k,{prop:"key"}),e(k,{prop:"value"}),e(k,{prop:"key2"}),e(k,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}},Ft=te(qt,[["__scopeId","data-v-4c89509f"]]),Jt=i("br",null,null,-1),Rt={__name:"screen_info",setup(S,{expose:g}){const N=s(!1);g({handleMouseClick:p=>{const v=ge.intersectObjects([p]);v.length>0&&(console.log("modelname:",v[0].object.name),v[0].object.name==="screen"||v[0].object.name==="screen1"||v[0].object.name==="screen2"||v[0].object.name==="screen3"||v[0].object.name==="screen4"?N.value=!0:N.value=!1)}});const K=H(()=>[{key:"屏幕型号",value:0,key2:"通讯类型",value2:0,key3:"手控设备信息",value3:0}]);return(p,v)=>{const c=ue,n=ie,o=se;return B(),fa(o,{modelValue:N.value,"onUpdate:modelValue":v[0]||(v[0]=f=>N.value=f),title:"屏幕","custom-class":"ele-dialog",modal:!1},{default:a(()=>[Jt,e(n,{data:K.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(c,{prop:"key",label:"设备信息"}),e(c,{prop:"value"}),e(c,{prop:"key2"}),e(c,{prop:"value2"}),e(c,{prop:"key3"}),e(c,{prop:"value3"})]),_:1},8,["data"])]),_:1},8,["modelValue"])}}},Bt=i("br",null,null,-1),Gt=i("br",null,null,-1),zt={__name:"wheel_info",setup(S,{expose:g}){const N=s(!1),r=s(!1);g({handleMouseClickwheel:v=>{const c=ge.intersectObjects([v]);c.length>0&&(c[0].object.name==="rightwheel"||c[0].object.name==="rightwheel1"||c[0].object.name==="rightwheel2"?N.value=!0:N.value=!1,c[0].object.name==="leftwheel"||c[0].object.name==="leftwheel1"||c[0].object.name==="leftwheel2"?r.value=!0:r.value=!1)}});const p=H(()=>[{key:"驱动内坐标X",value:0,key2:"驱动内坐标Y",value2:0},{key:"电机减速比",value:0,key2:"车轮直径",value2:0},{key:"码盘线束",value:0,key2:"最大转速",value2:0}]);return(v,c)=>{const n=ue,o=ie,f=se;return B(),j(Le,null,[e(f,{modelValue:N.value,"onUpdate:modelValue":c[0]||(c[0]=w=>N.value=w),title:"右轮","custom-class":"ele-dialog",modal:!1},{default:a(()=>[Bt,e(o,{data:p.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(n,{prop:"key",label:"设备信息"}),e(n,{prop:"value"}),e(n,{prop:"key2"}),e(n,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"]),e(f,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=w=>r.value=w),title:"左轮","custom-class":"ele-dialog",modal:!1},{default:a(()=>[Gt,e(o,{data:p.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:a(()=>[e(n,{prop:"key",label:"设备信息"}),e(n,{prop:"value"}),e(n,{prop:"key2"}),e(n,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}};const Ut={class:"home"},$e=500,Ht={__name:"index",setup(S){const g=s([]),N=new na,r=s(null),K=s(null),p=s(!1),v=s(null),c=()=>{O({method:"post",url:"/api/data/easylog",data:JSON.stringify({group:"siasun",account:"test",password:"123456"})}).then(E=>{if(v.value=E.data,v.value.status!==204&&(t.value=v.value,g.value.push(t.value),b(),!p.value))switch(p.value=!0,t.value.uAgvType){case 0:N.load("./main/test.glb",V=>{I=V.scene,I.scale.set(1,.6,.7),I.rotation.set(0,Ce.degToRad(90),0),k.add(I),Y(),re(),G()},V=>{console.log(V.loaded/V.total*100+"% loaded")},V=>{console.error("Error loading model:",V)});break;default:N.load("./main/test.glb",V=>{I=V.scene,I.scale.set(1,.6,.7),I.rotation.set(0,Ce.degToRad(90),0),k.add(I),Y(),re(),G()},V=>{console.log(V.loaded/V.total*100+"% loaded")},V=>{console.error("Error loading model:",V)}),X.error("无匹配模型，加载默认货架车");break}}).catch(E=>{}).finally(()=>{}),ia.value=setTimeout(c,500)};Ie(()=>{c()});const n=new me(16777215,1);n.position.set(0,0,10);const o=new me(16777215,1);o.position.set(0,0,-10);const f=new me(16777215,1);f.position.set(10,0,0);const w=new me(16777215,1);w.position.set(-10,0,0);const h=new me(16777215,1);h.position.set(0,10,0);const M=new He({antialias:!0});M.setSize(window.innerWidth,window.innerHeight),M.setClearColor(16777215);const u=()=>{P(),M.render(k,A),T&&T.update(),requestAnimationFrame(u)};let T,L,I,m=s(null);const y=new je,k=new Xe,A=new Ye(75,window.innerWidth/window.innerHeight,.1,1e3);A.position.set(0,2,6);let $=null;const b=()=>{$&&k.remove($);const _=new Ze({color:255,linewidth:1}),E=g.value.map(F=>new Qe(F.navInfo.fRealX.toFixed(3),0,-F.navInfo.fRealY.toFixed(3))),V=new ea().setFromPoints(E);let J=new aa(V,_);k.add(J),$=J},P=()=>{if(I&&t.value!==void 0&&!t.value.status){const _=t.value;I.position.set(_.navInfo.fRealX.toFixed(3),0,-_.navInfo.fRealY.toFixed(3));const E=new ta(0,Ce.degToRad((_.navInfo.fRealThita*180/Math.PI).toFixed(3)),0,"XYZ"),V=new la().setFromEuler(E);I.setRotationFromQuaternion(V)}},Y=()=>{I.traverse(_=>{if(_.name==="screen2"){const E=Math.random()*16777215;_.material.color.setHex(E)}}),setTimeout(Y,500)};let ee=1;const re=()=>{const E={1:{on:65280,off:16777215},2:{on:16711680,off:16777215}}[Ee.value],V=E.on,J=E.off,F=(le,be)=>{le.traverse(fe=>{fe instanceof oa&&(fe.material.color.clone(),fe.material.color.set(be))})};I.traverse(le=>{le.name==="light"&&(ee===1?F(le,V):F(le,J))}),ee=1-ee,setTimeout(re,1e3)},G=()=>{I.traverse(_=>{if(_.name==="upDown"&&(_.rotation.y=(t.value.equipmentInfo.rack.turn_axis.fAxisPosition/1e3).toFixed(2),_.position.y=t.value.equipmentInfo.rack.lifter_axis.fAxisPosition+1e3),_.name==="leftwheel"&&(_.rotation.z+=t.value.electricalModule.kinematic.drive[0].wheel.fServoSpeed.toFixed(5)*.5),_.name==="rightwheel"&&(_.rotation.z+=t.value.electricalModule.kinematic.drive[1].wheel.fServoSpeed.toFixed(5)*.5),_.name==="turnnei")if(t.value.equipmentInfo.rack.turn_axis.bLevel){const E=new ae({color:16711680});_.material=E}else{const E=new ae({color:65280});_.material=E}if(_.name==="turnwai")if(t.value.equipmentInfo.rack.turn_axis.bZero){const E=new ae({color:16711680});_.material=E}else{const E=new ae({color:65280});_.material=E}if(_.name==="liftertop")if(t.value.equipmentInfo.rack.lifter_axis.bTop){const E=new ae({color:16711680});_.material=E}else{const E=new ae({color:65280});_.material=E}if(_.name==="lifterbuttom")if(t.value.equipmentInfo.rack.lifter_axis.bBottom){const E=new ae({color:16711680});_.material=E}else{const E=new ae({color:65280});_.material=E}}),requestAnimationFrame(G)},_e=_=>{y.x=_.clientX/window.innerWidth*2-1,y.y=-(_.clientY/window.innerHeight)*2+1,ge.setFromCamera(y,A),I!==void 0&&ge.intersectObjects([I]).length>0},W=()=>{};return Ie(()=>{window.addEventListener("mousemove",_e),window.addEventListener("mouseout",W),window.addEventListener("click",()=>{r.value.handleMouseClick(I)}),window.addEventListener("click",()=>{K.value.handleMouseClickwheel(I)}),m.value.appendChild(M.domElement),L=new We($e,$e),L.material.opacity=.3,L.material.transparent=!0,k.add(L),T=new sa(A,M.domElement),T.update(),k.add(n),k.add(o),k.add(f),k.add(w),k.add(h),u()}),(_,E)=>(B(),j("div",Ut,[i("div",{class:"canvas-container",ref_key:"canvasDom",ref:m},null,512),e(Ca),e(Va),e(At),e(Ft),e(Mt),e(Rt,{ref_key:"screenRef",ref:r},null,512),e(zt,{ref_key:"wheelRef",ref:K},null,512)]))}},gl=te(Ht,[["__scopeId","data-v-4f0cee6b"]]);export{gl as default};
