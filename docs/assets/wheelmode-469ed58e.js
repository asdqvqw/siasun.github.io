import{Q as ce,o as k,c as C,a as u,F as X,aY as Z,e as te,f as t,bc as R,b as l,E as j,bl as x,aV as w,bB as Ue,m as r,g as L,_ as ue,bH as J,by as F,l as he,p as se,q as oe,cv as Ee,at as xe}from"./index-bef82f0e.js";import{E as Se,a as Me}from"./el-tab-pane-bc119fa9.js";import"./el-tag-8927c8cc.js";import{E as ne,a as ie}from"./el-select-96b2f0e6.js";import"./el-scrollbar-e41e7557.js";import"./el-popper-891820f9.js";import{E as pe}from"./el-dialog-4bbfff58.js";import{m as Ie,a as ke,j as S,A as Ae,b as $e,f as q,t as a,s as Ce,d as G,c as ve,e as re}from"./commondata-001ecf30.js";import{E as ge}from"./el-card-19e8cf80.js";/* empty css                        *//* empty css                    */import"./el-tooltip-4ed993c7.js";import{E as Ne,a as Te}from"./index-6c4d92df.js";/* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 */import{E as we}from"./index-7dde30b4.js";import{E as Oe}from"./index-8ad69740.js";import{E as ye,a as Ve}from"./index-6fae8fdc.js";import{_ as _e}from"./DefinScrollbar-28f1e5d5.js";import{_ as ze}from"./check-4d53af7a.js";import"./strings-676b94ab.js";import"./index-c7396006.js";import"./isEqual-504bd3c8.js";import"./Uint8Array-d7c98d02.js";import"./debounce-cc98fddb.js";import"./initCloneObject-ba528e70.js";/* empty css                                                                       */const Pe=u("h5",null,"· 手动模式下速度等级对应的速度",-1),Ke=u("br",null,null,-1),Be={style:{display:"flex","flex-wrap":"wrap",gap:"20px"}},Re={style:{display:"flex","align-items":"center"}},De={style:{"margin-right":"10px"}},Le=u("br",null,null,-1),Je=u("h5",null,"· 手动模式下转弯半径",-1),Fe=u("br",null,null,-1),Ye={style:{display:"flex","flex-wrap":"wrap",gap:"20px"}},qe={style:{display:"flex","align-items":"center"}},Xe={style:{"margin-right":"10px"}},Ge={__name:"manualparm",setup(s){const f=ce(()=>Ie.value.speed_level.map(o=>({value:o})));function d(){S.value.MotionParam.manaul_param.speed_level=f.value.map(o=>o.value),Ie.value.speed_level=f.value.map(o=>o.value)}const m=ce(()=>ke.value.speed_level.map(o=>({value:o})));function M(){S.value.MotionParam.manaul_param.turn_radius=m.value.map(o=>o.value),ke.value.speed_level=m.value.map(o=>o.value)}return(o,U)=>{const $=j,_=ge;return k(),C(X,null,[Pe,Ke,u("div",Be,[(k(!0),C(X,null,Z(f.value,(h,c)=>(k(),te(_,{key:c,class:"speed-card","body-style":{padding:"20px"}},{default:t(()=>[u("div",Re,[u("span",De,"🔶 速度等级 "+R(c+1)+":",1),l($,{modelValue:h.value,"onUpdate:modelValue":g=>h.value=g,modelModifiers:{number:!0},type:"number",step:"0.1",min:"0.0",max:"1.0",placeholder:"请输入速度",onInput:d,style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),128))]),Le,Je,Fe,u("div",Ye,[(k(!0),C(X,null,Z(m.value,(h,c)=>(k(),te(_,{key:c,class:"speed-card","body-style":{padding:"20px"}},{default:t(()=>[u("div",qe,[u("span",Xe,"🔶 半径等级 "+R(c+1)+":",1),l($,{modelValue:h.value,"onUpdate:modelValue":g=>h.value=g,modelModifiers:{number:!0},type:"number",step:"0.1",min:"0.0",max:"5.0",placeholder:"请输入速度",onInput:M,style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),128))])],64)}}};const je={__name:"autoparm",setup(s){const f=(d,m)=>{S.value.MotionParam.common_param[m.key]=parseFloat(m.value)};return(d,m)=>{const M=Ne,o=j,U=Te;return k(),C("div",null,[l(U,{data:x(Ae),style:{width:"100%"},class:"AUTOPARM"},{default:t(()=>[l(M,{prop:"name",label:"🔖 公共参数: "},{default:t($=>[u("span",null,"🔶"+R($.row.name),1)]),_:1}),l(M,{prop:"value",label:" "},{default:t($=>[l(o,{modelValue:$.row.value,"onUpdate:modelValue":_=>$.row.value=_,placeholder:"请选择",style:{width:"100%"},onChange:_=>f($.$index,$.row),type:"number"},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])])}}};const He=u("h5",null,"· 自动模式下速度等级对应的速度",-1),Qe=u("br",null,null,-1),We={style:{display:"flex","flex-wrap":"wrap",gap:"20px"}},Ze={style:{display:"flex","align-items":"center"}},el={style:{"margin-right":"10px"}},ll={__name:"commonparm",setup(s){const f=ce(()=>$e.value.speed_level.map(m=>({value:m})));function d(){S.value.MotionParam.auto_param.speed_level=f.value.map(m=>m.value),$e.value.speed_level=f.value.map(m=>m.value)}return(m,M)=>{const o=j,U=ge;return k(),C(X,null,[He,Qe,u("div",We,[(k(!0),C(X,null,Z(f.value,($,_)=>(k(),te(U,{key:_,class:"speed-card","body-style":{padding:"20px"}},{default:t(()=>[u("div",Ze,[u("span",el,"🔶 速度等级 "+R(_+1)+":",1),l(o,{modelValue:$.value,"onUpdate:modelValue":h=>$.value=h,modelModifiers:{number:!0},type:"number",step:"0.1",min:"0.0",max:"1.0",placeholder:"请输入速度",onInput:d,style:{width:"100px"}},null,8,["modelValue","onUpdate:modelValue"])])]),_:2},1024))),128))])],64)}}},al=u("br",null,null,-1),tl={key:0},ul={key:0},sl=u("br",null,null,-1),ol=u("br",null,null,-1),nl=u("br",null,null,-1),il={key:1},dl=u("br",null,null,-1),vl=u("br",null,null,-1),rl=u("br",null,null,-1),_l={key:2},ml=u("br",null,null,-1),cl=u("br",null,null,-1),hl={key:3},pl=u("br",null,null,-1),wl=u("br",null,null,-1),fl=u("br",null,null,-1),bl={key:4},xl=u("br",null,null,-1),me={__name:"IO",props:{wheel:{type:Array,required:!0}},emits:["myEvent"],setup(s,{emit:f}){const d=s,m=w(!1),M=w("子组件数据"),o=w("1"),U=w(!0),$=w(!1),_=w(!1),h=w(!1),c=w(!1),g=w("1"),e=w("1"),b=w("1"),v=w("1"),A=w(""),y=w("");f("myEvent",M.value);const O=()=>{if(d.wheel!==void 0)if(console.log("22222",d.wheel),d.wheel[0]===1||d.wheel[0]===2||d.wheel[0]===4)m.value=!0,o.value=d.wheel[0].toString(),E(),g.value=d.wheel[1].toString(),e.value=d.wheel[2].toString(),b.value=d.wheel[3].toString(),v.value=d.wheel[4].toString();else if(d.wheel[0]===3)m.value=!0,o.value=d.wheel[0].toString(),E(),g.value=d.wheel[1].toString(),e.value=d.wheel[2].toString(),b.value=d.wheel[3].toString();else if(d.wheel[0]===5){m.value=!0,o.value=d.wheel[0].toString(),E();const z=parseInt(d.wheel[1],10);y.value=isNaN(z)?"":z.toString(16),g.value=y.value.toString(),e.value=d.wheel[2].toString()}else d.wheel[0]===0&&(m.value=!1,E());else{if(d.wheel.value!==void 0)if(console.log("33333333",d.wheel.value),d.wheel.value[0]===1||d.wheel.value[0]===2||d.wheel.value[0]===4)m.value=!0,o.value=d.wheel.value[0].toString(),E(),g.value=d.wheel.value[1].toString(),e.value=d.wheel.value[2].toString(),b.value=d.wheel.value[3].toString(),v.value=d.wheel.value[4].toString();else if(d.wheel.value[0]===3)m.value=!0,o.value=d.wheel.value[0].toString(),E(),g.value=d.wheel.value[1].toString(),e.value=d.wheel.value[2].toString(),b.value=d.wheel.value[3].toString();else if(d.wheel.value[0]===5){m.value=!0,o.value=d.wheel.value[0].toString(),E();const z=parseInt(d.wheel.value[1],10);y.value=isNaN(z)?"":z.toString(16),g.value=y.value.toString(),e.value=d.wheel.value[2].toString()}else d.wheel.value[0]===0&&(m.value=!1,E());m.value=!1}},be=()=>{console.log("3333"),m.value||(d.wheel.value=[0,2,2,2,0]),i()},i=()=>{if(console.log("1111111"),!m.value)d.wheel.value=[0,2,2,2,0];else if(o.value==="1"||o.value==="2"||o.value==="4")d.wheel.value=[parseInt(o.value),parseInt(g.value),parseInt(e.value),parseInt(b.value),parseInt(v.value)];else if(o.value==="3")d.wheel.value=[parseInt(o.value),parseInt(g.value),parseInt(e.value),parseInt(b.value)];else if(o.value==="5"){const z=parseInt(g.value,16);A.value=isNaN(z)?"":z.toString(),d.wheel.value=[parseInt(o.value),parseInt(A.value),parseInt(e.value)]}},I=[{label:"CAN-POS",value:"1"},{label:"CAN-OPEN",value:"2"},{label:"本地IO",value:"3"},{label:"CAN-IO",value:"4"},{label:"GPIO",value:"5"}],T=[{label:"CAN1",value:"1"},{label:"CAN2",value:"2"},{label:"CAN3",value:"3"}],E=()=>{switch(o.value){case"1":U.value=!0,$.value=!1,_.value=!1,h.value=!1,c.value=!1,i();return;case"2":U.value=!1,$.value=!0,_.value=!1,h.value=!1,c.value=!1,i();return;case"3":U.value=!1,$.value=!1,_.value=!0,h.value=!1,c.value=!1,i();return;case"4":U.value=!1,$.value=!1,_.value=!1,h.value=!0,c.value=!1,i();return;case"5":U.value=!1,$.value=!1,_.value=!1,h.value=!1,c.value=!0,i();return}};O();let de=0;return Ue(q,()=>{const z=Date.now();z-de>=700&&(O(),de=z)}),(z,p)=>{const ae=we,N=Oe,V=ne,B=ie,Q=j;return k(),C("div",null,[l(ae,{modelValue:m.value,"onUpdate:modelValue":p[0]||(p[0]=n=>m.value=n),onChange:be},{default:t(()=>[r("启用:")]),_:1},8,["modelValue"]),al,m.value?(k(),C("div",tl,[(k(),C(X,null,Z(I,(n,Y)=>l(N,{key:Y,modelValue:o.value,"onUpdate:modelValue":p[1]||(p[1]=W=>o.value=W),label:n.value,onChange:E},{default:t(()=>[u("pre",null,R(n.label),1)]),_:2},1032,["modelValue","label"])),64)),U.value?(k(),C("div",ul,[r(" 远程模块连接到: "),(k(),C(X,null,Z(T,(n,Y)=>l(N,{key:Y,modelValue:g.value,"onUpdate:modelValue":p[2]||(p[2]=W=>g.value=W),label:n.value,onChange:E},{default:t(()=>[u("pre",null,R(n.label),1)]),_:2},1032,["modelValue","label"])),64)),sl,r(" CAN-POS模块编号: "),l(B,{modelValue:e.value,"onUpdate:modelValue":p[3]||(p[3]=n=>e.value=n),onChange:i},{default:t(()=>[l(V,{label:"0",value:"0"}),l(V,{label:"1",value:"1"}),l(V,{label:"2",value:"2"})]),_:1},8,["modelValue"]),ol,r(" 模块内输出点编号: "),l(B,{modelValue:b.value,"onUpdate:modelValue":p[4]||(p[4]=n=>b.value=n),onChange:i},{default:t(()=>[l(V,{label:"0",value:"0"}),l(V,{label:"1",value:"1"}),l(V,{label:"2",value:"2"})]),_:1},8,["modelValue"]),nl,r(" 信号极性: "),l(B,{modelValue:v.value,"onUpdate:modelValue":p[5]||(p[5]=n=>v.value=n),onChange:i},{default:t(()=>[l(V,{label:"输出高电平有效",value:"0"}),l(V,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):L("",!0),$.value?(k(),C("div",il,[r(" 远程模块连接到: "),(k(),C(X,null,Z(T,(n,Y)=>l(N,{key:Y,modelValue:g.value,"onUpdate:modelValue":p[6]||(p[6]=W=>g.value=W),label:n.value,onChange:E},{default:t(()=>[u("pre",null,R(n.label),1)]),_:2},1032,["modelValue","label"])),64)),dl,r(" CAN-OPEN模块编号: "),l(B,{modelValue:e.value,"onUpdate:modelValue":p[7]||(p[7]=n=>e.value=n),onChange:i},{default:t(()=>[l(V,{label:"0",value:"0"}),l(V,{label:"1",value:"1"}),l(V,{label:"2",value:"2"})]),_:1},8,["modelValue"]),vl,r(" 模块内输出点编号: "),l(B,{modelValue:b.value,"onUpdate:modelValue":p[8]||(p[8]=n=>b.value=n),onChange:i},{default:t(()=>[l(V,{label:"0",value:"0"}),l(V,{label:"1",value:"1"}),l(V,{label:"2",value:"2"})]),_:1},8,["modelValue"]),rl,r(" 信号极性: "),l(B,{modelValue:v.value,"onUpdate:modelValue":p[9]||(p[9]=n=>v.value=n),onChange:i},{default:t(()=>[l(V,{label:"输出高电平有效",value:"0"}),l(V,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):L("",!0),_.value?(k(),C("div",_l,[r(" 本地IO地址: "),l(Q,{modelValue:g.value,"onUpdate:modelValue":p[10]||(p[10]=n=>g.value=n),type:"number",onChange:i},null,8,["modelValue"]),ml,r(" 输出点对应位: "),l(B,{modelValue:e.value,"onUpdate:modelValue":p[11]||(p[11]=n=>e.value=n),onChange:i},{default:t(()=>[l(V,{label:"BIT1",value:"0"}),l(V,{label:"BIT2",value:"1"}),l(V,{label:"BIT3",value:"2"}),l(V,{label:"BIT4",value:"3"}),l(V,{label:"BIT5",value:"4"}),l(V,{label:"BIT6",value:"5"}),l(V,{label:"BIT7",value:"6"})]),_:1},8,["modelValue"]),cl,r(" 信号极性: "),l(B,{modelValue:b.value,"onUpdate:modelValue":p[12]||(p[12]=n=>b.value=n),onChange:i},{default:t(()=>[l(V,{label:"输出高电平有效",value:"0"}),l(V,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):L("",!0),h.value?(k(),C("div",hl,[r(" 远程模块连接到: "),(k(),C(X,null,Z(T,(n,Y)=>l(N,{key:Y,modelValue:g.value,"onUpdate:modelValue":p[13]||(p[13]=W=>g.value=W),label:n.value,onChange:E},{default:t(()=>[u("pre",null,R(n.label),1)]),_:2},1032,["modelValue","label"])),64)),pl,r(" CAN-IO模块编号: "),l(B,{modelValue:e.value,"onUpdate:modelValue":p[14]||(p[14]=n=>e.value=n),onChange:i},{default:t(()=>[l(V,{label:"0",value:"0"}),l(V,{label:"1",value:"1"}),l(V,{label:"2",value:"2"})]),_:1},8,["modelValue"]),wl,r(" 模块内输出点编号: "),l(B,{modelValue:b.value,"onUpdate:modelValue":p[15]||(p[15]=n=>b.value=n),onChange:i},{default:t(()=>[l(V,{label:"0",value:"0"}),l(V,{label:"1",value:"1"}),l(V,{label:"2",value:"2"})]),_:1},8,["modelValue"]),fl,r(" 信号极性: "),l(B,{modelValue:v.value,"onUpdate:modelValue":p[16]||(p[16]=n=>v.value=n),onChange:i},{default:t(()=>[l(V,{label:"输出高电平有效",value:"0"}),l(V,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):L("",!0),c.value?(k(),C("div",bl,[r(" 输入点对应位: "),l(Q,{modelValue:g.value,"onUpdate:modelValue":p[17]||(p[17]=n=>g.value=n),onChange:i},null,8,["modelValue"]),xl,r(" 信号极性: "),l(B,{modelValue:e.value,"onUpdate:modelValue":p[18]||(p[18]=n=>e.value=n),onChange:i},{default:t(()=>[l(V,{label:"输出高电平有效",value:"0"}),l(V,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):L("",!0)])):L("",!0)])}}},P=w(-1),K=w(-1);const fe=s=>(se("data-v-565f089d"),s=s(),oe(),s),gl={slot:"footer",class:"dialog-footer"},yl=fe(()=>u("br",null,null,-1)),Vl=fe(()=>u("h3",null,"安装方向:",-1)),Il={class:"table-container"},kl={class:"left-table"},$l=fe(()=>u("h3",null,"机械参数:",-1)),Cl={class:"right-table"},Ul=fe(()=>u("h3",null,"伺服参数:",-1)),Sl={slot:"footer",class:"dialog-footer"},Ml="驱动轮",Nl="过热检测",Tl={__name:"wheel",props:{wheel:{type:String,required:!0}},setup(s){w(["驱动内坐标X","驱动内坐标Y","单元距离(m)","电机减速比","最大转速rpm","码盘线数","速度","加速度","最大转角"]),w(["CAN端口号","CAN-OPEN编号"]);const f=w(!1);w(!1),w(!1),w(!1),w(!1);const d=w(!1),m=()=>{d.value=!1},M=()=>{q.value=!q.value,d.value=!0},o=()=>{f.value=!0},U=()=>{f.value=!1};return($,_)=>{const h=he,c=pe,g=ne,e=ie,b=j,v=ye,A=Ve;return k(),C("div",null,[l(h,{type:"primary",onClick:o},{default:t(()=>[r("驱动轮")]),_:1}),l(c,{title:Ml,modelValue:f.value,"onUpdate:modelValue":_[16]||(_[16]=y=>f.value=y),visible:f.value,width:"800px","close-on-click-modal":!1,class:"edit-data-dialog"},{default:t(()=>[u("div",null,[l(h,{onClick:M,type:"primary"},{default:t(()=>[r("过热检测")]),_:1}),l(c,{title:Nl,modelValue:d.value,"onUpdate:modelValue":_[1]||(_[1]=y=>d.value=y),visible:d.value,width:"600px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"40%"}},{default:t(()=>[u("div",null,[l(me,{wheel:s.wheel.wheel_check},null,8,["wheel"])]),u("div",gl,[l(h,{onClick:_[0]||(_[0]=y=>d.value=!1)},{default:t(()=>[r("取 消")]),_:1}),l(h,{onClick:m},{default:t(()=>[r("确定")]),_:1})])]),_:1},8,["modelValue","visible"]),r("  ")]),yl,u("div",null,[Vl,l(e,{modelValue:s.wheel.install_dir,"onUpdate:modelValue":_[2]||(_[2]=y=>s.wheel.install_dir=y)},{default:t(()=>[l(g,{label:"正向",value:0}),l(g,{label:"反向",value:1})]),_:1},8,["modelValue"])]),u("div",null,[u("div",Il,[u("div",kl,[$l,l(A,{ref:"form",model:s.wheel,"label-width":"120px"},{default:t(()=>[l(v,{label:"驱动内坐标X",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.wheel_x,"onUpdate:modelValue":_[3]||(_[3]=y=>s.wheel.wheel_x=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(v,{label:"驱动内坐标Y",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.wheel_y,"onUpdate:modelValue":_[4]||(_[4]=y=>s.wheel.wheel_y=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(v,{label:"车轮直径",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.axis.unit_dis,"onUpdate:modelValue":_[5]||(_[5]=y=>s.wheel.axis.unit_dis=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(v,{label:"电机减速比",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.axis.ratio,"onUpdate:modelValue":_[6]||(_[6]=y=>s.wheel.axis.ratio=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(v,{label:"码盘线束",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.axis.encoder,"onUpdate:modelValue":_[7]||(_[7]=y=>s.wheel.axis.encoder=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(v,{label:"最大转速",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.axis.max_rpm,"onUpdate:modelValue":_[8]||(_[8]=y=>s.wheel.axis.max_rpm=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(v,{label:"加速度",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.axis.acc_vel,"onUpdate:modelValue":_[9]||(_[9]=y=>s.wheel.axis.acc_vel=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),J(l(v,{label:"Target门限",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.axis.Target,"onUpdate:modelValue":_[10]||(_[10]=y=>s.wheel.axis.Target=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(P)===0||x(P)===1]])]),_:1},8,["model"])]),u("div",Cl,[Ul,l(A,{ref:"form",model:s.wheel,"label-width":"130px"},{default:t(()=>[J(l(v,{label:"CANOPEN端口号",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.servo.canport_id,"onUpdate:modelValue":_[11]||(_[11]=y=>s.wheel.servo.canport_id=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(P)===2||x(P)===3||x(P)===4||x(P)===5]]),J(l(v,{label:"CANPOS端口号",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.servo.can_id,"onUpdate:modelValue":_[12]||(_[12]=y=>s.wheel.servo.can_id=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(P)===0||x(P)===1]]),J(l(v,{label:"CANPOS编号",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.servo.canposunit_id,"onUpdate:modelValue":_[13]||(_[13]=y=>s.wheel.servo.canposunit_id=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(P)===0||x(P)===1]]),J(l(v,{label:"CANOPEN编号",style:{width:"90%"}},{default:t(()=>[l(b,{modelValue:s.wheel.servo.canopenunit_id,"onUpdate:modelValue":_[14]||(_[14]=y=>s.wheel.servo.canopenunit_id=y),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(P)===2||x(P)===3||x(P)===4||x(P)===5]])]),_:1},8,["model"])])])]),u("div",Sl,[l(h,{onClick:_[15]||(_[15]=y=>f.value=!1)},{default:t(()=>[r("取 消")]),_:1}),l(h,{onClick:U},{default:t(()=>[r("确定")]),_:1})])]),_:1},8,["modelValue","visible"])])}}},El=ue(Tl,[["__scopeId","data-v-565f089d"]]);const le=s=>(se("data-v-f7ec85d9"),s=s(),oe(),s),Al=le(()=>u("h3",null,"安装方向:",-1)),Ol={class:"table-container"},zl={class:"left-table"},Pl=le(()=>u("h3",null,"机械参数:",-1)),Kl={class:"right-table"},Bl=le(()=>u("h3",null,"伺服参数:",-1)),Rl=le(()=>u("h3",null,"舵绝对码盘:",-1)),Dl={key:0},Ll=le(()=>u("h3",null,"舵角校正:",-1)),Jl=le(()=>u("br",null,null,-1)),Fl={slot:"footer",class:"dialog-footer"},Yl="驱动轮",ql={__name:"steer",props:{steer:{type:String,required:!0}},setup(s){const f=w(!1);w(!1),w(!1),w(!1),w(!1),w(!1);const d=()=>{f.value=!0},m=()=>{f.value=!1};return(M,o)=>{const U=he,$=ne,_=ie,h=j,c=ye,g=Ve,e=we,b=pe;return k(),C("div",null,[l(U,{type:"primary",onClick:d},{default:t(()=>[r("转舵机构")]),_:1}),l(b,{title:Yl,modelValue:f.value,"onUpdate:modelValue":o[19]||(o[19]=v=>f.value=v),visible:f.value,width:"800px","close-on-click-modal":!1,class:"edit-data-dialog"},{default:t(()=>[u("div",null,[Al,l(_,{modelValue:s.steer.install_dir,"onUpdate:modelValue":o[0]||(o[0]=v=>s.steer.install_dir=v)},{default:t(()=>[l($,{label:"正向",value:0}),l($,{label:"反向",value:1})]),_:1},8,["modelValue"])]),u("div",null,[u("div",Ol,[u("div",zl,[Pl,l(g,{ref:"form",model:s.steer,"label-width":"120px"},{default:t(()=>[l(c,{label:"单元距离",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.axis.unit_dis,"onUpdate:modelValue":o[1]||(o[1]=v=>s.steer.axis.unit_dis=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(c,{label:"电机减速比",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.axis.ratio,"onUpdate:modelValue":o[2]||(o[2]=v=>s.steer.axis.ratio=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(c,{label:"码盘线束",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.axis.encoder,"onUpdate:modelValue":o[3]||(o[3]=v=>s.steer.axis.encoder=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(c,{label:"最大角度",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.axis.max_poserr_limit,"onUpdate:modelValue":o[4]||(o[4]=v=>s.steer.axis.max_poserr_limit=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(c,{label:"角加速度",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.axis.acc_vel,"onUpdate:modelValue":o[5]||(o[5]=v=>s.steer.axis.acc_vel=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(c,{label:"角速度",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.axis.vel,"onUpdate:modelValue":o[6]||(o[6]=v=>s.steer.axis.vel=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),J(l(c,{label:"Target门限",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.axis.Target,"onUpdate:modelValue":o[7]||(o[7]=v=>s.steer.axis.Target=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(K)===0||x(K)===1]])]),_:1},8,["model"])]),u("div",Kl,[Bl,l(g,{ref:"form",model:s.steer,"label-width":"130px"},{default:t(()=>[J(l(c,{label:"CANOPEN端口号",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.servo.canport_id,"onUpdate:modelValue":o[8]||(o[8]=v=>s.steer.servo.canport_id=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(K)===2||x(K)===3||x(K)===4||x(K)===5]]),J(l(c,{label:"CANPOS端口号",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.servo.can_id,"onUpdate:modelValue":o[9]||(o[9]=v=>s.steer.servo.can_id=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(K)===0||x(K)===1]]),J(l(c,{label:"CANPOS编号",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.servo.canposunit_id,"onUpdate:modelValue":o[10]||(o[10]=v=>s.steer.servo.canposunit_id=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(K)===0||x(K)===1]]),J(l(c,{label:"CANOPEN编号",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.servo.canopenunit_id,"onUpdate:modelValue":o[11]||(o[11]=v=>s.steer.servo.canopenunit_id=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1},512),[[F,x(K)===2||x(K)===3||x(K)===4||x(K)===5]])]),_:1},8,["model"])])]),Rl,l(e,{modelValue:s.steer.use_absolute_encoder,"onUpdate:modelValue":o[12]||(o[12]=v=>s.steer.use_absolute_encoder=v)},{default:t(()=>[r("启用舵绝对码盘")]),_:1},8,["modelValue"]),s.steer.use_absolute_encoder?(k(),C("div",Dl,[l(g,{ref:"form",model:s.steer,"label-width":"130px"},{default:t(()=>[l(c,{label:"码盘CAN端口号",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.absolute_encoder_canport_id,"onUpdate:modelValue":o[13]||(o[13]=v=>s.steer.absolute_encoder_canport_id=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(c,{label:"码盘模块编号",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.absolute_encoder_unit_id,"onUpdate:modelValue":o[14]||(o[14]=v=>s.steer.absolute_encoder_unit_id=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(c,{label:"码盘最大值",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.absolute_encoder_max,"onUpdate:modelValue":o[15]||(o[15]=v=>s.steer.absolute_encoder_max=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1}),l(c,{label:"零位码盘值",style:{width:"90%"}},{default:t(()=>[l(h,{modelValue:s.steer.absolute_encoder_zero,"onUpdate:modelValue":o[16]||(o[16]=v=>s.steer.absolute_encoder_zero=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])):L("",!0),Ll,Jl,l(g,{ref:"form",model:s.steer,"label-width":"130px"},{default:t(()=>[l(c,{label:"零位索引偏差",style:{width:"45%"}},{default:t(()=>[l(h,{modelValue:s.steer.home_offset,"onUpdate:modelValue":o[17]||(o[17]=v=>s.steer.home_offset=v),modelModifiers:{number:!0},type:"number"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),u("div",Fl,[l(U,{onClick:o[18]||(o[18]=v=>f.value=!1)},{default:t(()=>[r("取 消")]),_:1}),l(U,{onClick:m},{default:t(()=>[r("确定")]),_:1})])]),_:1},8,["modelValue","visible"])])}}},Xl=ue(ql,[["__scopeId","data-v-f7ec85d9"]]);const D=s=>(se("data-v-09f89711"),s=s(),oe(),s),Gl=D(()=>u("br",null,null,-1)),jl=D(()=>u("br",null,null,-1)),Hl=D(()=>u("br",null,null,-1)),Ql=D(()=>u("h3",null,"安装位置:",-1)),Wl=D(()=>u("br",null,null,-1)),Zl=D(()=>u("br",null,null,-1)),ea=D(()=>u("h3",null,"驱动类型:",-1)),la=D(()=>u("br",null,null,-1)),aa=D(()=>u("br",null,null,-1)),ta={style:{display:"flex","margin-left":"12%"}},ua={key:0},sa={key:1},oa=D(()=>u("br",null,null,-1)),na={slot:"footer",class:"dialog-footer"},ia={slot:"footer",class:"dialog-footer"},da={slot:"footer",class:"dialog-footer"},va=D(()=>u("br",null,null,-1)),ra=D(()=>u("br",null,null,-1)),_a={slot:"footer",class:"dialog-footer"},ma=D(()=>u("br",null,null,-1)),ca="驱动单元",ha={__name:"selectfive",setup(s){const f=w(!1),d=w(!1),m=w(!1),M=()=>{q.value=!q.value,f.value=!0},o=()=>{O(),f.value=!1},U=()=>{q.value=!q.value,d.value=!0},$=()=>{O(),d.value=!1},_=()=>{q.value=!q.value,m.value=!0},h=()=>{O(),m.value=!1},c=()=>{K.value=e.value.steer.servo_type},g=()=>{P.value=e.value.wheel.servo_type},e=w({name:"",install_x:0,install_y:0,use_wheel:!1,use_steer:!1,editingIndex:-1,drive_type:0,wheel:{install_dir:0,servo_type:0,wheel_x:0,wheel_y:0,axis:{unit_dis:0,ratio:0,encoder:0,acc_vel:0,vel:0,max_poserr_limit:0,max_rpm:0,Target:0},servo:{canport_id:0,canposunit_id:0,canopenunit_id:0,can_id:0},wheel_check:[0,2,2,2,0]},steer:{install_dir:0,servo_type:0,use_absolute_encoder:!1,absolute_encoder_canport_id:0,absolute_encoder_unit_id:0,absolute_encoder_max:16777216,absolute_encoder_zero:16777e3,home_offset:54,axis:{unit_dis:0,ratio:0,encoder:0,acc_vel:0,vel:0,max_poserr_limit:0,max_rpm:0,Target:0},servo:{canport_id:0,canposunit_id:0,canopenunit_id:0,can_id:0},unclockwise_limit_switch:[2,2,1,0,0],clockwise_limit_switch:[2,2,1,1,0],zero_limit_switch:[2,2,1,2,0]}}),b=w(!1),v=()=>{e.value.name="",e.value.install_x=0,e.value.install_y=0,e.value.use_wheel=!1,e.value.use_steer=!1,e.value.drive_type=0,e.value.steer.home_offset=54,e.value.steer.use_absolute_encoder=!1,e.value.steer.absolute_encoder_canport_id=0,e.value.steer.absolute_encoder_unit_id=0,e.value.steer.absolute_encoder_max=16777216,e.value.steer.absolute_encoder_zero=16777e3,e.value.steer.servo_type=0,e.value.steer.install_dir=0,e.value.steer.unclockwise_limit_switch=[2,2,1,0,0],e.value.steer.clockwise_limit_switch=[2,2,1,1,0],e.value.steer.zero_limit_switch=[2,2,1,2,0],e.value.steer.axis.unit_dis=6.28,e.value.steer.axis.encoder=2500,e.value.steer.axis.max_rpm=0,e.value.steer.axis.Target=0,e.value.steer.axis.max_poserr_limit=0,e.value.steer.axis.vel=1,e.value.steer.axis.acc_vel=.3,e.value.steer.axis.ratio=20,e.value.steer.servo.canport_id=0,e.value.steer.servo.canposunit_id=0,e.value.steer.servo.canopenunit_id=0,e.value.steer.servo.can_id=11,e.value.editingIndex=-1,e.value.wheel.wheel_check=[0,2,2,2,0],e.value.wheel.install_dir=0,e.value.wheel.wheel_x=0,e.value.wheel.wheel_y=0,e.value.wheel.servo_type=0,e.value.wheel.axis.unit_dis=0,e.value.wheel.axis.encoder=2500,e.value.wheel.axis.max_rpm=0,e.value.wheel.axis.Target=0,e.value.wheel.axis.max_poserr_limit=0,e.value.wheel.axis.vel=1,e.value.wheel.axis.acc_vel=.3,e.value.wheel.axis.ratio=20,e.value.wheel.servo.canport_id=0,e.value.wheel.servo.canposunit_id=0,e.value.wheel.servo.canopenunit_id=0,e.value.wheel.servo.can_id=11,console.log(a),b.value=!0},A=i=>{e.value.name=a.value[i].name,e.value.editingIndex=i,e.value.install_x=a.value[i].install_x,e.value.install_y=a.value[i].install_y,e.value.use_wheel=a.value[i].use_wheel,e.value.drive_type=a.value[i].drive_type,e.value.wheel.wheel_check=a.value[i].wheel.wheel_check,e.value.wheel.install_dir=a.value[i].wheel.install_dir,e.value.wheel.wheel_x=a.value[i].wheel.wheel_x,e.value.wheel.wheel_y=a.value[i].wheel.wheel_y,e.value.wheel.axis.unit_dis=a.value[i].wheel.axis.unit_dis,e.value.wheel.axis.encoder=a.value[i].wheel.axis.encoder,e.value.wheel.axis.max_rpm=a.value[i].wheel.axis.max_rpm,e.value.wheel.axis.Target=a.value[i].wheel.axis.Target,e.value.wheel.axis.max_poserr_limit=a.value[i].wheel.axis.max_poserr_limit,e.value.wheel.axis.vel=a.value[i].wheel.axis.vel,e.value.wheel.axis.acc_vel=a.value[i].wheel.axis.acc_vel,e.value.wheel.axis.ratio=a.value[i].wheel.axis.ratio,e.value.wheel.servo.canport_id=a.value[i].wheel.servo.canport_id,e.value.wheel.servo.canposunit_id=a.value[i].wheel.servo.canposunit_id,e.value.wheel.servo.canopenunit_id=a.value[i].wheel.servo.canopenunit_id,e.value.wheel.servo.can_id=a.value[i].wheel.servo.can_id,e.value.steer.axis.unit_dis=a.value[i].steer.axis.unit_dis,e.value.steer.axis.encoder=a.value[i].steer.axis.encoder,e.value.steer.axis.max_rpm=a.value[i].steer.axis.max_rpm,e.value.steer.axis.Target=a.value[i].steer.axis.Target,e.value.steer.axis.max_poserr_limit=a.value[i].steer.axis.max_poserr_limit,e.value.steer.axis.vel=a.value[i].steer.axis.vel,e.value.steer.axis.acc_vel=a.value[i].steer.axis.acc_vel,e.value.steer.axis.ratio=a.value[i].steer.axis.ratio,e.value.steer.servo.canport_id=a.value[i].steer.servo.canport_id,e.value.steer.servo.canposunit_id=a.value[i].steer.servo.canposunit_id,e.value.steer.servo.canopenunit_id=a.value[i].steer.servo.canopenunit_id,e.value.steer.servo.can_id=a.value[i].steer.servo.can_id,e.value.wheel.servo_type=a.value[i].wheel.servo_type,e.value.use_steer=a.value[i].use_steer,e.value.steer.home_offset=a.value[i].steer.home_offset,e.value.steer.use_absolute_encoder=a.value[i].steer.use_absolute_encoder,e.value.steer.absolute_encoder_canport_id=a.value[i].steer.absolute_encoder_canport_id,e.value.steer.absolute_encoder_unit_id=a.value[i].steer.absolute_encoder_unit_id,e.value.steer.absolute_encoder_max=a.value[i].steer.absolute_encoder_max,e.value.steer.absolute_encoder_zero=a.value[i].steer.absolute_encoder_zero,e.value.steer.servo_type=a.value[i].steer.servo_type,e.value.steer.install_dir=a.value[i].steer.install_dir,e.value.steer.unclockwise_limit_switch=a.value[i].steer.unclockwise_limit_switch,console.log("333333,",a.value[i].steer.unclockwise_limit_switch),console.log("2222222,",e.value.steer.unclockwise_limit_switch),e.value.steer.clockwise_limit_switch=a.value[i].steer.clockwise_limit_switch,e.value.steer.zero_limit_switch=a.value[i].steer.zero_limit_switch,P.value=e.value.wheel.servo_type,K.value=e.value.steer.servo_type,console.log(a),b.value=!0},y=()=>{if(e.value.name){if(e.value.editingIndex!==-1)a.value[e.value.editingIndex].name=e.value.name,a.value[e.value.editingIndex].install_x=e.value.install_x,a.value[e.value.editingIndex].install_y=e.value.install_y,a.value[e.value.editingIndex].use_wheel=e.value.use_wheel,a.value[e.value.editingIndex].use_steer=e.value.use_steer,a.value[e.value.editingIndex].drive_type=e.value.drive_type,a.value[e.value.editingIndex].wheel.install_dir=e.value.wheel.install_dir,a.value[e.value.editingIndex].wheel.wheel_x=e.value.wheel.wheel_x,a.value[e.value.editingIndex].wheel.wheel_y=e.value.wheel.wheel_y,a.value[e.value.editingIndex].wheel.axis.unit_dis=e.value.wheel.axis.unit_dis,a.value[e.value.editingIndex].wheel.axis.encoder=e.value.wheel.axis.encoder,a.value[e.value.editingIndex].wheel.axis.max_rpm=e.value.wheel.axis.max_rpm,a.value[e.value.editingIndex].wheel.axis.Target=e.value.wheel.axis.Target,a.value[e.value.editingIndex].wheel.axis.max_poserr_limit=e.value.wheel.axis.max_poserr_limit,a.value[e.value.editingIndex].wheel.axis.vel=e.value.wheel.axis.vel,a.value[e.value.editingIndex].wheel.axis.acc_vel=e.value.wheel.axis.acc_vel,a.value[e.value.editingIndex].wheel.axis.ratio=e.value.wheel.axis.ratio,a.value[e.value.editingIndex].wheel.servo.canport_id=e.value.wheel.servo.canport_id,a.value[e.value.editingIndex].wheel.servo.canposunit_id=e.value.wheel.servo.canposunit_id,a.value[e.value.editingIndex].wheel.servo.canopenunit_id=e.value.wheel.servo.canopenunit_id,a.value[e.value.editingIndex].wheel.servo.can_id=e.value.wheel.servo.can_id,a.value[e.value.editingIndex].steer.axis.unit_dis=e.value.steer.axis.unit_dis,a.value[e.value.editingIndex].steer.axis.encoder=e.value.steer.axis.encoder,a.value[e.value.editingIndex].steer.axis.max_rpm=e.value.steer.axis.max_rpm,a.value[e.value.editingIndex].steer.axis.Target=e.value.steer.axis.Target,a.value[e.value.editingIndex].steer.axis.max_poserr_limit=e.value.steer.axis.max_poserr_limit,a.value[e.value.editingIndex].steer.axis.vel=e.value.steer.axis.vel,a.value[e.value.editingIndex].steer.axis.acc_vel=e.value.steer.axis.acc_vel,a.value[e.value.editingIndex].steer.axis.ratio=e.value.steer.axis.ratio,a.value[e.value.editingIndex].steer.servo.canport_id=e.value.steer.servo.canport_id,a.value[e.value.editingIndex].steer.servo.canposunit_id=e.value.steer.servo.canposunit_id,a.value[e.value.editingIndex].steer.servo.canopenunit_id=e.value.steer.servo.canopenunit_id,a.value[e.value.editingIndex].steer.servo.can_id=e.value.steer.servo.can_id,a.value[e.value.editingIndex].wheel.servo_type=e.value.wheel.servo_type,e.value.wheel.wheel_check.value!==void 0&&(a.value[e.value.editingIndex].wheel.wheel_check=e.value.wheel.wheel_check.value),e.value.steer.unclockwise_limit_switch.value!==void 0&&(a.value[e.value.editingIndex].steer.unclockwise_limit_switch=e.value.steer.unclockwise_limit_switch.value,console.log("111111111",a.value[e.value.editingIndex].steer.unclockwise_limit_switch)),e.value.steer.clockwise_limit_switch.value!==void 0&&(a.value[e.value.editingIndex].steer.clockwise_limit_switch=e.value.steer.clockwise_limit_switch.value),e.value.steer.zero_limit_switch.value!==void 0&&(a.value[e.value.editingIndex].steer.zero_limit_switch=e.value.steer.zero_limit_switch.value),a.value[e.value.editingIndex].steer.home_offset=e.value.steer.home_offset,a.value[e.value.editingIndex].steer.use_absolute_encoder=e.value.steer.use_absolute_encoder,a.value[e.value.editingIndex].steer.absolute_encoder_canport_id=e.value.steer.absolute_encoder_canport_id,a.value[e.value.editingIndex].steer.absolute_encoder_unit_id=e.value.steer.absolute_encoder_unit_id,a.value[e.value.editingIndex].steer.absolute_encoder_max=e.value.steer.absolute_encoder_max,a.value[e.value.editingIndex].steer.absolute_encoder_zero=e.value.steer.absolute_encoder_zero,a.value[e.value.editingIndex].steer.servo_type=e.value.steer.servo_type,a.value[e.value.editingIndex].steer.install_dir=e.value.steer.install_dir,S.value.Kinematic.drive=a,console.log(a);else{e.value.wheel.wheel_check.value!==void 0&&(e.value.wheel.wheel_check=e.value.wheel.wheel_check.value),e.value.steer.unclockwise_limit_switch.value!==void 0&&(e.value.steer.unclockwise_limit_switch=e.value.steer.unclockwise_limit_switch.value),e.value.steer.clockwise_limit_switch.value!==void 0&&(e.value.steer.clockwise_limit_switch=e.value.steer.clockwise_limit_switch.value),e.value.steer.zero_limit_switch.value!==void 0&&(e.value.steer.zero_limit_switch=e.value.steer.zero_limit_switch.value);const i={...e.value};a.value.push(JSON.parse(JSON.stringify(i))),S.value.Kinematic.drive=a,console.log(a)}b.value=!1}else Ee.error("请填写完整数据")},O=()=>{e.value.editingIndex!==-1?(a.value[e.value.editingIndex].name=e.value.name,a.value[e.value.editingIndex].install_x=e.value.install_x,a.value[e.value.editingIndex].install_y=e.value.install_y,a.value[e.value.editingIndex].use_wheel=e.value.use_wheel,a.value[e.value.editingIndex].use_steer=e.value.use_steer,a.value[e.value.editingIndex].drive_type=e.value.drive_type,a.value[e.value.editingIndex].wheel.install_dir=e.value.wheel.install_dir,a.value[e.value.editingIndex].wheel.wheel_x=e.value.wheel.wheel_x,a.value[e.value.editingIndex].wheel.wheel_y=e.value.wheel.wheel_y,a.value[e.value.editingIndex].wheel.axis.unit_dis=e.value.wheel.axis.unit_dis,a.value[e.value.editingIndex].wheel.axis.encoder=e.value.wheel.axis.encoder,a.value[e.value.editingIndex].wheel.axis.max_rpm=e.value.wheel.axis.max_rpm,a.value[e.value.editingIndex].wheel.axis.Target=e.value.wheel.axis.Target,a.value[e.value.editingIndex].wheel.axis.max_poserr_limit=e.value.wheel.axis.max_poserr_limit,a.value[e.value.editingIndex].wheel.axis.vel=e.value.wheel.axis.vel,a.value[e.value.editingIndex].wheel.axis.acc_vel=e.value.wheel.axis.acc_vel,a.value[e.value.editingIndex].wheel.axis.ratio=e.value.wheel.axis.ratio,a.value[e.value.editingIndex].wheel.servo.canport_id=e.value.wheel.servo.canport_id,a.value[e.value.editingIndex].wheel.servo.canposunit_id=e.value.wheel.servo.canposunit_id,a.value[e.value.editingIndex].wheel.servo.canopenunit_id=e.value.wheel.servo.canopenunit_id,a.value[e.value.editingIndex].wheel.servo.can_id=e.value.wheel.servo.can_id,a.value[e.value.editingIndex].steer.axis.unit_dis=e.value.steer.axis.unit_dis,a.value[e.value.editingIndex].steer.axis.encoder=e.value.steer.axis.encoder,a.value[e.value.editingIndex].steer.axis.max_rpm=e.value.steer.axis.max_rpm,a.value[e.value.editingIndex].steer.axis.Target=e.value.steer.axis.Target,a.value[e.value.editingIndex].steer.axis.max_poserr_limit=e.value.steer.axis.max_poserr_limit,a.value[e.value.editingIndex].steer.axis.vel=e.value.steer.axis.vel,a.value[e.value.editingIndex].steer.axis.acc_vel=e.value.steer.axis.acc_vel,a.value[e.value.editingIndex].steer.axis.ratio=e.value.steer.axis.ratio,a.value[e.value.editingIndex].steer.servo.canport_id=e.value.steer.servo.canport_id,a.value[e.value.editingIndex].steer.servo.canposunit_id=e.value.steer.servo.canposunit_id,a.value[e.value.editingIndex].steer.servo.canopenunit_id=e.value.steer.servo.canopenunit_id,a.value[e.value.editingIndex].steer.servo.can_id=e.value.steer.servo.can_id,a.value[e.value.editingIndex].wheel.servo_type=e.value.wheel.servo_type,e.value.wheel.wheel_check.value!==void 0&&(a.value[e.value.editingIndex].wheel.wheel_check=e.value.wheel.wheel_check.value),e.value.steer.unclockwise_limit_switch.value!==void 0&&(a.value[e.value.editingIndex].steer.unclockwise_limit_switch=e.value.steer.unclockwise_limit_switch.value,console.log("111111111",a.value[e.value.editingIndex].steer.unclockwise_limit_switch)),e.value.steer.clockwise_limit_switch.value!==void 0&&(a.value[e.value.editingIndex].steer.clockwise_limit_switch=e.value.steer.clockwise_limit_switch.value),e.value.steer.zero_limit_switch.value!==void 0&&(a.value[e.value.editingIndex].steer.zero_limit_switch=e.value.steer.zero_limit_switch.value),a.value[e.value.editingIndex].steer.home_offset=e.value.steer.home_offset,a.value[e.value.editingIndex].steer.use_absolute_encoder=e.value.steer.use_absolute_encoder,a.value[e.value.editingIndex].steer.absolute_encoder_canport_id=e.value.steer.absolute_encoder_canport_id,a.value[e.value.editingIndex].steer.absolute_encoder_unit_id=e.value.steer.absolute_encoder_unit_id,a.value[e.value.editingIndex].steer.absolute_encoder_max=e.value.steer.absolute_encoder_max,a.value[e.value.editingIndex].steer.absolute_encoder_zero=e.value.steer.absolute_encoder_zero,a.value[e.value.editingIndex].steer.servo_type=e.value.steer.servo_type,a.value[e.value.editingIndex].steer.install_dir=e.value.steer.install_dir):(e.value.wheel.wheel_check.value!==void 0&&(e.value.wheel.wheel_check=e.value.wheel.wheel_check.value),e.value.steer.unclockwise_limit_switch.value!==void 0&&(e.value.steer.unclockwise_limit_switch=e.value.steer.unclockwise_limit_switch.value),e.value.steer.clockwise_limit_switch.value!==void 0&&(e.value.steer.clockwise_limit_switch=e.value.steer.clockwise_limit_switch.value),e.value.steer.zero_limit_switch.value!==void 0&&(e.value.steer.zero_limit_switch=e.value.steer.zero_limit_switch.value)),S.value.Kinematic.drive=a},be=i=>{console.log("11111",i),a.value.splice(i,1)};return(i,I)=>{const T=he,E=Ne,de=Te,z=j,p=ye,ae=Ve,N=ne,V=ie,B=we,Q=pe;return k(),C("div",null,[l(de,{data:x(a),style:{width:"100%"},class:"tableDataCrtl"},{default:t(()=>[l(E,{prop:"name",label:"名称"},{default:t(n=>[l(T,{type:"text",onClick:Y=>A(n.$index)},{default:t(()=>[r(R(x(a)[n.$index].name),1)]),_:2},1032,["onClick"])]),_:1}),l(E,{label:"驱动类型"},{default:t(n=>[r(R(x(S).Kinematic.drive[n.$index].drive_type==0?"普通驱动类型":"差速驱动类型"),1)]),_:1}),l(E,{label:"车体坐标X(m)"},{default:t(n=>[r(R(x(S).Kinematic.drive[n.$index].install_x),1)]),_:1}),l(E,{label:"车体坐标Y(m)"},{default:t(n=>[r(R(x(S).Kinematic.drive[n.$index].install_y),1)]),_:1}),l(E,{label:"操作"},{default:t(n=>[l(T,{type:"danger",onClick:Y=>be(n.$index)},{default:t(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),Gl,l(T,{type:"primary",onClick:v},{default:t(()=>[r("添加驱动单元")]),_:1}),l(Q,{title:ca,modelValue:b.value,"onUpdate:modelValue":I[15]||(I[15]=n=>b.value=n),visible:b.value,width:"900px","close-on-click-modal":!1,class:"edit-data-dialog"},{default:t(()=>[l(_e,{height:"100%",showUpBt:!0},{default:t(()=>[jl,l(ae,{ref:"form",model:e.value,"label-width":"80px"},{default:t(()=>[l(p,{label:"名称"},{default:t(()=>[l(z,{modelValue:e.value.name,"onUpdate:modelValue":I[0]||(I[0]=n=>e.value.name=n),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),l(ae,{ref:"form",model:e.value,"label-width":"200px"},{default:t(()=>[Hl,Ql,Wl,l(p,{label:"车体坐标系坐标X(m):"},{default:t(()=>[l(z,{modelValue:e.value.install_x,"onUpdate:modelValue":I[1]||(I[1]=n=>e.value.install_x=n),modelModifiers:{number:!0},type:"number",onChange:i.AGVpos},null,8,["modelValue","onChange"])]),_:1}),l(p,{label:"车体坐标系坐标Y(m):"},{default:t(()=>[l(z,{modelValue:e.value.install_y,"onUpdate:modelValue":I[2]||(I[2]=n=>e.value.install_y=n),modelModifiers:{number:!0},type:"number",onChange:i.AGVpos},null,8,["modelValue","onChange"])]),_:1})]),_:1},8,["model"]),Zl,l(ae,{"label-width":"120px"},{default:t(()=>[ea,la,l(p,{label:"类型:"},{default:t(()=>[l(V,{modelValue:e.value.drive_type,"onUpdate:modelValue":I[3]||(I[3]=n=>e.value.drive_type=n),placeholder:"请选择"},{default:t(()=>[l(N,{label:"普通驱动类型",value:0}),l(N,{label:"差速驱动类型",value:1})]),_:1},8,["modelValue"]),aa]),_:1}),l(p,{label:"安装有驱动轮:"},{default:t(()=>[l(B,{modelValue:e.value.use_wheel,"onUpdate:modelValue":I[4]||(I[4]=n=>e.value.use_wheel=n),onChange:g},{default:t(()=>[r("      ")]),_:1},8,["modelValue"]),r(" 驱动伺服类型   "),l(V,{modelValue:e.value.wheel.servo_type,"onUpdate:modelValue":I[5]||(I[5]=n=>e.value.wheel.servo_type=n),placeholder:"请选择",disabled:!e.value.use_wheel,onChange:g},{default:t(()=>[l(N,{label:"普通MCU",value:0}),l(N,{label:"差速MCU",value:1}),l(N,{label:"Elmo伺服",value:2}),l(N,{label:"步科伺服",value:3}),l(N,{label:"Motec伺服",value:4}),l(N,{label:"AMC伺服",value:5})]),_:1},8,["modelValue","disabled"])]),_:1}),l(p,{label:"安装有转舵机构:"},{default:t(()=>[l(B,{modelValue:e.value.use_steer,"onUpdate:modelValue":I[6]||(I[6]=n=>e.value.use_steer=n),onChange:c},{default:t(()=>[r("      ")]),_:1},8,["modelValue"]),r(" 驱动伺服类型   "),l(V,{modelValue:e.value.steer.servo_type,"onUpdate:modelValue":I[7]||(I[7]=n=>e.value.steer.servo_type=n),placeholder:"请选择",disabled:!e.value.use_steer,onChange:c},{default:t(()=>[l(N,{label:"普通MCU",value:0}),l(N,{label:"差速MCU",value:1}),l(N,{label:"Elmo伺服",value:2}),l(N,{label:"步科伺服",value:3}),l(N,{label:"Motec伺服",value:4}),l(N,{label:"AMC伺服",value:5})]),_:1},8,["modelValue","disabled"])]),_:1}),u("div",ta,[e.value.use_wheel?(k(),C("div",ua,[l(El,{wheel:e.value.wheel,onChange:O},null,8,["wheel"])])):L("",!0),r("      "),e.value.use_steer?(k(),C("div",sa,[l(Xl,{steer:e.value.steer,onChange:O},null,8,["steer"]),oa,l(T,{onClick:M,type:"primary"},{default:t(()=>[r("限位开关1")]),_:1}),l(Q,{title:"限位开关1",modelValue:f.value,"onUpdate:modelValue":I[9]||(I[9]=n=>f.value=n),visible:f.value,width:"600px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"40%"}},{default:t(()=>[u("div",null,[l(me,{wheel:e.value.steer.unclockwise_limit_switch},null,8,["wheel"])]),u("div",na,[l(T,{onClick:I[8]||(I[8]=n=>f.value=!1)},{default:t(()=>[r("取 消")]),_:1}),l(T,{onClick:o},{default:t(()=>[r("确定")]),_:1})])]),_:1},8,["modelValue","visible"]),r("  "),l(T,{onClick:U,type:"primary"},{default:t(()=>[r("限位开关2")]),_:1}),l(Q,{title:"限位开关2",modelValue:d.value,"onUpdate:modelValue":I[11]||(I[11]=n=>d.value=n),visible:d.value,width:"600px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"40%"}},{default:t(()=>[u("div",null,[l(me,{wheel:e.value.steer.clockwise_limit_switch},null,8,["wheel"])]),u("div",ia,[l(T,{onClick:I[10]||(I[10]=n=>d.value=!1)},{default:t(()=>[r("取 消")]),_:1}),l(T,{onClick:$},{default:t(()=>[r("确定")]),_:1})])]),_:1},8,["modelValue","visible"]),r("  "),l(T,{onClick:_,type:"primary"},{default:t(()=>[r("零位开关")]),_:1}),l(Q,{title:"零位开关",modelValue:m.value,"onUpdate:modelValue":I[13]||(I[13]=n=>m.value=n),visible:m.value,width:"600px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"40%"}},{default:t(()=>[u("div",null,[l(me,{wheel:e.value.steer.zero_limit_switch},null,8,["wheel"])]),u("div",da,[l(T,{onClick:I[12]||(I[12]=n=>m.value=!1)},{default:t(()=>[r("取 消")]),_:1}),l(T,{onClick:h},{default:t(()=>[r("确定")]),_:1})])]),_:1},8,["modelValue","visible"]),r(" "),va])):L("",!0)])]),_:1}),ra,u("div",_a,[l(T,{onClick:I[14]||(I[14]=n=>b.value=!1),style:{"margin-left":"75%"}},{default:t(()=>[r("取 消")]),_:1}),l(T,{type:"primary",onClick:y},{default:t(()=>[r("确定")]),_:1})]),ma]),_:1})]),_:1},8,["modelValue","visible"])])}}},pa=ue(ha,[["__scopeId","data-v-09f89711"]]);const ee=s=>(se("data-v-836bf7ea"),s=s(),oe(),s),wa={style:{display:"flex",gap:"20px","flex-wrap":"nowrap"}},fa=ee(()=>u("h3",null,"设置延时时间",-1)),ba=ee(()=>u("h3",null,"使能前延时时间",-1)),xa=ee(()=>u("span",null,"前延时时间(ms):",-1)),ga=ee(()=>u("h3",null,"给定前延时时间",-1)),ya=ee(()=>u("span",null,"给定前延时时间(ms):",-1)),Va=ee(()=>u("br",null,null,-1)),Ia=ee(()=>u("div",null,null,-1)),ka={__name:"Kinematic",setup(s){const f=w(!0),d=w(!1),m=w(!1),M=w(!1),o=w(!1),U=()=>{G.value?(S.value.Kinematic.delay.need_delay_time=!0,S.value.Kinematic.delay.servoenable_delay_time=parseInt(ve.value),S.value.Kinematic.delay.servospeed_delay_time=parseInt(re.value)):(S.value.Kinematic.delay.need_delay_time=!1,S.value.Kinematic.delay.servoenable_delay_time=200,S.value.Kinematic.delay.servospeed_delay_time=200)};return Ue(Ce,()=>{switch(Ce.value){case"1":f.value=!0,d.value=!1,m.value=!1,M.value=!1,o.value=!1,S.value.Kinematic.type=1;return;case"2":f.value=!1,d.value=!0,m.value=!1,M.value=!1,o.value=!1,S.value.Kinematic.type=2;return;case"3":f.value=!1,d.value=!1,m.value=!0,M.value=!1,o.value=!1,S.value.Kinematic.type=3;return;case"4":f.value=!1,d.value=!1,m.value=!1,M.value=!0,o.value=!1,S.value.Kinematic.type=4;return;case"5":f.value=!1,d.value=!1,m.value=!1,M.value=!1,o.value=!0,S.value.Kinematic.type=5;return}}),(_,h)=>{const c=Se,g=we,e=ge,b=j,v=Me;return k(),C("div",null,[l(v,null,{default:t(()=>[l(c,{label:"车体"},{default:t(()=>[l(pa)]),_:1}),l(c,{label:"伺服延时"},{default:t(()=>[u("div",wa,[l(e,{class:"card",style:{"margin-bottom":"10px"}},{default:t(()=>[fa,l(g,{modelValue:x(G),"onUpdate:modelValue":h[0]||(h[0]=A=>xe(G)?G.value=A:null),onChange:U},{default:t(()=>[r(" 轮或舵因伺服响应慢需要设置延时时间 ")]),_:1},8,["modelValue"])]),_:1}),x(G)?(k(),te(e,{key:0,class:"card",style:{"margin-bottom":"10px"}},{default:t(()=>[ba,xa,l(b,{modelValue:x(ve),"onUpdate:modelValue":h[1]||(h[1]=A=>xe(ve)?ve.value=A:null),disabled:!x(G),type:"number",style:{width:"10vw"},onChange:U},null,8,["modelValue","disabled"])]),_:1})):L("",!0),x(G)?(k(),te(e,{key:1,class:"card"},{default:t(()=>[ga,ya,l(b,{modelValue:x(re),"onUpdate:modelValue":h[2]||(h[2]=A=>xe(re)?re.value=A:null),disabled:!x(G),type:"number",style:{width:"10vw"},onChange:U},null,8,["modelValue","disabled"])]),_:1})):L("",!0)])]),_:1})]),_:1}),Va,Ia])}}},$a=ue(ka,[["__scopeId","data-v-836bf7ea"]]);const H=s=>(se("data-v-e4d5f034"),s=s(),oe(),s),Ca={class:"page-container main-view"},Ua={class:"table-box content-container page-content-box",style:{"background-image":"linear-gradient(to bottom right, #d0dcdc95, #d5eedf17)"}},Sa={class:"left"},Ma=H(()=>u("hr",{class:"hengxian"},null,-1)),Na={class:"left"},Ta=H(()=>u("h2",null,"⚠️ 驱动模型：",-1)),Ea=H(()=>u("hr",{class:"hengxian2"},null,-1)),Aa=H(()=>u("h3",null,"⚠️ 车体模型",-1)),Oa={key:0},za=H(()=>u("hr",{class:"hengxian3"},null,-1)),Pa=H(()=>u("h3",null,"⚠️ 运行参数",-1)),Ka=H(()=>u("br",null,null,-1)),Ba=H(()=>u("hr",{class:"hengxian2"},null,-1)),Ra={__name:"wheelmode",setup(s){const f=w(!1),d=()=>{f.value=!0},m=w(!1);w(!0),w(!0);const M=w(!0),o=ce(()=>JSON.stringify(S.value,null,2)),U=()=>{m.value=!0},$=()=>{router.push("/main/param/index")},_=()=>{router.push("/main/third")};return(h,c)=>{const g=he,e=pe,b=ne,v=ie,A=Se,y=Me;return k(),C("div",null,[u("div",Ca,[u("div",Ua,[l(_e,{height:"100%",showUpBt:!0},{default:t(()=>[u("div",Sa,[l(g,{type:"info",onClick:d},{default:t(()=>[r(" 查看设备 ")]),_:1}),l(e,{modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=O=>f.value=O),title:"设备总览",visible:f.value,width:"900px",onClose:c[1]||(c[1]=O=>f.value=!1)},{default:t(()=>[l(_e,{height:"100%",showUpBt:!0},{default:t(()=>[l(ze)]),_:1})]),_:1},8,["modelValue","visible"]),r("   "),l(g,{type:"info",onClick:U},{default:t(()=>[r(" 查看 ")]),_:1}),l(e,{modelValue:m.value,"onUpdate:modelValue":c[2]||(c[2]=O=>m.value=O),title:"数据",visible:m.value,onClose:c[3]||(c[3]=O=>m.value=!1)},{default:t(()=>[l(_e,{height:"100%",showUpBt:!0},{default:t(()=>[u("pre",null,R(o.value),1)]),_:1})]),_:1},8,["modelValue","visible"]),r("   "),l(g,{type:"primary",onClick:$},{default:t(()=>[r("上一步")]),_:1}),l(g,{type:"primary",onClick:_},{default:t(()=>[r("下一步")]),_:1})]),Ma,u("div",Na,[Ta,r(" 配置车体驱动模型  车型: "),l(v,{modelValue:x(S).car_type,"onUpdate:modelValue":c[4]||(c[4]=O=>x(S).car_type=O)},{default:t(()=>[l(b,{label:"货架车",value:0}),l(b,{label:"V型槽",value:1})]),_:1},8,["modelValue"]),Ea,Aa,M.value?(k(),C("div",Oa,[l($a)])):L("",!0),za,Pa,Ka,l(y,null,{default:t(()=>[l(A,{label:"公共参数"},{default:t(()=>[l(je)]),_:1}),l(A,{label:"手动参数"},{default:t(()=>[l(Ge)]),_:1}),l(A,{label:"自动参数"},{default:t(()=>[l(ll)]),_:1})]),_:1})]),Ba]),_:1})])])])}}},ht=ue(Ra,[["__scopeId","data-v-e4d5f034"]]);export{ht as default};
