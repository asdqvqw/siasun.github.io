import{aV as c,aK as q,a_ as z,o as F,c as P,b as h,f as V,m as f,bc as R,bl as U,F as $,a as w,E as K}from"./index-cd06ea62.js";import{g as L,i as X}from"./index-c13506ae.js";import{d as Y}from"./sharedata-98d2d3a0.js";const G=w("br",null,null,-1),J=w("div",{id:"chart-container"},null,-1),at={__name:"bbb_Aqw",setup(Q){let y=c(""),s=0;const E=c(""),N=c("");let o=[];const _=c(0),S=c(100),A=()=>{s>0&&(s--,x())},B=()=>{s<o[0].StatisticsData.length-1&&(s++,x())},v=()=>{const d=L(document.getElementById("chart-container")),t=Math.max(0,Math.min(_.value,100)),e=Math.max(0,Math.min(S.value,100)),a={dataZoom:[{show:!1,type:"slider",start:t,end:e}]};d.setOption(a)},x=()=>{const d=document.getElementById("chart-container"),t=X(d),e=new Date(E.value),a=new Date(N.value);y.value=o[0].StatisticsData[s].name;const i=e&&a&&!isNaN(e.getTime())&&!isNaN(a.getTime());let m;if(i){const n=(e.getMonth()+1).toString().padStart(2,"0"),l=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),p=e.getMinutes().toString().padStart(2,"0"),g=n+l+r+p+"00000";console.log("Start Time String:",g);const b=(a.getMonth()+1).toString().padStart(2,"0"),Z=a.getDate().toString().padStart(2,"0"),k=a.getHours().toString().padStart(2,"0"),H=a.getMinutes().toString().padStart(2,"0"),I=b+Z+k+H+"99999";console.log("End Time String:",I),o.forEach(D=>{D.logDateTimea=D.logDateTime.substring(5).replace(/\D/g,"")}),console.log(o[1].logDateTime,o[1].logDateTimea);let O=parseInt(g),j=parseInt(I);m=o.filter(D=>{const M=D.logDateTimea;return M>=O&&M<=j})}else m=o;const u=m.map(n=>n.logDateTime),T=m.map(n=>n.StatisticsData[s].value),C={xAxis:{type:"category",data:u},yAxis:{type:"value"},series:[{type:"line",data:T}],tooltip:{trigger:"axis",formatter:n=>{const{name:l,value:r}=n[0];return`时间: ${l}<br/>取值: ${r}<br/>`}},dataZoom:[{show:!1,type:"slider"}]};t.on("dataZoom",({start:n,end:l})=>{const r=Math.round(n*(u.length-1)),p=Math.round(l*(u.length-1)),g=u.slice(r,p+1),b=T.slice(r,p+1);t.setOption({xAxis:{data:g},series:[{data:b}]})}),t.setOption(C),t.setOption({toolbox:{feature:{saveAsImage:{name:"chart",title:"保存图表",pixelRatio:2}}}})};return q(()=>{o=Y.parsedLogData_b,x()}),(d,t)=>{const e=z("n-button"),a=K;return F(),P($,null,[h(e,{class:"round-button",onClick:A},{default:V(()=>[f("＜")]),_:1}),f(" "+R(U(y))+" ",1),h(e,{class:"round-button",onClick:B},{default:V(()=>[f("＞")]),_:1}),G,h(a,{type:"number",modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=i=>_.value=i),onInput:v,min:0,style:{width:"50%"}},null,8,["modelValue"]),h(a,{type:"number",modelValue:S.value,"onUpdate:modelValue":t[1]||(t[1]=i=>S.value=i),onInput:v,max:100,style:{width:"50%"}},null,8,["modelValue"]),J],64)}}};export{at as default};
