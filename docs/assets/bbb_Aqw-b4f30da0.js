import{aV as m,aK as C,o as T,c as Z,b as h,f as I,m as u,bc as k,bl as O,F as j,a as V,l as $,E as q}from"./index-bf9c25ed.js";import{g as z,i as F}from"./index-c13506ae.js";import{d as P}from"./sharedata-0e1c6ce0.js";import"./three.module-b20bde78.js";const U=V("br",null,null,-1),K=V("div",{id:"chart-container"},null,-1),H={__name:"bbb_Aqw",setup(L){let D=m(""),s=0,i=null;const w=m(""),N=m("");let d=[];const f=m(0),g=m(100),B=()=>{s>0&&(s--,x())},E=()=>{s<d[0].StatisticsData.length-1&&(s++,x())},y=()=>{const p=z(document.getElementById("chart-container")),n=Math.max(0,Math.min(f.value,100)),r=Math.max(0,Math.min(g.value,100)),a={dataZoom:[{show:!1,type:"slider",start:n,end:r}]};p.setOption(a)},x=()=>{i&&i.dispose();const p=document.getElementById("chart-container");i=F(p);const n=new Date(w.value),r=new Date(N.value);if(d[0].StatisticsData[s]===void 0)return;D.value=d[0].StatisticsData[s].name,n&&r&&!isNaN(n.getTime())&&isNaN(r.getTime());let a;a=d;const l=a.map(e=>e.logDateTime),c=[];for(let e=0;e<a.length;e++){const o=a[e].StatisticsData[s].value.map(t=>t.value);for(let t=0;t<o.length;t++)c[t]||(c[t]=[]),c[t].push(o[t])}console.log("3333333333333",c);const M={xAxis:{type:"category",data:l},yAxis:{type:"value"},series:c.map((e,o)=>({type:"line",name:a[0].StatisticsData[s].value[o].name,data:e})),tooltip:{trigger:"axis",formatter:e=>{let o=`时间: ${e[0].name}<br/>`;for(let t=0;t<e.length;t++){const{seriesName:_,value:v}=e[t];o+=`${_}: ${v}<br/>`}return o}},dataZoom:[{show:!1,type:"slider"}]};i.on("dataZoom",({start:e,end:o})=>{const t=Math.round(e*(l.length-1)),_=Math.round(o*(l.length-1)),v=l.slice(t,_+1),S=c.map(b=>b.slice(t,_+1));i.setOption({xAxis:{data:v},series:c.map((b,A)=>({data:S[A]}))})}),i.setOption(M),i.setOption({toolbox:{feature:{saveAsImage:{name:"chartInstance",title:"保存图表",pixelRatio:2}}}})};return C(()=>{d=P.parsedLogData_b,x()}),(p,n)=>{const r=$,a=q;return T(),Z(j,null,[h(r,{onClick:B},{default:I(()=>[u("＜")]),_:1}),u(" "+k(O(D))+" ",1),h(r,{onClick:E},{default:I(()=>[u("＞")]),_:1}),u("    范围:"),h(a,{type:"number",modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=l=>f.value=l),onInput:y,min:0,style:{width:"30%"}},null,8,["modelValue"]),u(" 一"),h(a,{type:"number",modelValue:g.value,"onUpdate:modelValue":n[1]||(n[1]=l=>g.value=l),onInput:y,max:100,style:{width:"30%"}},null,8,["modelValue"]),U,K],64)}}};export{H as default};
