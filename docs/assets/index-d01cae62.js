import{e as kt,F as bt,C as wt,f as Je,B as ot,g as Te,I as xt,h as nt,i as Ye,D as Ce,W as St,b as It,S as Ct,P as Et,G as Nt,M as ue,j as We,k as Mt,d as Qe,L as Vt,V as Lt,a as $t,E as et,Q as tt,c as re}from"./three.module-f555cf6f.js";import{G as Ft,O as Tt}from"./GLTFLoader-66618623.js";import{aV as d,o as Y,c as H,a as f,b as e,f as o,m as V,bl as T,cx as st,cy as ve,cz as Kt,F as it,cw as O,cv as se,l as pe,_ as de,aK as Ke,aG as qt,r as te,cm as ke,bc as qe,bQ as At,cA as Pt,p as we,q as xe,ck as Ot,a0 as Dt,Q as B,E as zt,g as Ae,aC as Ee,e as Rt,bB as Ut,cl as jt}from"./index-5a02a582.js";import{p as l,N as P,a as Ne,f as Xe,b as Pe,r as fe,d as be,e as Ge,c as at}from"./commondata-ebeb798a.js";import{E as me}from"./el-dialog-b2cb2e5c.js";/* empty css                        *//* empty css                    */import"./el-tag-d38e9329.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-14405c0a.js";import"./el-scrollbar-f84df57f.js";import{E as ut}from"./el-button-group-3de0cc31.js";/* empty css                */import{E as Jt}from"./el-switch-9ebcdaf0.js";/* empty css                */import"./el-form-item-4ed993c7.js";import{E as Bt,a as Yt}from"./el-select-4ab05db7.js";import{E as rt,a as dt}from"./index-47868e7b.js";import{a as Xt,E as Gt}from"./index-7da9e489.js";import{a as Zt,b as Ht}from"./index-61715032.js";import{_ as Ze}from"./DefinScrollbar-4a31cea8.js";import{E as _e,a as ye}from"./index-2d5070ff.js";import"./index-4f765bf2.js";import"./browser-ccd3dc4b.js";import"./strings-a4654d41.js";import"./debounce-50d2dbad.js";import"./isEqual-b3bf3dc1.js";import"./Uint8Array-4d1929d4.js";import"./initCloneObject-e81f77d6.js";/* empty css                                                                       */const Wt={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},Qt={style:{"margin-left":"10%",width:"50%"}},ea=f("h4",null,"五米测试",-1),ta=f("br",null,null,-1),aa={style:{width:"50%"}},la=f("h4",null,"手动任务",-1),oa=f("br",null,null,-1),na={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},sa=f("br",null,null,-1),ia=f("br",null,null,-1),ua={style:{width:"100%","margin-top":"2%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},ra={style:{"margin-left":"10%",width:"50%"}},da=f("h4",null,"设备动作",-1),ca=f("br",null,null,-1),va=f("br",null,null,-1),fa=f("br",null,null,-1),pa={style:{"margin-left":"-7.5%"}},ma={style:{width:"50%"}},_a=f("h4",null,"手控类型",-1),ya=f("br",null,null,-1),ga={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},ha={__name:"manualboxtwo",setup(L){const k=d(),M=()=>{var _={type:"manualtype",data:k.value};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{se.success("设置成功")}).catch(s=>{}).finally(()=>{})},x=d(0),F=()=>{var _={type:"fivetest",data:!0};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{se.success("五米开始")}).catch(s=>{}).finally(()=>{})},r=()=>{var _={type:"fivetest",data:!1};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{se.success("五米结束")}).catch(s=>{}).finally(()=>{})},c=d(1),b=Array.from({length:50}).map((_,s)=>({value:`${s+1}`,label:`${s+1}`})),u=()=>{var _={type:"excutetask",data:Number(c.value)};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{se.success("设置任务")}).catch(s=>{}).finally(()=>{})},n=d(null),N=()=>{var _={type:"equipment",data:{axID:Number(x.value),direction:1}};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{}).catch(s=>{}).finally(()=>{}),n.value=setTimeout(N,400)},v=()=>{clearTimeout(n.value);var _={type:"equipment",data:{axID:Number(x.value),direction:0}};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{}).catch(s=>{}).finally(()=>{}),se.success("停止")},I=d(null),w=()=>{var _={type:"equipment",data:{axID:Number(x.value),direction:2}};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{}).catch(s=>{}).finally(()=>{}),I.value=setTimeout(w,400)},y=()=>{clearTimeout(I.value);var _={type:"equipment",data:{axID:Number(x.value),direction:0}};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{}).catch(s=>{}).finally(()=>{}),se.success("停止")};d(null);const t=()=>{var _={type:"equipment",data:{axID:Number(x.value),direction:3}};console.log(JSON.stringify(_)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(s=>{}).catch(s=>{}).finally(()=>{})};return(_,s)=>{const i=pe,a=ut,p=Bt,S=Yt;return Y(),H(it,null,[f("div",Wt,[f("div",Qt,[ea,ta,e(i,{onClick:F,style:{"margin-left":"-5%"},type:"primary",icon:T(st)},{default:o(()=>[V("开始")]),_:1},8,["icon"]),e(i,{onClick:r,style:{"margin-left":"5%"},type:"primary",icon:T(ve)},{default:o(()=>[V("停止")]),_:1},8,["icon"])]),f("div",aa,[la,oa,f("div",na,[e(a,{style:{width:"45%"},modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=g=>c.value=g),placeholder:"Activity count",options:T(b)},null,8,["modelValue","options"]),e(i,{style:{"margin-right":"15%"},onClick:u,type:"primary",icon:T(ve)},{default:o(()=>[V("设置")]),_:1},8,["icon"])])])]),sa,ia,f("div",ua,[f("div",ra,[da,ca,e(S,{modelValue:x.value,"onUpdate:modelValue":s[1]||(s[1]=g=>x.value=g),placeholder:"请选择",style:{width:"80%"}},{default:o(()=>[e(p,{label:"举升",value:0}),e(p,{label:"转盘",value:1}),e(p,{label:"2",value:2}),e(p,{label:"3",value:3}),e(p,{label:"4",value:4}),e(p,{label:"5",value:5}),e(p,{label:"6",value:6})]),_:1},8,["modelValue"]),va,fa,f("div",pa,[e(i,{onMousedown:N,onMouseup:v,style:{width:"25%"},type:"primary",icon:T(ve)},{default:o(()=>[V("正向")]),_:1},8,["icon"]),e(i,{onMousedown:w,onMouseup:y,style:{width:"25%"},type:"primary",icon:T(ve)},{default:o(()=>[V("反向")]),_:1},8,["icon"]),e(i,{onMousedown:t,style:{width:"25%"},type:"primary",icon:T(Kt)},{default:o(()=>[V("复位")]),_:1},8,["icon"])])]),f("div",ma,[_a,ya,f("div",ga,[e(S,{modelValue:k.value,"onUpdate:modelValue":s[2]||(s[2]=g=>k.value=g),placeholder:"手控工具切换",style:{width:"55%"}},{default:o(()=>[e(p,{label:"手控盒",value:1}),e(p,{label:"手柄",value:2})]),_:1},8,["modelValue"]),e(i,{onClick:M,style:{"margin-right":"5%"},type:"primary",icon:T(ve)},{default:o(()=>[V("设置")]),_:1},8,["icon"])])])])],64)}}};const Q=L=>(we("data-v-6a770b71"),L=L(),xe(),L),ka={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},ba={style:{"margin-left":"13%"}},wa=Q(()=>f("h4",null,"控 制",-1)),xa={style:{width:"25%","margin-left":"-10%"}},Sa=Q(()=>f("h4",null,"速 度",-1)),Ia={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},Ca={style:{width:"50%"}},Ea=Q(()=>f("h4",null,"三 档 开 关",-1)),Na=Q(()=>f("br",null,null,-1)),Ma={style:{width:"50%"}},Va=Q(()=>f("h4",null,"PLS 切区",-1)),La=Q(()=>f("br",null,null,-1)),$a={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},Fa={style:{width:"100%","margin-top":"2%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},Ta={style:{width:"50%"}},Ka=Q(()=>f("h4",null,"上 线",-1)),qa=Q(()=>f("br",null,null,-1)),Aa={style:{width:"50%"}},Pa=Q(()=>f("h4",null,"上 线 点",-1)),Oa=Q(()=>f("br",null,null,-1)),Da={style:{width:"100%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},za=Q(()=>f("br",null,null,-1)),Ra=Q(()=>f("div",{style:{width:"100%",height:"1px","background-color":"black"}},null,-1)),Ua=Q(()=>f("br",null,null,-1)),ja={__name:"manualbox",setup(L){const k=d(null),M=m=>{(k.value===S.id||k.value===g.id||k.value===K.id||k.value===C.id||k.value===j.id||k.value===J.id||k.value===ne.id||k.value===ie.id)&&(k.value=99,Le())},x=d(!1);Ke(()=>{document.addEventListener("mouseup",M),document.addEventListener("keydown",F),document.addEventListener("keyup",r)}),qt(()=>{document.removeEventListener("mouseup",M),document.removeEventListener("keydown",F),document.removeEventListener("keyup",r)});const F=m=>{(m.key==="o"||m.key==="O")&&(u.value=!u.value,$e(u.value)),u.value&&!x.value&&((m.key==="W"||m.key==="w")&&(x.value=!0,R(g.id)),(m.key==="A"||m.key==="a")&&(x.value=!0,R(C.id)),(m.key==="S"||m.key==="s")&&(x.value=!0,R(ne.id)),(m.key==="D"||m.key==="d")&&(x.value=!0,R(j.id)))},r=m=>{console.log("key",m.key),(m.key==="W"||m.key==="w"||m.key==="A"||m.key==="a"||m.key==="S"||m.key==="s"||m.key==="D"||m.key==="d")&&x.value&&(k.value===S.id||k.value===g.id||k.value===K.id||k.value===C.id||k.value===j.id||k.value===J.id||k.value===ne.id||k.value===ie.id)&&(k.value=99,Le(),x.value=!1)},c=d(!1),b=d("DEF"),u=d(!1),n=d(""),N=d(""),v=Array.from({length:16}).map((m,h)=>({value:`${h}`,label:`${h}`})),I=Array.from({length:200}).map((m,h)=>({value:`${h+1}`,label:`${h+1}`})),w=d(!1),y=d("left"),t=d(0),_=d(0),s=d(),i=te({id:"",text:"",params:{}}),a=d();let p=1;const S=te({id:1,text:"↖",params:{a:4}}),g=te({id:2,text:"↑",params:{a:0}}),K=te({id:3,text:"↗",params:{a:5}}),C=te({id:4,text:"←",params:{a:2}}),U=te({id:5,text:"×",params:{a:10}}),j=te({id:6,text:"→",params:{a:3}}),J=te({id:7,text:"↙",params:{a:6}}),ne=te({id:8,text:"↓",params:{a:1}}),ie=te({id:9,text:"↘",params:{a:7}}),Ie=te({id:10,text:"",params:{a:13}}),ge=te({id:11,text:"",params:{a:12}});function R(m){k.value=m,w.value=!0,u.value==!0&&ze(),t.value=0,_.value=0,a.value=m,Me(m),s.value=setInterval(()=>{Ve()},600)}const he=d(null);function ae(m){he.value=setTimeout(()=>{w.value=!0,u.value==!0&&ze(),t.value=0,_.value=0,a.value=m,Me(m),s.value=setInterval(()=>{Ve()},600)},500)}const oe=()=>{w.value=!1,u.value==!0&&(ke.value=setInterval(()=>{Fe()},600),console.log("Start()")),clearTimeout(s.value),a.value="",s.value="",E(),clearTimeout(he.value),clearTimeout(s.value)},Me=m=>{switch(m){case 1:i.id=S.id,i.params=S.params;break;case 2:i.id=g.id,i.params=g.params;break;case 3:i.id=K.id,i.params=K.params;break;case 4:i.id=C.id,i.params=C.params;break;case 5:i.id=U.id,i.params=U.params;break;case 6:i.id=j.id,i.params=j.params;break;case 7:i.id=J.id,i.params=J.params;break;case 8:i.id=ne.id,i.params=ne.params;break;case 9:i.id=ie.id,i.params=ie.params;break;case 10:i.id=Ie.id,i.params=Ie.params;break;case 11:i.id=ge.id,i.params=ge.params;break}},Ve=()=>{t.value++;var m;c.value==!0&&(i.params.a==4||i.params.a==5||i.params.a==6||i.params.a==7)?(m={uCmdType:0,uCmdParm:i.params.a+4,uCmdParmExt:""},console.log("!!!PRESSING!!!")):c.value==!0&&(i.params.a==2||i.params.a==3)?m={uCmdType:0,uCmdParm:i.params.a+10,uCmdParmExt:""}:m={uCmdType:0,uCmdParm:i.params.a,uCmdParmExt:""},console.log(JSON.stringify(m)),console.log(typeof JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(m)}).then(h=>{}).catch(h=>{}).finally(()=>{_.value++})};function Le(){w.value=!1,u.value==!0&&(ke.value=setInterval(()=>{Fe()},600),console.log("Start()")),clearTimeout(s.value),a.value="",s.value=""}const E=()=>{w.value==!0&&(u.value==!0&&(ke.value=setInterval(()=>{Fe()},600),console.log("Start()")),clearTimeout(s.value),a.value="",s.value="",console.log("mouse leave"),w.value=!1)},$=()=>{let m="/api/ctrl/manual";p=1,le(m)},A=()=>{let m="/api/ctrl/manual";p=2,le(m)},X=()=>{let m="/api/ctrl/manual";p=3,le(m)},G=()=>{let m="/api/ctrl/manual";p=4,le(m)},W=()=>{let m="/api/ctrl/manual";p=5,le(m)},le=(m,h)=>{var D={uCmdType:3,uCmdParm:p,uCmdParmExt:""};console.log(JSON.stringify(D)),console.log(typeof JSON.stringify(D)),O({method:"post",url:m,data:JSON.stringify(D)}).then(ee=>{}).catch(ee=>{}).finally(()=>{})},Z=()=>{var m={uCmdType:2,uCmdParm:0,uCmdParmExt:""};console.log(JSON.stringify(m)),console.log(typeof JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(m)}).then(h=>{}).catch(h=>{}).finally(()=>{})},$e=m=>{m==!0?(ke.value=setInterval(()=>{Fe()},600),console.log("Start()")):ze()},Fe=()=>{console.log("number");var m={uCmdType:4,uCmdParm:12,uCmdParmExt:""};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/manual",data:JSON.stringify(m)}).then(h=>{}).catch(h=>{}).finally(()=>{})};function ze(){console.log("onEnd()"),clearInterval(ke.value),ke.value=""}const Re=m=>{let h=1;switch(m.target.value){case"left":h=1;break;case"mid":h=2;break;case"right":h=3;break}var D={triswt:h};console.log(JSON.stringify(D)),console.log(typeof JSON.stringify(D)),O({method:"post",url:"/api/ctrl/triswt",data:JSON.stringify(D)}).then(ee=>{}).catch(ee=>{}).finally(()=>{})},pt=()=>{var m={plscut:Number(n.value)};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/plscut",data:JSON.stringify(m)}).then(h=>{}).catch(h=>{}).finally(()=>{})},mt=()=>{var m={onlinepoint:Number(N.value)};console.log(JSON.stringify(m)),O({method:"post",url:"/api/ctrl/onlinepoint",data:JSON.stringify(m)}).then(h=>{}).catch(h=>{}).finally(()=>{})},_t=()=>{c.value==!0?b.value="PRESS":b.value="DEF"};return(m,h)=>{const D=rt,ee=At,z=pe,Ue=Pt,yt=Xt,gt=Jt,ce=dt,je=Zt,ht=Ht,He=ut;return Y(),H("div",null,[f("div",ka,[e(ce,{style:{width:"100%"}},{default:o(()=>[f("div",ba,[e(D,null,{default:o(()=>[wa]),_:1}),e(D,{style:{"margin-bottom":"3%","margin-top":"3%","margin-left":"3%",height:"23%"}},{default:o(()=>[e(Ue,{style:{width:"100%"}},{default:o(()=>[e(z,{disabled:!u.value||x.value,onMousedown:h[0]||(h[0]=q=>R(S.id)),type:"info",onTouchstart:h[1]||(h[1]=q=>ae(S.id)),onTouchend:oe,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(ee,{size:"30"},{default:o(()=>[V(" ↖ ")]),_:1})]),_:1},8,["disabled"]),e(z,{disabled:!u.value||x.value,onMousedown:h[2]||(h[2]=q=>R(g.id)),type:"info",onTouchstart:h[3]||(h[3]=q=>ae(g.id)),onTouchend:oe,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(ee,{size:"30"},{default:o(()=>[V(" ↑ ")]),_:1})]),_:1},8,["disabled"]),e(z,{disabled:!u.value||x.value,onMousedown:h[4]||(h[4]=q=>R(K.id)),type:"info",onTouchstart:h[5]||(h[5]=q=>ae(K.id)),onTouchend:oe,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(ee,{size:"30"},{default:o(()=>[V(" ↗ ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(D,{style:{"margin-bottom":"3%",height:"23%","margin-left":"3%"}},{default:o(()=>[e(Ue,{style:{width:"100%"}},{default:o(()=>[e(z,{disabled:!u.value||x.value,onMousedown:h[6]||(h[6]=q=>R(C.id)),type:"info",onTouchstart:h[7]||(h[7]=q=>ae(C.id)),onTouchend:oe,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(ee,{size:"30"},{default:o(()=>[V(" ← ")]),_:1})]),_:1},8,["disabled"]),e(z,{disabled:!u.value||x.value,onClick:m.changeClick,type:"info",style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(yt,{disabled:!u.value||x.value,onChange:_t,modelValue:c.value,"onUpdate:modelValue":h[8]||(h[8]=q=>c.value=q),size:"large"},{default:o(()=>[V(qe(b.value),1)]),_:1},8,["disabled","modelValue"])]),_:1},8,["disabled","onClick"]),e(z,{disabled:!u.value||x.value,onMousedown:h[9]||(h[9]=q=>R(j.id)),type:"info",onTouchstart:h[10]||(h[10]=q=>ae(j.id)),onTouchend:oe,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(ee,{size:"30"},{default:o(()=>[V(" → ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(D,{style:{"margin-bottom":"3%",height:"23%","margin-left":"3%"}},{default:o(()=>[e(Ue,{style:{width:"100%"}},{default:o(()=>[e(z,{disabled:!u.value||x.value,onMousedown:h[11]||(h[11]=q=>R(J.id)),type:"info",onTouchstart:h[12]||(h[12]=q=>ae(J.id)),onTouchend:oe,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(ee,{size:"30"},{default:o(()=>[V(" ↙ ")]),_:1})]),_:1},8,["disabled"]),e(z,{disabled:!u.value||x.value,onMousedown:h[13]||(h[13]=q=>R(ne.id)),type:"info",onTouchstart:h[14]||(h[14]=q=>ae(ne.id)),onTouchend:oe,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(ee,{size:"30"},{default:o(()=>[V(" ↓ ")]),_:1})]),_:1},8,["disabled"]),e(z,{disabled:!u.value||x.value,onMousedown:h[15]||(h[15]=q=>R(ie.id)),type:"info",onTouchstart:h[16]||(h[16]=q=>ae(ie.id)),onTouchend:oe,style:{width:"17%",height:"100%","margin-left":"2px"}},{default:o(()=>[e(ee,{size:"30"},{default:o(()=>[V(" ↘ ")]),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1}),e(gt,{onChange:$e,modelValue:u.value,"onUpdate:modelValue":h[17]||(h[17]=q=>u.value=q),"active-text":"Open","inactive-text":"Close"},null,8,["modelValue"])])]),_:1}),f("div",xa,[e(D,null,{default:o(()=>[Sa]),_:1}),e(D,null,{default:o(()=>[e(z,{onClick:$,type:"success",style:{"margin-bottom":"-2%"}},{default:o(()=>[V("1 级")]),_:1})]),_:1}),e(D,null,{default:o(()=>[e(z,{onClick:A,type:"success",style:{"margin-bottom":"-2%"}},{default:o(()=>[V("2 级")]),_:1})]),_:1}),e(D,null,{default:o(()=>[e(z,{onClick:X,type:"success",style:{"margin-bottom":"-2%"}},{default:o(()=>[V("3 级")]),_:1})]),_:1}),e(D,null,{default:o(()=>[e(z,{onClick:G,type:"success",style:{"margin-bottom":"-2%"}},{default:o(()=>[V("4 级")]),_:1})]),_:1}),e(D,null,{default:o(()=>[e(z,{onClick:W,type:"success",style:{"margin-bottom":"-2%"}},{default:o(()=>[V("5 级")]),_:1})]),_:1})])]),f("div",Ia,[f("div",Ca,[e(ce,{style:{"margin-left":"13%"}},{default:o(()=>[Ea]),_:1}),Na,e(ce,{style:{"margin-left":"10%"}},{default:o(()=>[e(ht,{modelValue:y.value,"onUpdate:modelValue":h[18]||(h[18]=q=>y.value=q),style:{margin:"0 auto"}},{default:o(()=>[e(je,{onChange:Re,size:"large",label:"left"},{default:o(()=>[V("手动")]),_:1}),e(je,{onChange:Re,size:"large",label:"mid"},{default:o(()=>[V("空闲")]),_:1}),e(je,{onChange:Re,size:"large",label:"right"},{default:o(()=>[V("自动")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),f("div",Ma,[e(ce,null,{default:o(()=>[Va]),_:1}),La,f("div",$a,[e(He,{style:{width:"50%"},modelValue:n.value,"onUpdate:modelValue":h[19]||(h[19]=q=>n.value=q),placeholder:"Activity count",options:T(v)},null,8,["modelValue","options"]),e(z,{onClick:pt,style:{"margin-right":"5%",width:"40%"},type:"primary",icon:T(ve)},{default:o(()=>[V("设置")]),_:1},8,["icon"])])])]),f("div",Fa,[f("div",Ta,[e(ce,{style:{"margin-left":"13%"}},{default:o(()=>[Ka]),_:1}),qa,e(ce,{style:{"margin-left":"6%","margin-top":"1%"}},{default:o(()=>[e(z,{onClick:Z,size:"large",style:{"margin-left":"20%"},type:"primary",icon:T(st)},{default:o(()=>[V("上线")]),_:1},8,["icon"])]),_:1})]),f("div",Aa,[e(ce,null,{default:o(()=>[Pa]),_:1}),Oa,f("div",Da,[e(He,{style:{width:"50%"},modelValue:N.value,"onUpdate:modelValue":h[20]||(h[20]=q=>N.value=q),placeholder:"Activity count",options:T(I)},null,8,["modelValue","options"]),e(z,{onClick:mt,style:{"margin-right":"5%",width:"40%"},type:"primary",icon:T(ve)},{default:o(()=>[V("设置")]),_:1},8,["icon"])])])]),za,Ra,Ua,e(ha)])}}},Ja=de(ja,[["__scopeId","data-v-6a770b71"]]);const Ba={style:{"margin-left":"35%","margin-top":"7%"}},Ya=Dt('<div class="container" data-v-f30e104a><div id="battery" data-v-f30e104a><div id="charge" data-v-f30e104a></div><div id="charge-level" data-v-f30e104a></div></div><div id="charging-time" data-v-f30e104a></div></div>',1),Xa=[Ya],Ga={__name:"BatteryDisplay",setup(L){const k=d({}),M=()=>{k.value=l.value,x(k.value),Ot.value=setTimeout(()=>{M()},5e3)};Ke(M);const x=F=>{console.log("fakeMsg",F);const r=d(""),c=d(""),b=d(null);c.value=document.getElementById("charge"),r.value=document.getElementById("charge-level"),b.value=document.getElementById("charging-time");function u(){n(),N()}u();function n(){F.electricalModule.sensor.battmetr.bCharge?(c.value&&c.value.classList&&c.value.classList.add("active"),c.value!==""&&(c.value.innerText="")):c.value.classList.remove("active")}function N(){let v=`${F.electricalModule.sensor.battmetr.fCapPercent.toFixed(2)}%`;c.value&&c.value.style&&(c.value.style.width=v),r.value&&(r.value.textContent=v,console.log("charge.value.style.width",c.value.style.width))}};return(F,r)=>(Y(),H("div",Ba,Xa))}},Za=de(Ga,[["__scopeId","data-v-f30e104a"]]);const Oe=L=>(we("data-v-d2f84bdc"),L=L(),xe(),L),Ha=Oe(()=>f("br",null,null,-1)),Wa=Oe(()=>f("br",null,null,-1)),Qa=Oe(()=>f("h3",{style:{"margin-left":"3%"}},"点云:",-1)),el=Oe(()=>f("br",null,null,-1)),tl={style:{display:"flex"}},al={style:{flex:"1","margin-right":"1%"}},ll={style:{flex:"1"}},ol={__name:"nav",setup(L,{expose:k}){const M=d(!0),x=()=>{Xe.value=!Xe.value,Ne.value=null},F=()=>{Ne.value!==null&&(Ne.value.visible=M.value)},r=d({Xpianyi:[{required:!0,message:"输入X轴相对偏移"}],Ypianyi:[{required:!0,message:"输入Y轴相对偏移"}],Zpianyi:[{required:!0,message:"输入Z轴相对偏移"}],EX:[{required:!0,message:"输入X轴欧拉角度"}],EY:[{required:!0,message:"输入Y轴欧拉角度"}],EZ:[{required:!0,message:"输入Z轴欧拉角度"}]}),c=d({Xpianyi:"",Ypianyi:"",Zpianyi:"",EX:"",EY:"",EZ:""}),b=()=>{c.value.validate(I=>{I?(Pe.value.value=null,Pe.value.click()):se.error("补全点云偏移旋转数据")})},u=d(!1),n=()=>{u.value=!0},N=B(()=>[{key:"软件版本",value:l.value.navInfo.fmVersion,key2:"环境模型版本",value2:l.value.navInfo.swVersion},{key:"理论位置",value:`(${l.value.tcInfo.iDevX},${l.value.tcInfo.iDevY})`,key2:"当前位置",value2:`(${l.value.navInfo.fRealX.toFixed(3)},${-l.value.navInfo.fRealY.toFixed(3)},${(l.value.navInfo.fRealThita*180/Math.PI).toFixed(3)})`},{key:"角度偏差",value:l.value.navInfo.fXDev.toFixed(4),key2:"左右偏差",value2:l.value.navInfo.fThitaDev.toFixed(4)},{key:"发送舵角",value:"",key2:"发送速度",value2:""}]);return k({handleMouseClicknav:I=>{const w=fe.intersectObjects([I]);w.length>0&&(console.log("modelname:",w[0].object.name),w[0].object.name==="laser7"||w[0].object.name==="laser1"||w[0].object.name==="laser6"||w[0].object.name==="laser5"?u.value=!0:u.value=!1)}}),(I,w)=>{const y=pe,t=_e,_=ye,s=zt,i=rt,a=dt,p=Gt,S=me;return Y(),H("div",null,[e(y,{class:"controlnav",type:"info",onClick:n},{default:o(()=>[V("导航")]),_:1}),e(S,{modelValue:u.value,"onUpdate:modelValue":w[7]||(w[7]=g=>u.value=g),title:"导航",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:o(()=>[e(Ze,{showUpBt:!0},{default:o(()=>[Ha,e(_,{data:N.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatablenav"},{default:o(()=>[e(t,{prop:"key",label:"导航信息"}),e(t,{prop:"value"}),e(t,{prop:"key2"}),e(t,{prop:"value2"})]),_:1},8,["data"]),Wa,Qa,el,e(a,{ref_key:"form",ref:c,model:T(P),"label-width":"120px",rules:r.value,style:{width:"90%","margin-left":"3%"}},{default:o(()=>[f("div",tl,[f("div",al,[e(i,{label:"X轴相对偏移",prop:"Xpianyi"},{default:o(()=>[e(s,{modelValue:T(P).Xpianyi,"onUpdate:modelValue":w[0]||(w[0]=g=>T(P).Xpianyi=g),modelModifiers:{number:!0},placeholder:"X轴相对偏移",type:"number"},null,8,["modelValue"])]),_:1}),e(i,{label:"Y轴相对偏移",prop:"Ypianyi"},{default:o(()=>[e(s,{modelValue:T(P).Ypianyi,"onUpdate:modelValue":w[1]||(w[1]=g=>T(P).Ypianyi=g),modelModifiers:{number:!0},placeholder:"Y轴相对偏移",type:"number"},null,8,["modelValue"])]),_:1}),e(i,{label:"Z轴相对偏移",prop:"Zpianyi"},{default:o(()=>[e(s,{modelValue:T(P).Zpianyi,"onUpdate:modelValue":w[2]||(w[2]=g=>T(P).Zpianyi=g),modelModifiers:{number:!0},placeholder:"Z轴相对偏移",type:"number"},null,8,["modelValue"])]),_:1})]),f("div",ll,[e(i,{label:"X轴欧拉角度",prop:"EX"},{default:o(()=>[e(s,{modelValue:T(P).EX,"onUpdate:modelValue":w[3]||(w[3]=g=>T(P).EX=g),modelModifiers:{number:!0},placeholder:"X轴欧拉角度",type:"number"},null,8,["modelValue"])]),_:1}),e(i,{label:"Y轴欧拉角度",prop:"EY"},{default:o(()=>[e(s,{modelValue:T(P).EY,"onUpdate:modelValue":w[4]||(w[4]=g=>T(P).EY=g),modelModifiers:{number:!0},placeholder:"Y轴欧拉角度",type:"number"},null,8,["modelValue"])]),_:1}),e(i,{label:"Z轴欧拉角度",prop:"EZ"},{default:o(()=>[e(s,{modelValue:T(P).EZ,"onUpdate:modelValue":w[5]||(w[5]=g=>T(P).EZ=g),modelModifiers:{number:!0},placeholder:"Z轴欧拉角度",type:"number"},null,8,["modelValue"])]),_:1})])])]),_:1},8,["model","rules"]),e(y,{style:{"margin-left":"3%"},onClick:b},{default:o(()=>[V("导入点云地图")]),_:1}),e(y,{style:{"margin-left":"3%"},onClick:x},{default:o(()=>[V("清除点云地图")]),_:1}),e(p,{style:{"margin-left":"3%"},disabled:T(Ne)===null,modelValue:M.value,"onUpdate:modelValue":w[6]||(w[6]=g=>M.value=g),onChange:F},{default:o(()=>[V("隐藏/显示点云")]),_:1},8,["disabled","modelValue"])]),_:1})]),_:1},8,["modelValue"])])}}},ct=de(ol,[["__scopeId","data-v-d2f84bdc"]]);const De=L=>(we("data-v-ff9a0da1"),L=L(),xe(),L),nl=De(()=>f("br",null,null,-1)),sl=De(()=>f("br",null,null,-1)),il=De(()=>f("br",null,null,-1)),ul=De(()=>f("br",null,null,-1)),rl={__name:"ele",setup(L,{expose:k}){const M=d(!1),x=()=>{M.value=!0};k({handleMouseClickele:S=>{const g=fe.intersectObjects([S]);g.length>0&&(console.log("modelname33333:",g[0].object.name),g[0].object.name==="Material_27车体4-41-170"||g[0].object.name==="Material_27车体4-41-140"||g[0].object.name==="Material_27车体4-41-167"?M.value=!0:M.value=!1)}});const r=B(()=>{let S="";const g=l.value.electricalModule.safeCheck.nPlsTrig;return g===0?S="未触发":g===1?S="近":g===2?S="中":g===3&&(S="远"),[{key:"保险杠",value:l.value.electricalModule.safeCheck.bHardBumper?"🔴":"🟢",key2:"急停",value2:l.value.electricalModule.safeCheck.bEmgStop?"🔴":"🟢",key3:"pls状态",value3:S}]}),c=B(()=>[{key:"X",value:l.value.electricalModule.sensor.camera.fx.toFixed(4),key2:"Y",value2:l.value.electricalModule.sensor.camera.fy.toFixed(4),key3:"角度",value3:l.value.electricalModule.sensor.camera.fthita.toFixed(4)}]);B(()=>[{key:"磁导航偏差1",value:l.value.electricalModule.sensor.magnetic.fDev[0],key2:"磁导航偏差2",value2:l.value.electricalModule.sensor.magnetic.fDev[1],key3:"磁导航状态",value3:l.value.electricalModule.sensor.magnetic.sGrade}]);const b=d(0),u=d(null),n=d(null),N=d(null),v=d(0),I=d("驱动轴0"),w=d(0),y=d(0),t=d(0),_=d(0),s=d(0),i=d(0),a=()=>{v.value<b.value-1?v.value++:v.value=0,console.log(v.value),I.value="驱动轴"+v.value.toString()},p=B(()=>{if(b.value=l.value.electricalModule.kinematic.nDriveCount,l.value.electricalModule.kinematic.drive[v.value].wheel!==void 0){switch(u.value=l.value.electricalModule.kinematic.drive[v.value].wheel.fServoSpeed.toFixed(5),n.value=l.value.electricalModule.kinematic.drive[v.value].wheel.nServoErrCode,n.value){case 0:n.value="无错误";break;case 100:n.value="Motec 系统故障/Kinco 内部错误报警";break;case 101:n.value=" Motec 驱动器启动故障/Kinco 编码器ABZ连接报警";break;case 102:n.value="Motec 参数错误/Kinco 编码器UVW连接报警";break;case 103:n.value=" Motec 欠压报警/Kinco  编码器计数报警";break;case 104:n.value="Motec 过压报警/Kinco 温度报警";break;case 105:n.value=" Motec I2T报警/Kinco 高压报警";break;case 106:n.value=" Motec 超过峰值电流/Kinco 低压报警";break;case 107:n.value=" Motec 位置误差超限/Kinco 过流报警";break;case 108:n.value="Motec 编码器故障/Kinco 吸收电阻报警";break;case 109:n.value="Motec 速度误差超限/Kinco 位置误差过大报警";break;case 110:n.value="Kinco 逻辑低压报警";break;case 111:n.value=" Kinco 电机或驱动器iit报警";break;case 112:n.value=" Kinco 脉冲频率过高报警";break;case 113:n.value="Kinco STO错误";break;case 114:n.value="Kinco 电机励磁报警";break;case 115:n.value="Motec 电机没有使能/Kinco 存储器报警";break}N.value=l.value.electricalModule.kinematic.drive[v.value].wheel.nServoState}return l.value.electricalModule.kinematic.drive[v.value].steer!==void 0?(w.value=l.value.electricalModule.kinematic.drive[v.value].steer.fServoPosition.toFixed(5),y.value=l.value.electricalModule.kinematic.drive[v.value].steer.nServoState,t.value=l.value.electricalModule.kinematic.drive[v.value].steer.nServoErrCode,_.value=l.value.electricalModule.kinematic.drive[v.value].steer.bPositiveLimitSwt,s.value=l.value.electricalModule.kinematic.drive[v.value].steer.bNegativeLimitSwt,i.value=l.value.electricalModule.kinematic.drive[v.value].steer.bZeroSwt):(w.value="🚫无",y.value="🚫无",t.value="🚫无",_.value="🚫无",s.value="🚫无",i.value="🚫无"),[{key:"实际速度",value:u.value,key2:"状态码",value2:N.value,key3:"错误码",value3:n.value}]});return(S,g)=>{const K=pe,C=_e,U=ye,j=me;return Y(),H("div",null,[e(K,{class:"controlele",type:"info",onClick:x},{default:o(()=>[V("电气")]),_:1}),e(j,{modelValue:M.value,"onUpdate:modelValue":g[0]||(g[0]=J=>M.value=J),title:"电气",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:o(()=>[nl,e(U,{data:r.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatableele"},{default:o(()=>[e(C,{prop:"key",label:"防碰"}),e(C,{prop:"value"}),e(C,{prop:"key2"}),e(C,{prop:"value2"}),e(C,{prop:"key3"}),e(C,{prop:"value3"})]),_:1},8,["data"]),sl,e(U,{data:c.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatableele"},{default:o(()=>[e(C,{prop:"key",label:"二维码"}),e(C,{prop:"value"}),e(C,{prop:"key2"}),e(C,{prop:"value2"}),e(C,{prop:"key3"}),e(C,{prop:"value3"})]),_:1},8,["data"]),il,e(U,{data:p.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatableele"},{default:o(()=>[e(C,{prop:"key",label:"伺服"}),e(C,{prop:"value"}),e(C,{prop:"key2"}),e(C,{prop:"value2",label:"切换轴"}),e(C,{prop:"key3"},{header:o(()=>[e(K,{onClick:a,style:{width:"90%","font-size":"10px"}},{default:o(()=>[V(qe(I.value),1)]),_:1})]),_:1}),e(C,{prop:"value3"})]),_:1},8,["data"]),ul]),_:1},8,["modelValue"])])}}},vt=de(rl,[["__scopeId","data-v-ff9a0da1"]]),dl={AgvEquipmentInfo:[{Key:" eServoRelayCheck",value:"举升伺服未上电"},{Key:" eEmgCheck",value:"急停按下"},{Key:" eIoMarkCheck",value:"未发现地标"},{Key:" eMagnetDevCheck",value:"左右磁导航偏差过大"},{Key:" eFindLifterError",value:"举升伺服故障"},{Key:" eFindCarrierError",value:"整体轴伺服报错"},{Key:" eLifterSyncError",value:"举升编码器同步错误"},{Key:" elifterCentreCheck",value:"同步开关错误"},{Key:" elifterPositionCheck",value:"位置开关校验高度错误"},{Key:" elifterPositionCheckHight",value:"高度校验位置开关错误"},{Key:" ePreLifterHeightCheck",value:"举升任务高度错误"},{Key:" eLifterTopNotSafe",value:"举升高度不安全"},{Key:" eSecondAxisCheckCargoStatus",value:"副轴货物状态异常"},{Key:" eFirstAxisCheckCargoStatus",value:"主轴货物状态异常"},{Key:" eSecondAxisCargoExist",value:"副轴货物存在"},{Key:" eFirstAxisCargoExist",value:"主轴货物存在"},{Key:" eSecondAxisCargoNotExist",value:"副轴货物不存在"},{Key:" eFirstAxisCargoNotExist",value:"主轴货物不存在"},{Key:" eLifterHeightCheckright",value:"举升位置不安全"},{Key:" resume",value:"复位设备伺服"},{Key:" LifterAutoGotoHeight",value:"举升运动中"},{Key:" FirstAxisCargoNotExist",value:"主轴送货完成后发现货物"},{Key:" SecondAxisCargoNotExist",value:"副轴送货完成后发现货物"},{Key:" FirstAxisCargoExist",value:"主轴取货完成后未发现货物"},{Key:" SecondAxisCargoExist",value:"副轴取货完成后未发现货物"},{Key:" LifterReset",value:"举升复位到0"},{Key:" CarrierAutoGotoHeight",value:"整体轴运动中"},{Key:" CameraCheck",value:"获得工作模式并检查是否超时"},{Key:" eStartModeErr",value:"开始工作模式错误"},{Key:" eEndModeErr",value:"结束工作模式错误"},{Key:" eStateErr",value:"3D相机工作状态错误"},{Key:" eGoodExistErr",value:"前方货架有货"},{Key:" LifterAxis_Up",value:"举升轴上限位检测"},{Key:" LifterAxis_Down",value:"举升轴下限位检测"},{Key:" eLifterServoErr",value:"举升伺服故障"},{Key:" TurnAxis_Up",value:"旋转轴限位检测"},{Key:" TurnAxis_Down",value:"旋转轴限位检测"},{Key:" TurnAxis_Gohome",value:"旋转轴校零"},{Key:" LifterAxis_Gohome",value:"举升轴校零"},{Key:" eEmgbtnPressed",value:"急停按下"},{Key:" CheckDeltaAng",value:"角度补偿检测"},{Key:" StartLoadTune",value:"开始载货调整"},{Key:" ClearDeltaAng",value:"清除角度补偿"},{Key:" CheckDeltaY",value:"Y轴补偿检测"},{Key:" ClearDeltaY",value:"清除Y轴补偿"},{Key:" EndTune",value:"结束载货"},{Key:" CheckDeltaX",value:"X轴补偿检测"},{Key:" AutoGotoTopExt",value:"举升轴到上限位"},{Key:" eNotfindtheTop",value:"举升轴找不到上限位"},{Key:" LifterHeightCheck",value:"举升轴高度检测"},{Key:" CargoCheck",value:"货物检测"},{Key:" eLoadCargoExistError",value:"货物不存在"},{Key:" UpdateGryoPos",value:"更新惯导位置"},{Key:" CargoExist",value:"货物存在"},{Key:" StartUnLoadTune",value:"开始卸载调整"},{Key:" HandleUnLoadCheck",value:"卸货检查"},{Key:" eRackAngleNotSafe",value:"转盘角度不安全"},{Key:" AutoGotoBottomExt",value:"举升轴到下限位"},{Key:" eLifterBottomNotSafe",value:"举升轴到底不安全"},{Key:" eUnLoadCargoExistError",value:"货物未卸载"},{Key:" StartSyncSpin",value:"开始同步旋转"},{Key:" eSpinDiffOverLimit",value:"自旋角度超限"},{Key:" eRackServoErr",value:"旋转伺服故障"},{Key:" HandleSyncSpin",value:"处理同步旋转"},{Key:" EndSyncSpin",value:"结束同步旋转"},{Key:" StartCameraCheck",value:"开始3D相机检测"},{Key:" SpinCheck",value:"旋转检测"},{Key:" Start",value:"自旋准备"},{Key:" RackRun",value:"开始自旋"},{Key:" End",value:"结束自旋"},{Key:" ClearNavDeltaAng",value:"清除导航补偿角度"},{Key:" eCanNotGetNavThita",value:"无法得到导航角度"},{Key:" eCanNotGetNavY",value:"无法得到导航角度"},{Key:" eCanNotGetNavX",value:"无法得到导航角度"},{Key:" CheckNavAng",value:"检测导航角度"},{Key:" CheckNavAng",value:"检测导航角度"}]};const Se=L=>(we("data-v-28fa8a63"),L=L(),xe(),L),cl=Se(()=>f("br",null,null,-1)),vl={key:0},fl=Se(()=>f("br",null,null,-1)),pl=Se(()=>f("br",null,null,-1)),ml={key:1},_l=Se(()=>f("br",null,null,-1)),yl=Se(()=>f("br",null,null,-1)),gl=Se(()=>f("br",null,null,-1)),hl={__name:"dev",setup(L,{expose:k}){const M=d(!1),x=()=>{M.value=!0};k({handleMouseClickdev:_=>{const s=fe.intersectObjects([_]);s.length>0&&(console.log("modelname33333:",s[0].object.name),s[0].object.name==="Material_9举升3-41-14"?M.value=!0:M.value=!1)}});const r=B(()=>[{key:"转盘纵向开关",value:l.value.equipmentInfo.rack.turn_axis.bZero?"🔴":"🟢",key2:"转盘横向开关",value2:l.value.equipmentInfo.rack.turn_axis.bLevel?"🔴":"🟢"},{key:"转盘位置",value:l.value.equipmentInfo.rack.turn_axis.fAxisPosition.toFixed(3),key2:"",value2:""}]),c=B(()=>[{key:"整体上限位",value:l.value.equipmentInfo.rack.all.CarrierSwtPos?"🔴":"🟢",key2:"整体下限位",value2:l.value.equipmentInfo.rack.all.CarrierSwtNag?"🔴":"🟢"},{key:"整体零位",value:l.value.equipmentInfo.rack.all.CarrierSwtZero?"🔴":"🟢",key2:"整体位置",value2:l.value.equipmentInfo.rack.all.CarrierSwtposition.toFixed(3)},{key:"前满卷货物检测",value:l.value.equipmentInfo.rack.FLifterSwtCargoFull?"🔴":"🟢",key2:"前空卷货物检测",value2:l.value.equipmentInfo.rack.FLifterSwtCargoEmpty?"🔴":"🟢"},{key:"后满卷货物检测",value:l.value.equipmentInfo.rack.RLifterSwtCargoFull?"🔴":"🟢",key2:"后空卷货物检测",value2:l.value.equipmentInfo.rack.RLifterSwtCargoEmpty?"🔴":"🟢"},{key:"前满卷偏载",value:l.value.equipmentInfo.rack.FLifterSwtPianzaiFull?"🔴":"🟢",key2:"前空卷偏载",value2:l.value.equipmentInfo.rack.FLifterSwtPianzaiEmpty?"🔴":"🟢"},{key:"后满卷偏载",value:l.value.equipmentInfo.rack.RLifterSwtPianzaiFull?"🔴":"🟢",key2:"后空卷偏载",value2:l.value.equipmentInfo.rack.RLifterSwtPianzaiEmpty?"🔴":"🟢"},{key:"同步开关",value:l.value.equipmentInfo.rack.LifterCentrePosition?"🔴":"🟢",key2:"",value2:""}]),b=B(()=>[{key:"前推拉上限位",value:l.value.equipmentInfo.rack.push.FPullerSwtPos?"🔴":"🟢",key2:"前推拉下限位",value2:l.value.equipmentInfo.rack.push.FPullerSwtNag?"🔴":"🟢"},{key:"前推拉零位",value:l.value.equipmentInfo.rack.push.FPullerSwtZero?"🔴":"🟢",key2:"前推拉位置",value2:l.value.equipmentInfo.rack.push.FPullerSwtposition.toFixed(3)},{key:"后推拉上限位",value:l.value.equipmentInfo.rack.push.RPullerSwtPos?"🔴":"🟢",key2:"后推拉下限位",value2:l.value.equipmentInfo.rack.push.RPullerSwtNag?"🔴":"🟢"},{key:"后推拉零位",value:l.value.equipmentInfo.rack.push.RPullerSwtZero?"🔴":"🟢",key2:"后推拉位置",value2:l.value.equipmentInfo.rack.push.RPullerSwtposition.toFixed(3)}]),u=B(()=>[{key:"前举升上限位",value:l.value.equipmentInfo.rack.turn_axis.bLevel?"🔴":"🟢",key2:"前举升下限位",value2:l.value.equipmentInfo.rack.turn_axis.fAxisSpeed?"🔴":"🟢"},{key:"前举升零位",value:l.value.equipmentInfo.rack.turn_axis.bZero?"🔴":"🟢",key2:"前举升位置",value2:l.value.equipmentInfo.rack.turn_axis.fAxisPosition.toFixed(3)},{key:"后举升上限位",value:l.value.equipmentInfo.rack.lifter_axis.bTop?"🔴":"🟢",key2:"后举升下限位",value2:l.value.equipmentInfo.rack.lifter_axis.bBottom?"🔴":"🟢"},{key:"后举升零位",value:l.value.equipmentInfo.rack.lifter_axis.fAxisSpeed?"🔴":"🟢",key2:"后举升位置",value2:l.value.equipmentInfo.rack.lifter_axis.fAxisPosition.toFixed(3)}]),n=B(()=>[{key:"举升高位开关",value:l.value.equipmentInfo.rack.lifter_axis.bTop?"🔴":"🟢",key2:"举升零位开关",value2:l.value.equipmentInfo.rack.lifter_axis.bBottom?"🔴":"🟢"},{key:"举升位置",value:l.value.equipmentInfo.rack.lifter_axis.fAxisPosition.toFixed(3),key2:"",value2:""}]),N=d(0),v=d(0),I=d(0),w=d(0),y=d(0),t=B(()=>{if(N.value=l.value.equipmentInfo.uEquipmentState,N.value===0?N.value="其他":N.value===1?N.value="开始":N.value===2?N.value="暂停":N.value===3&&(N.value="结束"),w.value=l.value.equipmentInfo.uEquipmentTaskError,w.value===0&&(w.value="无故障"),v.value=l.value.equipmentInfo.uEquipmentTaskID,v.value===0)I.value="无任务",y.value="无";else{y.value=l.value.equipmentInfo.strEquipmentTaskMessage;const s=dl.AgvEquipmentInfo.reduce((i,a)=>(i[a.Key]=a.value,i),{})[y.value]||"";y.value=s,I.value=l.value.equipmentInfo.uEquipmentTaskState,I.value===0?I.value="运行中":I.value===1?I.value="结束":I.value===-1&&(I.value="无任务")}return[{key:"设备状态",value:N.value,key2:"设备任务号",value2:v.value},{key:"设备任务状态",value:I.value,key2:"设备故障码",value2:w.value},{key:"设备动作步骤",value:y.value,key2:"动作轴id",value2:""},{key:"动作轴位置",value:"",key2:"动作轴开关状态",value2:""}]});return(_,s)=>{const i=pe,a=_e,p=ye,S=me;return Y(),H("div",null,[e(i,{class:"controldev",type:"info",onClick:x},{default:o(()=>[V(" 车体设备")]),_:1}),e(S,{modelValue:M.value,"onUpdate:modelValue":s[0]||(s[0]=g=>M.value=g),title:"车体设备",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:o(()=>[e(Ze,{showUpBt:!0},{default:o(()=>[cl,T(be)===0?(Y(),H("div",vl,[e(p,{data:r.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatabledev"},{default:o(()=>[e(a,{prop:"key",label:"转盘"}),e(a,{prop:"value"}),e(a,{prop:"key2"}),e(a,{prop:"value2"})]),_:1},8,["data"]),fl,e(p,{data:n.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatabledev"},{default:o(()=>[e(a,{prop:"key",label:"举升"}),e(a,{prop:"value"}),e(a,{prop:"key2"}),e(a,{prop:"value2"})]),_:1},8,["data"]),pl])):Ae("",!0),T(be)===1&&T(l).equipmentInfo.rack.push!==void 0?(Y(),H("div",ml,[e(p,{data:u.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatabledev"},{default:o(()=>[e(a,{prop:"key",label:"举升"}),e(a,{prop:"value"}),e(a,{prop:"key2"}),e(a,{prop:"value2"})]),_:1},8,["data"]),_l,e(p,{data:b.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatabledev"},{default:o(()=>[e(a,{prop:"key",label:"推拉"}),e(a,{prop:"value"}),e(a,{prop:"key2"}),e(a,{prop:"value2"})]),_:1},8,["data"]),yl,e(p,{data:c.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatabledev"},{default:o(()=>[e(a,{prop:"key",label:"其他"}),e(a,{prop:"value"}),e(a,{prop:"key2"}),e(a,{prop:"value2"})]),_:1},8,["data"]),gl])):Ae("",!0),e(p,{data:t.value,border:"",style:{width:"90%","margin-left":"5%"},class:"datatabledev"},{default:o(()=>[e(a,{prop:"key",label:"设备信息"}),e(a,{prop:"value"}),e(a,{prop:"key2"}),e(a,{prop:"value2"})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])])}}},ft=de(hl,[["__scopeId","data-v-28fa8a63"]]);const kl=L=>(we("data-v-da856e90"),L=L(),xe(),L),bl=kl(()=>f("br",null,null,-1)),wl={__name:"tc",setup(L){const k=d(!1),M=()=>{k.value=!0},x=d(0),F=d(0),r=d(0),c=d(0),b=d(0),u=d(0),n=d(0),N=d(0),v=d(0),I=d(0),w=d(0),y=d(0),t=d(0),_=d(0),s=B(()=>{switch(t.value=l.value.tcInfo.sHeading,c.value=l.value.tcInfo.sCurSpeed,u.value=l.value.tcInfo.uWorkState,u.value===1?u.value="运行":u.value===2?u.value="挂起":u.value===3?u.value="静态OP":u.value===4?u.value="充电":u.value===5?u.value="等待":u.value===6?u.value="睡眠":u.value===0?u.value="空闲":u.value===7&&(u.value="唤醒"),n.value=l.value.tcInfo.ucEventState,n.value){case 0:n.value="无故障";break;case 1:n.value=" 自旋误差超限";break;case 2:n.value="导航误差超限";break;case 3:n.value="位置校验失败";break;case 4:n.value="地标信号异常";break;case 5:n.value="磁导航通讯超时";break;case 6:n.value="惯导信息故障";break;case 7:n.value="定位模块通讯中断";break;case 30:n.value="CAN通讯超时";break;case 31:n.value="CanOpen伺服故障";break;case 32:n.value="舵碰限位";break;case 33:n.value="车轮过热";break;case 34:n.value="自制伺服故障";break;case 35:n.value="Mcu重启";break;case 36:n.value="IO检测板故障";break;case 37:n.value="机械臂网络连接断开";break;case 60:n.value="车载设备故障";break;case 61:n.value="设备车体互锁";break;case 90:n.value="伺服电源故障";break;case 91:n.value="用户紧急停车";break;case 92:n.value="硬件保险杠碰撞";break;case 93:n.value="PLS近距离急停";break;case 94:n.value="PLS中距离停车";break;case 95:n.value="PLS切区错误";break;case 96:n.value="3D相机状态错误";break;case 97:n.value="软pls状态错误";break;case 120:n.value="控制台挂起";break;case 121:n.value="网络通讯超时";break;case 122:n.value="控制台任务删除";break;case 123:n.value="禁止上线";break;case 124:n.value="AGV紧急停车";break;case 125:n.value="任务错误";break;case 150:n.value="电池电量低";break;case 151:n.value="电池电量太低";break;case 152:n.value="充电失败";break;case 153:n.value="电池系统故障";break;case 180:n.value="地图信息错误";break;case 210:n.value="用户暂停";break}return N.value=l.value.tcInfo.usEventDetail,N.value===0&&(N.value="无故障"),w.value=l.value.tcInfo.usTaskID,y.value=l.value.tcInfo.usKey,I.value=l.value.tcInfo.ucTaskState,l.value.nAgvState===3?I.value===1?I.value="开始":I.value===2?I.value="运行中":I.value===3&&(I.value="结束"):I.value="无任务",b.value=l.value.tcInfo.usCargoState,b.value===0?b.value="未载货":b.value===1&&(b.value="载货"),v.value=l.value.tcInfo.usBatterState,v.value===0?v.value="无需充电":v.value===1?v.value="正常电量":v.value===2?v.value="电量低":v.value===3&&(v.value="电量极低"),x.value=l.value.tcInfo.uFromNode,F.value=l.value.tcInfo.uToNode,r.value=l.value.tcInfo.sProgress,_.value=l.value.tcInfo.uTaskcode,[{key:"开始节点",value:x.value,key2:"目标节点",value2:F.value},{key:"当前进度量",value:r.value,key2:"控制台设置速度",value2:c.value},{key:"货物状态",value:b.value,key2:"工作状态",value2:u.value},{key:"1级故障码",value:n.value,key2:"2级故障码",value2:N.value},{key:"电池状态",value:v.value,key2:"",value2:""},{key:"任务状态",value:I.value,key2:"任务号",value2:w.value},{key:"动作key",value:y.value,key2:"heading",value2:t.value},{key:"动作码",value:_.value,key2:"",value2:""}]});return(i,a)=>{const p=pe,S=_e,g=ye,K=me;return Y(),H("div",null,[e(p,{class:"controlnav",type:"info",onClick:M},{default:o(()=>[V(" 控制台")]),_:1}),e(K,{modelValue:k.value,"onUpdate:modelValue":a[0]||(a[0]=C=>k.value=C),title:"控制台",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:o(()=>[e(Ze,{showUpBt:!0},{default:o(()=>[bl,e(g,{data:s.value,border:"",style:{width:"90%","margin-left":"5%","background-color":"rgba(255, 255, 255, 0.5)"},class:"datatabletc"},{default:o(()=>[e(S,{prop:"key",label:"控制台信息"}),e(S,{prop:"value"}),e(S,{prop:"key2"}),e(S,{prop:"value2"})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])])}}},xl=de(wl,[["__scopeId","data-v-da856e90"]]);const Sl=L=>(we("data-v-3eb28a0c"),L=L(),xe(),L),Il={key:0},Cl={key:1},El={class:"dianchi"},Nl={style:{width:"90%","margin-top":"3%","margin-left":"5%",display:"flex","justify-content":"space-between","align-items":"center"}},Ml={style:{display:"flex","margin-left":"0.5vw"}},Vl={style:{width:"90%","margin-top":"3%","margin-left":"5%",display:"flex","justify-content":"space-between","align-items":"center"}},Ll=Sl(()=>f("br",null,null,-1)),$l={__name:"conagv",setup(L){d("left");const k=d(null),M=()=>{var N={type:"reset",data:!0};console.log(JSON.stringify(N)),O({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(N)}).then(v=>{se.success("复位")}).catch(v=>{}).finally(()=>{})},x=N=>{k.value=N;var v={triswt:N};console.log(JSON.stringify(v)),console.log(typeof JSON.stringify(v)),O({method:"post",url:"/api/ctrl/triswt",data:JSON.stringify(v)}).then(I=>{}).catch(I=>{}).finally(()=>{})},F=d(!1),r=()=>{F.value=!0},c=d(!1),b=()=>{c.value=!c.value},u=d(0),n=B(()=>(l.value.nAgvState===0?u.value="加载中":l.value.nAgvState===1?u.value="空闲":l.value.nAgvState===2?u.value="手动":l.value.nAgvState===3&&(u.value="自动"),l.value.event.name===""?Ge.value=1:Ge.value=2,[{key:"车号",value:l.value.nAgvNum,key2:"模式",value2:u.value},{key:"开始路段",value:l.value.tcInfo.uFromNode,key2:"结束路段",value2:l.value.tcInfo.uToNode},{key:"理论位置",value:`(${l.value.tcInfo.iDevX},${l.value.tcInfo.iDevY})`,key2:"当前位置",value2:`(${l.value.navInfo.fRealX.toFixed(3)},${-l.value.navInfo.fRealY.toFixed(3)})`},{key:"事件",value:l.value.event.name,key2:"原因",value2:l.value.event.detail},{key:"建议",value:l.value.event.advise,key2:"",value2:""}]));return(N,v)=>{const I=pe,w=_e,y=ye,t=me;return Y(),H("div",{class:Ee(c.value?"agv2":"agv")},[f("div",{class:Ee(c.value?"table2":"table")},[e(I,{onClick:b,class:"button",type:"text"},{default:o(()=>[V(qe(c.value?"＋":"一"),1)]),_:1}),c.value?(Y(),H("div",Il," AGV ")):Ae("",!0),c.value?Ae("",!0):(Y(),H("div",Cl,[f("div",El,[e(Za)]),e(y,{data:n.value,border:"",class:"datatablecon"},{default:o(()=>[e(w,{prop:"key",label:"AGV"}),e(w,{prop:"value"}),e(w,{prop:"key2",label:"版本号"}),e(w,{prop:"value2"},{header:o(()=>[V(qe(T(l).nAgvVersion),1)]),_:1})]),_:1},8,["data"]),f("div",Nl,[e(I,{class:"fuwei",type:"info",onClick:M},{default:o(()=>[V("复位")]),_:1}),e(I,{class:"shoudongkongzhi",type:"info",onClick:r},{default:o(()=>[V("手动控制")]),_:1}),f("div",Ml,[e(I,{onClick:v[0]||(v[0]=_=>x(1)),label:"left",class:Ee([{active:k.value===1},{inactive:k.value!==1}]),type:"info"},{default:o(()=>[V("手动")]),_:1},8,["class"]),e(I,{onClick:v[1]||(v[1]=_=>x(2)),label:"mid",class:Ee([{active:k.value===2},{inactive:k.value!==2}]),type:"info"},{default:o(()=>[V("空闲")]),_:1},8,["class"]),e(I,{onClick:v[2]||(v[2]=_=>x(3)),label:"right",class:Ee([{active:k.value===3},{inactive:k.value!==3}]),type:"info"},{default:o(()=>[V("自动")]),_:1},8,["class"])])]),f("div",Vl,[e(ct),e(vt),e(ft),e(xl)])])),e(t,{modelValue:F.value,"onUpdate:modelValue":v[3]||(v[3]=_=>F.value=_),title:"手动控制",modal:!1,draggable:"","close-on-click-modal":!1,"modal-class":"kkk-dialog-class","custom-class":"ele-dialog"},{default:o(()=>[Ll,e(Ja)]),_:1},8,["modelValue"])],2)],2)}}},Fl=de($l,[["__scopeId","data-v-3eb28a0c"]]),Tl=f("br",null,null,-1),Kl={__name:"screen_info",setup(L,{expose:k}){const M=d(!1);k({handleMouseClick:r=>{const c=fe.intersectObjects([r]);c.length>0&&(console.log("modelname:",c[0].object.name),c[0].object.name==="screen"||c[0].object.name==="screen1"||c[0].object.name==="screen2"||c[0].object.name==="screen3"||c[0].object.name==="screen4"?M.value=!0:M.value=!1)}});const F=B(()=>[{key:"屏幕型号",value:"迪文屏幕",key2:"通讯类型",value2:"串口通讯",key3:"手控设备信息",value3:"无"}]);return(r,c)=>{const b=_e,u=ye,n=me;return Y(),Rt(n,{modelValue:M.value,"onUpdate:modelValue":c[0]||(c[0]=N=>M.value=N),title:"屏幕","custom-class":"ele-dialog",modal:!1},{default:o(()=>[Tl,e(u,{data:F.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:o(()=>[e(b,{prop:"key",label:"设备信息"}),e(b,{prop:"value"}),e(b,{prop:"key2"}),e(b,{prop:"value2"}),e(b,{prop:"key3"}),e(b,{prop:"value3"})]),_:1},8,["data"])]),_:1},8,["modelValue"])}}},ql=f("br",null,null,-1),Al=f("br",null,null,-1),Pl={__name:"wheel_info",setup(L,{expose:k}){const M=d(!1),x=d(!1);k({handleMouseClickwheel:c=>{const b=fe.intersectObjects([c]);b.length>0&&(b[0].object.name==="rightwheel"||b[0].object.name==="rightwheel1"||b[0].object.name==="rightwheel2"?M.value=!0:M.value=!1,b[0].object.name==="leftwheel"||b[0].object.name==="leftwheel1"||b[0].object.name==="leftwheel2"?x.value=!0:x.value=!1)}});const r=B(()=>[{key:"驱动内坐标X",value:362,key2:"驱动内坐标Y",value2:371},{key:"电机减速比",value:2700,key2:"车轮直径",value2:30},{key:"码盘线束",value:0,key2:"最大转速",value2:2500}]);return(c,b)=>{const u=_e,n=ye,N=me;return Y(),H(it,null,[e(N,{modelValue:M.value,"onUpdate:modelValue":b[0]||(b[0]=v=>M.value=v),title:"右轮","custom-class":"ele-dialog",modal:!1},{default:o(()=>[ql,e(n,{data:r.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:o(()=>[e(u,{prop:"key",label:"设备信息"}),e(u,{prop:"value"}),e(u,{prop:"key2"}),e(u,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"]),e(N,{modelValue:x.value,"onUpdate:modelValue":b[1]||(b[1]=v=>x.value=v),title:"左轮","custom-class":"ele-dialog",modal:!1},{default:o(()=>[Al,e(n,{data:r.value,border:"",style:{width:"90%","margin-left":"5%"}},{default:o(()=>[e(u,{prop:"key",label:"设备信息"}),e(u,{prop:"value"}),e(u,{prop:"key2"}),e(u,{prop:"value2"})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64)}}};class Ol extends kt{constructor(k){super(k),this.littleEndian=!0}load(k,M,x,F){const r=this,c=new bt(r.manager);c.setPath(r.path),c.setResponseType("arraybuffer"),c.setRequestHeader(r.requestHeader),c.setWithCredentials(r.withCredentials),c.load(k,function(b){try{M(r.parse(b))}catch(u){F?F(u):console.error(u),r.manager.itemError(k)}},x,F)}parse(k){function M(y,t){const _=y.length,s=new Uint8Array(t);let i=0,a=0,p,S,g;do if(p=y[i++],p<1<<5){if(p++,a+p>t)throw new Error("Output buffer is not large enough");if(i+p>_)throw new Error("Invalid compressed data");do s[a++]=y[i++];while(--p)}else{if(S=p>>5,g=a-((p&31)<<8)-1,i>=_)throw new Error("Invalid compressed data");if(S===7&&(S+=y[i++],i>=_))throw new Error("Invalid compressed data");if(g-=y[i++],a+S+2>t)throw new Error("Output buffer is not large enough");if(g<0)throw new Error("Invalid compressed data");if(g>=a)throw new Error("Invalid compressed data");do s[a++]=s[g++];while(--S+2)}while(i<_);return s}function x(y){const t={},_=y.search(/[\r\n]DATA\s(\S*)\s/i),s=/[\r\n]DATA\s(\S*)\s/i.exec(y.slice(_-1));if(t.data=s[1],t.headerLen=s[0].length+_,t.str=y.slice(0,t.headerLen),t.str=t.str.replace(/#.*/gi,""),t.version=/^VERSION (.*)/im.exec(t.str),t.fields=/^FIELDS (.*)/im.exec(t.str),t.size=/^SIZE (.*)/im.exec(t.str),t.type=/^TYPE (.*)/im.exec(t.str),t.count=/^COUNT (.*)/im.exec(t.str),t.width=/^WIDTH (.*)/im.exec(t.str),t.height=/^HEIGHT (.*)/im.exec(t.str),t.viewpoint=/^VIEWPOINT (.*)/im.exec(t.str),t.points=/^POINTS (.*)/im.exec(t.str),t.version!==null&&(t.version=parseFloat(t.version[1])),t.fields=t.fields!==null?t.fields[1].split(" "):[],t.type!==null&&(t.type=t.type[1].split(" ")),t.width!==null&&(t.width=parseInt(t.width[1])),t.height!==null&&(t.height=parseInt(t.height[1])),t.viewpoint!==null&&(t.viewpoint=t.viewpoint[1]),t.points!==null&&(t.points=parseInt(t.points[1],10)),t.points===null&&(t.points=t.width*t.height),t.size!==null&&(t.size=t.size[1].split(" ").map(function(a){return parseInt(a,10)})),t.count!==null)t.count=t.count[1].split(" ").map(function(a){return parseInt(a,10)});else{t.count=[];for(let a=0,p=t.fields.length;a<p;a++)t.count.push(1)}t.offset={};let i=0;for(let a=0,p=t.fields.length;a<p;a++)t.data==="ascii"?t.offset[t.fields[a]]=a:(t.offset[t.fields[a]]=i,i+=t.size[a]*t.count[a]);return t.rowSize=i,t}const F=new TextDecoder().decode(k),r=x(F),c=[],b=[],u=[],n=[],N=[],v=new wt;if(r.data==="ascii"){const y=r.offset,_=F.slice(r.headerLen).split(`
`);for(let s=0,i=_.length;s<i;s++){if(_[s]==="")continue;const a=_[s].split(" ");if(y.x!==void 0&&(c.push(parseFloat(a[y.x])),c.push(parseFloat(a[y.y])),c.push(parseFloat(a[y.z]))),y.rgb!==void 0){const p=r.fields.findIndex(J=>J==="rgb"),S=r.type[p],g=parseFloat(a[y.rgb]);let K=g;if(S==="F"){const J=new Float32Array(1);J[0]=g,K=new Int32Array(J.buffer)[0]}const C=(K>>16&255)/255,U=(K>>8&255)/255,j=(K>>0&255)/255;v.setRGB(C,U,j,Je),u.push(v.r,v.g,v.b)}y.normal_x!==void 0&&(b.push(parseFloat(a[y.normal_x])),b.push(parseFloat(a[y.normal_y])),b.push(parseFloat(a[y.normal_z]))),y.intensity!==void 0&&n.push(parseFloat(a[y.intensity])),y.label!==void 0&&N.push(parseInt(a[y.label]))}}if(r.data==="binary_compressed"){const y=new Uint32Array(k.slice(r.headerLen,r.headerLen+8)),t=y[0],_=y[1],s=M(new Uint8Array(k,r.headerLen+8,t),_),i=new DataView(s.buffer),a=r.offset;for(let p=0;p<r.points;p++){if(a.x!==void 0){const S=r.fields.indexOf("x"),g=r.fields.indexOf("y"),K=r.fields.indexOf("z");c.push(i.getFloat32(r.points*a.x+r.size[S]*p,this.littleEndian)),c.push(i.getFloat32(r.points*a.y+r.size[g]*p,this.littleEndian)),c.push(i.getFloat32(r.points*a.z+r.size[K]*p,this.littleEndian))}if(a.rgb!==void 0){const S=r.fields.indexOf("rgb"),g=i.getUint8(r.points*a.rgb+r.size[S]*p+2)/255,K=i.getUint8(r.points*a.rgb+r.size[S]*p+1)/255,C=i.getUint8(r.points*a.rgb+r.size[S]*p+0)/255;v.setRGB(g,K,C,Je),u.push(v.r,v.g,v.b)}if(a.normal_x!==void 0){const S=r.fields.indexOf("normal_x"),g=r.fields.indexOf("normal_y"),K=r.fields.indexOf("normal_z");b.push(i.getFloat32(r.points*a.normal_x+r.size[S]*p,this.littleEndian)),b.push(i.getFloat32(r.points*a.normal_y+r.size[g]*p,this.littleEndian)),b.push(i.getFloat32(r.points*a.normal_z+r.size[K]*p,this.littleEndian))}if(a.intensity!==void 0){const S=r.fields.indexOf("intensity");n.push(i.getFloat32(r.points*a.intensity+r.size[S]*p,this.littleEndian))}if(a.label!==void 0){const S=r.fields.indexOf("label");N.push(i.getInt32(r.points*a.label+r.size[S]*p,this.littleEndian))}}}if(r.data==="binary"){const y=new DataView(k,r.headerLen),t=r.offset;for(let _=0,s=0;_<r.points;_++,s+=r.rowSize){if(t.x!==void 0&&(c.push(y.getFloat32(s+t.x,this.littleEndian)),c.push(y.getFloat32(s+t.y,this.littleEndian)),c.push(y.getFloat32(s+t.z,this.littleEndian))),t.rgb!==void 0){const i=y.getUint8(s+t.rgb+2)/255,a=y.getUint8(s+t.rgb+1)/255,p=y.getUint8(s+t.rgb+0)/255;v.setRGB(i,a,p,Je),u.push(v.r,v.g,v.b)}t.normal_x!==void 0&&(b.push(y.getFloat32(s+t.normal_x,this.littleEndian)),b.push(y.getFloat32(s+t.normal_y,this.littleEndian)),b.push(y.getFloat32(s+t.normal_z,this.littleEndian))),t.intensity!==void 0&&n.push(y.getFloat32(s+t.intensity,this.littleEndian)),t.label!==void 0&&N.push(y.getInt32(s+t.label,this.littleEndian))}}const I=new ot;c.length>0&&I.setAttribute("position",new Te(c,3)),b.length>0&&I.setAttribute("normal",new Te(b,3)),u.length>0&&I.setAttribute("color",new Te(u,3)),n.length>0&&I.setAttribute("intensity",new Te(n,1)),N.length>0&&I.setAttribute("label",new xt(N,1)),I.computeBoundingSphere();const w=new nt({size:.005});return u.length>0&&(w.vertexColors=!0),new Ye(I,w)}}const Dl={class:"home"},Be=60,lt=500,zl={__name:"index",setup(L){const k=new Ft,M=d(null),x=d(null),F=d(null),r=d(null),c=d(null);d(null);const b=d(!1),u=d(null),n=()=>{O({method:"post",url:"/api/data/easylog",data:JSON.stringify({group:"siasun",account:"test",password:"123456"})}).then($=>{if(u.value=$.data,u.value.status!==204){if(l.value=u.value,at.value.push(l.value),!b.value)switch(b.value=!0,be.value=u.value.uAgvType,console.log("json:",u.value),console.log("car_type:",be.value),be.value){case 0:k.load("./main/test.glb",A=>{a=A.scene,a.rotation.set(0,ue.degToRad(90),0),C.add(a),ge(),he(),ae();const X=2,G=ue.degToRad(0),W=ue.degToRad(Be),le=32;S=new We(X,le,G,W);const Z=new Mt({color:65280,transparent:!0,opacity:.5});p=new Qe(S,Z),p.position.set(a.position.x,a.position.y+.3,a.position.z-.1),C.add(p)},A=>{},A=>{console.error("Error loading model:",A)});break;case 1:k.load("./main/v.glb",A=>{a=A.scene,a.rotation.set(0,ue.degToRad(90),0),C.add(a),Ie(),he(),ge(),console.log("4444444444444444")},A=>{},A=>{console.error("Error loading model:",A)});break;default:se.error("无匹配模型");break}J()}}).catch($=>{}).finally(()=>{}),jt.value=setTimeout(n,320)};Ke(()=>{n()});const N=new Ce(16777215,1);N.position.set(0,0,10);const v=new Ce(16777215,1);v.position.set(0,0,-10);const I=new Ce(16777215,1);I.position.set(10,0,0);const w=new Ce(16777215,1);w.position.set(-10,0,0);const y=new Ce(16777215,1);y.position.set(0,10,0);const t=new St({antialias:!0});t.setSize(window.innerWidth,window.innerHeight),t.setClearColor(16777215);const _=()=>{ne(),t.render(C,U),s&&s.update(),requestAnimationFrame(_)};let s,i,a,p,S,g=d(null);const K=new It,C=new Ct,U=new Et(75,window.innerWidth/window.innerHeight,.1,1e3);U.position.set(0,2,6);let j=null;const J=()=>{j&&C.remove(j);const E=new Vt({color:255,linewidth:1}),$=at.value.map(G=>new Lt(G.navInfo.fRealX.toFixed(3),0,-G.navInfo.fRealY.toFixed(3))),A=new ot().setFromPoints($);let X=new $t(A,E);C.add(X),j=X},ne=()=>{if(a&&l.value!==void 0&&!l.value.status){const E=l.value;a.position.set(E.navInfo.fRealX.toFixed(3),0,-E.navInfo.fRealY.toFixed(3));const $=new et(0,E.navInfo.fRealThita,0,"XYZ"),A=new tt().setFromEuler($);if(a.setRotationFromQuaternion(A),be.value===0){const X=new et(ue.degToRad(-90),0,E.navInfo.fRealThita-ue.degToRad(90-(180-Be)/2),"XYZ"),G=new tt().setFromEuler(X);p.setRotationFromQuaternion(G),p.position.set(a.position.x,a.position.y+.3,a.position.z-.1),ie()}}},ie=()=>{const $=ue.degToRad(0),A=ue.degToRad(Be),X=32;p.geometry.dispose(),S.dispose(),S=new We(1,X,$,A),p.geometry=S,C.remove(p),C.add(p)},Ie=()=>{a.traverse(E=>{E.name==="upDown"&&(E.position.y=l.value.equipmentInfo.rack.lifter_axis.fAxisPosition*1e3),E.name==="leftwheel"&&(E.rotation.z+=l.value.electricalModule.kinematic.drive[0].wheel.fServoSpeed.toFixed(5)*.5),E.name==="rightwheel"&&(E.rotation.z+=l.value.electricalModule.kinematic.drive[1].wheel.fServoSpeed.toFixed(5)*.5)}),requestAnimationFrame(Ie)},ge=()=>{a.traverse(E=>{if(E.name==="screen2"){const $=Math.random()*16777215;E.material.color.setHex($)}}),setTimeout(ge,500)};let R=1;const he=()=>{const $={1:{on:65280,off:16777215},2:{on:16711680,off:16777215}}[Ge.value],A=$.on,X=$.off,G=(W,le)=>{W.traverse(Z=>{Z instanceof Qe&&(Z.material.color.clone(),Z.material.color.set(le))})};a.traverse(W=>{W.name==="light"&&(R===1?G(W,A):G(W,X))}),R=1-R,setTimeout(he,1e3)},ae=()=>{a.traverse(E=>{if(E.name==="upDown"&&(E.rotation.y=(l.value.equipmentInfo.rack.turn_axis.fAxisPosition/1e3).toFixed(2),E.position.y=l.value.equipmentInfo.rack.lifter_axis.fAxisPosition+1e3),E.name==="leftwheel"&&(E.rotation.z+=l.value.electricalModule.kinematic.drive[0].wheel.fServoSpeed.toFixed(5)*.5),E.name==="rightwheel"&&(E.rotation.z+=l.value.electricalModule.kinematic.drive[1].wheel.fServoSpeed.toFixed(5)*.5),E.name==="turnnei")if(l.value.equipmentInfo.rack.turn_axis.bLevel){const $=new re({color:16711680});E.material=$}else{const $=new re({color:65280});E.material=$}if(E.name==="turnwai")if(l.value.equipmentInfo.rack.turn_axis.bZero){const $=new re({color:16711680});E.material=$}else{const $=new re({color:65280});E.material=$}if(E.name==="liftertop")if(l.value.equipmentInfo.rack.lifter_axis.bTop){const $=new re({color:16711680});E.material=$}else{const $=new re({color:65280});E.material=$}if(E.name==="lifterbuttom")if(l.value.equipmentInfo.rack.lifter_axis.bBottom){const $=new re({color:16711680});E.material=$}else{const $=new re({color:65280});E.material=$}}),requestAnimationFrame(ae)},oe=E=>{K.x=E.clientX/window.innerWidth*2-1,console.log("mouse.x:",K.x),console.log("event.clientX:",E.clientX),console.log("event.clientY:",E.clientY),K.y=-(E.clientY/window.innerHeight)*2+1,console.log("mouse.y:",K.y),fe.setFromCamera(K,U),a!==void 0&&fe.intersectObjects([a]).length>0},Me=()=>{},Ve=()=>{U.aspect=window.innerWidth/window.innerHeight,U.updateProjectionMatrix(),t.setSize(window.innerWidth,window.innerHeight)};Ke(()=>{window.addEventListener("resize",Ve),window.addEventListener("mousemove",oe),window.addEventListener("mouseout",Me),window.addEventListener("click",()=>{M.value.handleMouseClick(a)}),window.addEventListener("click",()=>{c.value.handleMouseClickwheel(a)}),window.addEventListener("click",()=>{x.value.handleMouseClicknav(a)}),window.addEventListener("click",()=>{F.value.handleMouseClickdev(a)}),window.addEventListener("click",()=>{r.value.handleMouseClickele(a)}),g.value.appendChild(t.domElement),i=new Nt(lt,lt),i.material.opacity=.8,i.material.transparent=!0,C.add(i),s=new Tt(U,t.domElement),s.update(),C.add(N),C.add(v),C.add(I),C.add(w),C.add(y),_()});const Le=()=>{const E=Pe.value.files,$=new Ol;for(let A=0;A<E.length;A++){const X=E[A];C.remove(...C.children.filter(W=>W instanceof Ye));const G=new FileReader;G.onload=W=>{const le=W.target.result;$.load(le,Z=>{const $e=new nt({color:16711680,size:.02});Z.material=$e,Z.rotation.set(-Math.PI/2+P.value.EX,P.value.EZ,-P.value.EY*(Math.PI/180)),Z.position.set(P.value.Xpianyi,P.value.Zpianyi,P.value.Ypianyi),Z.scale.set(1,1,1),Ne.value=Z,C.add(Z)})},G.readAsDataURL(X)}};return Ut(Xe,()=>{C.remove(...C.children.filter(E=>E instanceof Ye))}),(E,$)=>(Y(),H("div",Dl,[f("div",{class:"canvas-container",ref_key:"canvasDom",ref:g},null,512),e(Fl),e(Kl,{ref_key:"screenRef",ref:M},null,512),e(ct,{ref_key:"navwindows",ref:x},null,512),e(ft,{ref_key:"devwindows",ref:F},null,512),e(vt,{ref_key:"elewindows",ref:r},null,512),e(Pl,{ref_key:"wheelRef",ref:c},null,512),f("input",{type:"file",accept:".pcd",ref_key:"fileInput",ref:Pe,onChange:Le,multiple:"",style:{display:"none"}},null,544)]))}},ho=de(zl,[["__scopeId","data-v-c4a57648"]]);export{ho as default};
