import{_ as Q,aV as u,Q as S,o as m,c as y,a as s,b as e,f as t,F as N,aY as U,e as Y,bl as f,d9 as G,m as V,da as K,db as M,dc as P,dd as W,cw as k,E as X,l as Z,p as ee,q as le}from"./index-5c1b9294.js";/* empty css                */import"./el-form-item-4ed993c7.js";import"./el-tag-4da2eecc.js";import{E as ae,a as te}from"./el-select-21a76d32.js";import"./el-scrollbar-bd758228.js";import"./el-popper-6bb58a91.js";import{_ as oe}from"./DefinScrollbar-4c01818a.js";import{E as ne,a as se}from"./index-8b2af574.js";import"./index-5d802efd.js";import"./strings-549e1319.js";import"./isEqual-35145afc.js";import"./_Uint8Array-5904243b.js";import"./debounce-bfafc744.js";/* empty css                                                                       */import"./_initCloneObject-9690e85f.js";const d=x=>(ee("data-v-c0a82857"),x=x(),le(),x),de={class:"page-container main-view"},ue={class:"table-box content-container page-content-box",style:{"background-image":"linear-gradient(to bottom right, #d0dcdc95, #d5eedf17)"}},ie=d(()=>s("h2",{style:{"margin-top":"1%","margin-left":"1%"}},"⚠️CAN信号：",-1)),ce=d(()=>s("div",{class:"hengxian"},null,-1)),re=d(()=>s("h3",null,"  发送数据:",-1)),pe=d(()=>s("br",null,null,-1)),_e=d(()=>s("span",{style:{color:"red"}}," *",-1)),me=d(()=>s("span",{style:{color:"red"}}," *",-1)),ve=d(()=>s("br",null,null,-1)),he=d(()=>s("h3",null,"  数据查看:",-1)),ye=d(()=>s("br",null,null,-1)),fe=d(()=>s("span",{style:{color:"red"}}," *",-1)),be=d(()=>s("br",null,null,-1)),ge=d(()=>s("br",null,null,-1)),we={__name:"index",setup(x){const E=u(1),A=Array.from({length:8},(l,a)=>a+1),r=u([""]),O=l=>{r.value=Array.from({length:l},(a,n)=>r.value[n]||"")},F=S(()=>v.value.trim()!==""&&r.value.every(l=>l.trim()!=="")),i=u(!1);u("");const B=u([]),I=u(0),C=u(0),v=u(""),b=u([{value:""}]);u([{value:""}]);const J=()=>{b.value.push({value:""})},D=l=>{b.value.splice(l,1)},R=S(()=>b.value.some(l=>l.value==="")),j=()=>{v.value=v.value.replace(/[^0-9A-Fa-f]/g,"")},H=l=>{r.value[l]=r.value[l].replace(/[^0-9A-Fa-f]/g,"")},$=l=>{console.log(l),l.value=l.value.replace(/[^0-9A-Fa-f]/g,"")},T=()=>{var l={type:"checkcan",data:{can:I.value,msg:b.value.map(a=>a.value),flag:1}};console.log(JSON.stringify(l)),k({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(l)}).then(a=>{i.value=!0}).catch(a=>{}).finally(()=>{}),i.value=!0},q=()=>{var l={type:"sendcanmsg",data:{can:C.value,msg:r.value,id:v.value}};console.log(JSON.stringify(l)),k({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(l)}).then(a=>{}).catch(a=>{}).finally(()=>{})},z=()=>{B.value=[],i.value=!1;var l={type:"checkcanend",data:!0};console.log(JSON.stringify(l)),k({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(l)}).then(n=>{i.value=!1}).catch(n=>{}).finally(()=>{}),k({method:"get",url:"/api/download",params:{file:"outputcan.txt"},responseType:"blob"}).then(n=>{const g=new Blob([n.data],{type:"application/octet-stream"}),p=window.URL.createObjectURL(g),c=document.createElement("a");c.href=p,c.download="outputcan.txt",c.style.display="none",document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(p),document.body.removeChild(c)}).catch(n=>{}).finally(()=>{})};return u(null),(l,a)=>{const n=ae,g=te,p=ne,c=X,w=Z,L=se;return m(),y("div",de,[s("div",ue,[e(oe,{showUpBt:!0},{default:t(()=>[ie,ce,e(L,{"label-width":"120"},{default:t(()=>[re,pe,e(p,{label:"CAN线:"},{default:t(()=>[e(g,{modelValue:C.value,"onUpdate:modelValue":a[0]||(a[0]=o=>C.value=o),placeholder:"请选择",style:{width:"95%"}},{default:t(()=>[e(n,{label:"can0",value:0}),e(n,{label:"can1",value:1}),e(n,{label:"can2",value:2})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"帧ID:"},{default:t(()=>[e(c,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=o=>v.value=o),type:"text",maxlength:"3",placeholder:"16进制帧ID,例如:18a",style:{width:"35%"},onInput:j},null,8,["modelValue"]),_e,e(p,{label:"数据长度:",style:{"margin-left":"5%"}},{default:t(()=>[e(g,{modelValue:E.value,"onUpdate:modelValue":a[2]||(a[2]=o=>E.value=o),placeholder:"请选择数量",onChange:O,style:{width:"80%"}},{default:t(()=>[(m(!0),y(N,null,U(f(A),o=>(m(),Y(n,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{label:"(字节):"},{default:t(()=>[(m(!0),y(N,null,U(r.value,(o,_)=>(m(),y("div",{key:_,class:"input-container"},[e(c,{modelValue:r.value[_],"onUpdate:modelValue":h=>r.value[_]=h,placeholder:"数据",maxlength:"2",onInput:h=>H(_)},null,8,["modelValue","onUpdate:modelValue","onInput"]),me]))),128)),e(w,{type:"primary",style:{"margin-top":"2%",width:"90%"},onClick:q,disabled:!F.value,icon:f(G)},{default:t(()=>[V("发送")]),_:1},8,["disabled","icon"])]),_:1})]),_:1}),ve,e(L,{"label-width":"120"},{default:t(()=>[he,ye,e(p,{label:"CAN线:"},{default:t(()=>[e(g,{modelValue:I.value,"onUpdate:modelValue":a[3]||(a[3]=o=>I.value=o),placeholder:"请选择",style:{width:"95%"},disabled:i.value},{default:t(()=>[e(n,{label:"can0",value:0}),e(n,{label:"can1",value:1}),e(n,{label:"can2",value:2})]),_:1},8,["modelValue","disabled"])]),_:1}),e(p,{label:"帧ID:(0x)"},{default:t(()=>[(m(!0),y(N,null,U(b.value,(o,_)=>(m(),y("div",{key:_,style:{width:"95%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},[e(c,{modelValue:o.value,"onUpdate:modelValue":h=>o.value=h,type:"text",maxlength:"3",placeholder:"请输入需要查看的16进制帧ID,例如:18a",style:{width:"90%"},disabled:i.value,onInput:h=>$(o)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput"]),fe,e(w,{type:"danger",style:{"margin-left":"1%"},onClick:h=>D(_),icon:f(K),disabled:i.value},{default:t(()=>[V("删除")]),_:2},1032,["onClick","icon","disabled"])]))),128)),e(w,{type:"primary",style:{"margin-top":"2%",width:"90%"},onClick:J,icon:f(M),disabled:i.value},{default:t(()=>[V("增加条件")]),_:1},8,["icon","disabled"]),be,e(w,{type:"primary",style:{"margin-top":"2%",width:"90%"},onClick:T,disabled:R.value||i.value,icon:f(P)},{default:t(()=>[V("录制数据")]),_:1},8,["disabled","icon"]),ge,e(w,{onClick:z,type:"primary",style:{"margin-top":"2%",width:"90%"},icon:f(W),disabled:!i.value},{default:t(()=>[V("结束导出")]),_:1},8,["icon","disabled"])]),_:1})]),_:1})]),_:1})])])}}},Re=Q(we,[["__scopeId","data-v-c0a82857"]]);export{Re as default};
