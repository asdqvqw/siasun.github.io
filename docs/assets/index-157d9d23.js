import{o as T,c as D,bH as L,by as A,bl as t,a as n,m as e,b as c,f as b,bc as o,F as P,l as G,aV as V,n as Oe,g as qe,aK as we,_ as xe,p as ye,q as $e,bx as Pe,at as Ge}from"./index-ab1cc4cc.js";import{D as X,b as Be,S as Xe,P as He,W as Qe,M as O,c as Ye,G as je,ap as Je,A as ae,V as N,L as pe,B as he,a as ge,E as Z,Q as K,d as Ue}from"./three.module-a7ef14a7.js";import{G as We,D as ze,O as Ze}from"./DRACOLoader-49f0b318.js";import{i as R,p as k,s as I,c as Q,a as i,b as v,e as Ce,f as se,N as Ke,g as et,h as tt,j as nt,k as ot,l as lt,m as at,n as st,o as it,q as rt,r as ut,t as _t,u as ct,v as ee,w as dt,x as vt,y as mt,z as ft,A as Ee,B as ke,C as pt,D as ht,E as gt,F as bt,G as wt,H as xt,I as yt,J as $t,K as Ct,L as Et,M as kt,O as Vt,P as St,Q as Mt,R as It,S as be,T as Tt,U as Dt,V as Nt,W as Lt,X as Ft,Y as At,Z as Rt,_ as Ot,$ as qt,a0 as H,a1 as Pt,a2 as Y,a3 as j,a4 as ie,d as Gt}from"./bbb_Aqw.vue_vue_type_style_index_0_lang-85ce4cf9.js";import{E as J}from"./el-dialog-a4596f6b.js";import{i as Ve}from"./index-0f4036db.js";const Bt={class:"playorstop"},Xt={class:"event"},Ht={class:"replay"},Qt={class:"cameractrl"},Yt={__name:"contorl",setup(x){const u=()=>{Q.value=!Q.value,Q.value?controls.enabled=!1:controls.enabled=!0},d=()=>{i.value=0,v.value=[],v.value=Ce.concat()},p=()=>{k.value=!k.value},h=()=>{if(I.value){const f=v.value[i.value].logJson.event.name;for(;v.value[i.value].logJson.event.name===f&&!(i.value===v.value.length-1||i.value===0);)i.value++;se.value=1,I.value=!1}};return(f,a)=>{const r=G;return T(),D(P,null,[L(n("div",Bt,[e("播放暂停："),c(r,{disabled:t(I),onClick:p,class:"buttonstyle"},{default:b(()=>[e(o(t(k)?"继续":"暂停"),1)]),_:1},8,["disabled"])],512),[[A,!t(R)]]),L(n("div",Xt,[e("事件处理: "),c(r,{disabled:!t(I),onClick:h,class:"buttonstyle"},{default:b(()=>[e(o(t(I)?"跳过":"无事件"),1)]),_:1},8,["disabled"])],512),[[A,!t(R)]]),L(n("div",Ht,[e("重播："),c(r,{onClick:d,class:"buttonstyle"},{default:b(()=>[e("重播")]),_:1})],512),[[A,!t(R)]]),L(n("div",Qt,[e("镜头控制："),c(r,{onClick:u,class:"buttonstyle"},{default:b(()=>[e(o(t(Q)?"取消跟随":"跟随"),1)]),_:1})],512),[[A,!t(R)]])],64)}}};const jt=n("br",null,null,-1),Jt=n("br",null,null,-1),Ut=n("br",null,null,-1),Wt=n("br",null,null,-1),zt=n("br",null,null,-1),Zt=n("br",null,null,-1),Kt=n("br",null,null,-1),en=n("br",null,null,-1),tn=n("br",null,null,-1),nn=n("br",null,null,-1),on=n("br",null,null,-1),ln=n("br",null,null,-1),an=n("br",null,null,-1),sn={__name:"Contral_Net",setup(x){const u=V(!1),d=()=>{u.value=!0};return(p,h)=>{const f=G,a=J;return T(),D(P,null,[c(f,{class:"EXButton",onClick:d},{default:b(()=>[e("控制台")]),_:1}),c(a,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=r=>u.value=r),title:"控制台","custom-class":"custom-dialog"},{default:b(()=>[e(" 开始节点："+o(t(Ke)),1),jt,e(" 目标节点："+o(t(et)),1),Jt,e(" 当前进度量："+o(t(tt)),1),Ut,e(" 当前设置速度："+o(t(nt)),1),Wt,e(" 货物状态："+o(t(ot)),1),zt,e(" 工作状态："+o(t(lt)),1),Zt,e(" 1级故障码:"+o(t(at)),1),Kt,e(" 2级故障码:"+o(t(st)),1),en,e(" 电池状态："+o(t(it)),1),tn,e(" 任务状态："+o(t(rt)),1),nn,e(" 任务号："+o(t(ut)),1),on,e(" 动作key："+o(t(_t)),1),ln,e(" heading:"+o(t(ct)),1),an]),_:1},8,["modelValue"])],64)}}};const rn=n("br",null,null,-1),un=n("br",null,null,-1),_n=n("br",null,null,-1),cn=n("br",null,null,-1),dn=n("br",null,null,-1),vn=n("br",null,null,-1),mn=n("br",null,null,-1),fn={__name:"Info_box",setup(x){let u="AGV状态";return(d,p)=>t(ee)?(T(),D("div",{key:0,class:"info-text",style:Oe({left:t(Ee)+"px",top:t(ke)+"px"})},[e(o(t(u)),1),rn,e(" 车体软件版本："+o(),1),un,e(" 车号："+o(),1),_n,e(" 模式："+o(t(dt)),1),cn,e(" 事件："+o(t(vt)),1),dn,e(" 原因："+o(t(mt)),1),vn,e(" 建议："+o(t(ft)),1),mn],4)):qe("",!0)}};const pn=n("br",null,null,-1),hn=n("br",null,null,-1),gn=n("br",null,null,-1),bn=n("br",null,null,-1),wn=n("br",null,null,-1),xn=n("br",null,null,-1),yn=n("br",null,null,-1),$n=n("br",null,null,-1),Cn={__name:"AGV_device",setup(x){const u=V(!1),d=()=>{u.value=!0};return(p,h)=>{const f=G,a=J;return T(),D(P,null,[c(f,{class:"EXButtonDEV",onClick:d},{default:b(()=>[e("车体设备")]),_:1}),c(a,{modelValue:u.value,"onUpdate:modelValue":h[0]||(h[0]=r=>u.value=r),title:"车体设备","custom-class":"custom-dialog"},{default:b(()=>[e(" 当前设备状态："+o(t(pt)),1),pn,e(" 当前设备任务号："+o(t(ht)),1),hn,e(" 当前设备任务状态："+o(t(gt)),1),gn,e(" 当前设备故障码:  "+o(t(bt)),1),bn,e(" 当前设备动作步骤: "+o(t(wt)),1),wn,e(" 当前动作轴id: "+o(),1),xn,e(" 当前动作轴位置: "+o(),1),yn,e(" 当前动作轴开关状态: "+o(),1),$n]),_:1},8,["modelValue"])],64)}}};const En=n("br",null,null,-1),kn=n("br",null,null,-1),Vn=n("br",null,null,-1),Sn=n("br",null,null,-1),Mn=n("br",null,null,-1),In=n("br",null,null,-1),Tn=n("br",null,null,-1),Dn=n("br",null,null,-1),Nn=n("br",null,null,-1),Ln=n("div",{class:"bingzhuang",id:"main1",style:{width:"300px",height:"300px"}},null,-1),Fn={__name:"AGV_Nav",setup(x){const u=V(!1),d=()=>{u.value=!0},p=()=>{const h=document.getElementById("main1"),f=Ve(h),a=[{value:Math.round(Math.random()*1e3),name:"占用一"},{value:Math.round(Math.random()*1e3),name:"占用二"},{value:Math.round(Math.random()*1e3),name:"占用三"},{value:Math.round(Math.random()*1e3),name:"占用四"},{value:Math.round(Math.random()*1e3),name:"占用五"}],r={title:{text:"占用",textStyle:{color:"black"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"vertical",left:10,data:a.map(g=>g.name)},series:[{name:"测试数据",type:"pie",radius:"50%",center:["50%","50%"],data:a,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};setInterval(()=>{a.forEach(g=>{g.value=Math.round(Math.random()*1e3)}),f.setOption({series:[{data:a}]})},1e3),f.setOption(r)};return(h,f)=>{const a=G,r=J;return T(),D(P,null,[c(a,{class:"EXButtonNAV",onClick:d},{default:b(()=>[e("导航")]),_:1}),c(r,{modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=g=>u.value=g),title:"导航","custom-class":"custom-dialog",onOpened:p},{default:b(()=>[e(" 目标位置:"+o(t(xt))+" ",1),En,e(" 当前位置："+o(t(yt)),1),kn,e(" 理论位置："+o(t($t)),1),Vn,e(" 左右偏差："+o(t(Ct)),1),Sn,e(" 角度偏差："+o((t(Et)*180/Math.PI).toFixed(3)),1),Mn,e(" 导航软件版本："+o(t(kt)),1),In,e(" 导航环境模型版本："+o(t(Vt)),1),Tn,e(" 发送速度："+o(),1),Dn,e(" 发送舵角："+o(),1),Nn,Ln]),_:1},8,["modelValue"])],64)}}},An={__name:"Ele_chart",setup(x){const u=V(null),d=(()=>{let a=new Date,r=[],g=5;for(;g--;)r.unshift(a.toLocaleTimeString().replace(/^\D*/,"")),a=new Date(+a-500);return r})(),p=(()=>{let a=[],r=5;for(;r--;)a.push(Math.round(Math.random()*1e3));return a})(),h=(()=>{let a=[],r=5;for(;r--;)a.push(Math.round(Math.random()*1e3));return a})();let f={title:{text:"车速",textStyle:{color:"white"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#283b56"}}},legend:{},toolbox:{show:!0,feature:{dataView:{readOnly:!1},magicType:{type:["bar","line","stack"]},restore:{},saveAsImage:{}},bottom:10},xAxis:{type:"category",data:d,boundaryGap:!0},yAxis:{type:"value"},series:[{data:p,type:"line",name:"实际",color:"green",markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{data:h,name:"理论",type:"line",color:"yellow",markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}}]};return we(()=>{const a=Ve(u.value);setInterval(()=>{let r=1e3 .toFixed(2),g=new Date().toLocaleTimeString().replace(/^\D*/,"");d.shift(),d.push(g),p.shift(),p.push(r),h.shift(),h.push(200),a.setOption({xAxis:[{data:d}],series:[{data:p},{data:h}]})},400),a.setOption(f)}),(a,r)=>L((T(),D("div",{class:"chart",id:"main2",style:{width:100+"px",height:100+"px"},ref_key:"main2",ref:u},null,512)),[[A,!0]])}};const w=x=>(ye("data-v-ab8645bc"),x=x(),$e(),x),Rn=w(()=>n("br",null,null,-1)),On=w(()=>n("br",null,null,-1)),qn=w(()=>n("br",null,null,-1)),Pn=w(()=>n("br",null,null,-1)),Gn=w(()=>n("br",null,null,-1)),Bn=w(()=>n("br",null,null,-1)),Xn=w(()=>n("br",null,null,-1)),Hn=w(()=>n("br",null,null,-1)),Qn=w(()=>n("br",null,null,-1)),Yn=w(()=>n("br",null,null,-1)),jn=w(()=>n("br",null,null,-1)),Jn=w(()=>n("br",null,null,-1)),Un=w(()=>n("br",null,null,-1)),Wn=w(()=>n("br",null,null,-1)),zn=w(()=>n("br",null,null,-1)),Zn=w(()=>n("br",null,null,-1)),Kn=w(()=>n("br",null,null,-1)),eo={__name:"AGV_ELE",setup(x){const u=V(!1),d=()=>{u.value=!0},p=()=>{H.value<Pt.value-1?H.value++:H.value=0,console.log(H.value),be.value="驱动轴"+H.value.toString(),Y(),j()};return(h,f)=>{const a=G,r=J;return T(),D(P,null,[c(a,{class:"EXButtonELE",onClick:d},{default:b(()=>[e("电器模块")]),_:1}),c(r,{modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=g=>u.value=g),title:"电器模块","custom-class":"custom-dialog"},{default:b(()=>[e(" 保险杠状态："+o(t(St)),1),Rn,e(" 急停触发："+o(t(Mt)),1),On,e(" pls状态："+o(t(It)),1),qn,e(" 二维码信息："+o(),1),Pn,e(" 惯导："+o(),1),Gn,e(" 磁导航："+o(),1),Bn,e(" 电池："+o(),1),Xn,e(" 切换驱动单元："),c(a,{class:"buttonstyle",onClick:p},{default:b(()=>[e(o(t(be)),1)]),_:1}),Hn,e(" 轮伺服实际速度："+o(t(Tt)),1),Qn,e(" 轮伺服状态码："+o(t(Dt)),1),Yn,e(" 轮伺服错误码："+o(t(Nt)),1),jn,e(" 舵伺服实际位置："+o(t(Lt)),1),Jn,e(" 舵伺服状态码："+o(t(Ft)),1),Un,e(" 舵伺服错误码："+o(t(At)),1),Wn,e(" 舵限位开关："+o(t(Rt)),1),zn,e(" 舵限位开关："+o(t(Ot)),1),Zn,e(" 舵零位开关："+o(t(qt)),1),Kn,c(An)]),_:1},8,["modelValue"])],64)}}},to=xe(eo,[["__scopeId","data-v-ab8645bc"]]);const no={__name:"screen_info",setup(x,{expose:u}){const d=V(!1),p=V(!1);return u({handleMouseClick:f=>{const a=ie.intersectObjects([f]);a.length>0&&(console.log("modelname:",a[0].object.name),a[0].object.name==="screen"||a[0].object.name==="Material_14车体4-113"||a[0].object.name==="Material_18车体4-113"||a[0].object.name==="Material_3车体4-113"?(p.value=!0,d.value=!0):(d.value=!1,p.value=!1))}}),(f,a)=>{const r=J;return T(),D(P,null,[c(r,{modelValue:p.value,"onUpdate:modelValue":a[0]||(a[0]=g=>p.value=g),title:"屏幕2","custom-class":"custom-dialog2"},{default:b(()=>[e(" 显示屏幕相关信息2 ")]),_:1},8,["modelValue"]),c(r,{modelValue:d.value,"onUpdate:modelValue":a[1]||(a[1]=g=>d.value=g),title:"屏幕","custom-class":"custom-dialog3"},{default:b(()=>[e(" 显示屏幕相关信息 ")]),_:1},8,["modelValue"])],64)}}};const oo=x=>(ye("data-v-07034813"),x=x(),$e(),x),lo={class:"home"},ao={class:"choose"},so=oo(()=>n("div",{class:"choose-title"},"控制：",-1)),io={class:"file-upload"},ro={class:"singlestep"},uo={class:"logprocess"},_o=["disabled","max"],q=500,co={__name:"index",setup(x){V(0);const u=V(null),d=new We,p=new ze;p.setDecoderPath("https://asdqvqw.github.io/whwtest.github.io/draco/"),d.setDRACOLoader(p);const h=new X(16777215,1);h.position.set(0,0,10);const f=new X(16777215,1);f.position.set(0,0,-10);const a=new X(16777215,1);a.position.set(10,0,0);const r=new X(16777215,1);r.position.set(-10,0,0);const g=new X(16777215,1);g.position.set(0,10,0);let U,W,_,re=V(null),Se=7;const te=new Be,y=new Xe,F=new He(75,window.innerWidth/window.innerHeight,.1,1e3);F.position.set(0,2,6);const Me=l=>{const s=l.target.files[0],m=new FileReader;m.onload=$=>{const S=String($.target.result);Ie(S)},m.readAsText(s)},Ie=l=>{const s=l.split("[INFO | ");for(let m=1;m<s.length;m++){const $=s[m],S=$.indexOf("]"),E=$.substring(0,S).trim(),B=$.substring(S+3).trim(),C=JSON.parse(B),M=C.navInfo.fRealX.toFixed(3),de=C.navInfo.fRealY.toFixed(3),ve=0,me=(C.navInfo.fRealThita*180/Math.PI).toFixed(3),fe=0;v.value.push({logDateTime:E,logDateTimea:fe,logJson:C,realx:M,realy:de,realthita:me,realz:ve}),Ce.push({logDateTime:E,logDateTimea:fe,logJson:C,realx:M,realy:de,realthita:me,realz:ve})}R.value=!1,Gt.parsedLogData_b=v.value,Te()},Te=()=>{const l=new pe({color:255,linewidth:1}),s=v.value.map(M=>new N(M.realx,M.realz,M.realy)),m=new he().setFromPoints(s);let $=new ge(m,l);const S=new pe({color:16711680,linewidth:1}),E=v.value.map(M=>new N(M.logJson.tcInfo.iDevX/1e3,0,M.logJson.tcInfo.iDevY/1e3)),B=new he().setFromPoints(E);let C=new ge(B,S);i.value=0,y.add($),y.add(C),y.add(_),oe()},De=()=>{if(_&&i.value>0){i.value--;const l=v.value[i.value];_.position.set(l.realx,0,l.realy);const s=new Z(0,O.degToRad(v.value[i.value-1].realthita),0,"XYZ"),m=new K().setFromEuler(s);_.setRotationFromQuaternion(m),Y(),j()}},Ne=()=>{if(_&&k.value&&i.value>0){i.value--;const l=v.value[i.value];_.position.set(l.realx,0,l.realy);const s=new Z(0,O.degToRad(v.value[i.value-1].realthita),0,"XYZ"),m=new K().setFromEuler(s);_.setRotationFromQuaternion(m),Y(),j()}},Le=()=>{if(_&&k.value&&i.value<v.value.length-1){i.value++;const l=v.value[i.value];_.position.set(l.realx,0,l.realy);const s=new Z(0,O.degToRad(v.value[i.value+1].realthita),0,"XYZ"),m=new K().setFromEuler(s);_.setRotationFromQuaternion(m),Y(),j()}},Fe=l=>{te.x=l.clientX/window.innerWidth*2-1,te.y=-(l.clientY/window.innerHeight)*2+1,ie.setFromCamera(te,F),ie.intersectObjects([_]).length>0?(Ee.value=l.clientX+10,ke.value=l.clientY+10,ee.value=!0):ee.value=!1},Ae=()=>{ee.value=!1},z=new Qe({antialias:!0});z.setSize(window.innerWidth,window.innerHeight);const Re=()=>{if(_&&!k.value&&!I.value&&v.value[i.value]&&v.value[i.value+1]){i.value++;const l=v.value[i.value];_.position.set(l.realx,0,l.realy);const s=new Z(0,O.degToRad(v.value[i.value+1].realthita),0,"XYZ"),m=new K().setFromEuler(s);_.setRotationFromQuaternion(m),Y(),j(),v.value[i.value].logJson.nAgvState===3&&v.value[i.value].logJson.event.name!==""&&(se.value=2,I.value=!0)}};let ne=0;const oe=()=>{ne++,ne>=Se&&(Re(),ne=0),Q.value&&_&&(F.position.copy(_.position),F.position.y+=6,F.lookAt(_.position)),z.render(y,F),U&&U.update(),requestAnimationFrame(oe)};d.load("https://asdqvqw.github.io/whwtest.github.io/kivastation.gltf",l=>{let s=l.scene;s.position.set(9.25,0,1.7),s.scale.set(1.5,.8,.8),y.add(s)},l=>{console.log(l.loaded/l.total*100+"% loaded")},l=>{console.error("Error loading model:",l)}),d.load("https://asdqvqw.github.io/whwtest.github.io/kivastation.gltf",l=>{let s=l.scene;s.position.set(9.1,0,-3.5),s.scale.set(1.5,.8,.8),s.rotation.set(0,O.degToRad(180),0),y.add(s)},l=>{console.log(l.loaded/l.total*100+"% loaded")},l=>{console.error("Error loading model:",l)}),d.load("./main/test2.glb",l=>{_=l.scene,_.position.set(0,0,0),_.scale.set(1,.6,.7),_.rotation.set(0,O.degToRad(90),0),y.add(_),ue(),_e(),ce()},l=>{console.log(l.loaded/l.total*100+"% loaded")},l=>{console.error("Error loading model:",l)}),new Ye({color:255});const ue=()=>{_.traverse(l=>{l.name,l.name==="upDown"&&(l.rotation.y+=.01)}),requestAnimationFrame(ue)},_e=()=>{_.traverse(l=>{if(l.name==="screen"){const s=Math.random()*16777215;l.material.color.setHex(s)}}),setTimeout(_e,200)};let le=1;const ce=()=>{const s={1:{on:65280,off:16777215},2:{on:16711680,off:16777215}}[se.value],m=s.on,$=s.off,S=(E,B)=>{E.traverse(C=>{C instanceof Ue&&(C.material.color.clone(),C.material.color.set(B))})};_.traverse(E=>{E.name==="light"&&(le===1?S(E,m):S(E,$))}),le=1-le,setTimeout(ce,500)};return we(()=>{window.addEventListener("mousemove",Fe),window.addEventListener("mouseout",Ae),window.addEventListener("click",()=>{u.value.handleMouseClick(_)}),re.value.appendChild(z.domElement),W=new je(q,q),W.material.opacity=.3,W.material.transparent=!0,y.add(W);const l=new Je(q/2);y.add(l);const s=new ae(new N(1,0,0),new N(0,0,0),q/2,16711680),m=new ae(new N(0,0,0),new N(0,0,0),q/2,65280),$=new ae(new N(0,0,-1),new N(0,0,0),q/2,8388736);y.add(s,m,$),U=new Ze(F,z.domElement),U.update(),y.add(h),y.add(f),y.add(a),y.add(r),y.add(g),oe()}),(l,s)=>{const m=G;return T(),D("div",lo,[n("div",{class:"canvas-container",ref_key:"canvasDom",ref:re},null,512),n("div",ao,[so,L(n("div",io,[n("input",{ref:"importInput",type:"file",accept:".log",style:{display:"none"},onChange:Me},null,544),c(m,{onClick:s[0]||(s[0]=$=>l.$refs.importInput.click()),class:"buttonstyle"},{default:b(()=>[e(" 导入 ")]),_:1})],512),[[A,t(R)]]),c(Yt),L(n("div",ro,[e("单步运行： "),c(m,{disabled:!t(k)||t(i)===t(v).length+1,onClick:Ne,class:"buttonstyle"},{default:b(()=>[e(o(t(k)?"上一步":"请暂停"),1)]),_:1},8,["disabled"]),c(m,{disabled:!t(k)||t(i)===t(v).length-1,onClick:Le,class:"buttonstyle"},{default:b(()=>[e(o(t(k)?"下一步":"请暂停"),1)]),_:1},8,["disabled"])],512),[[A,!t(R)]]),c(fn)]),n("div",uo,[e(" 回放进度:"+o(t(I)?"请处理事件":"")+" ",1),L(n("input",{disabled:t(I),type:"range",style:{width:"100%"},"onUpdate:modelValue":s[1]||(s[1]=$=>Ge(i)?i.value=$:null),min:"0",max:t(v).length-1,step:"1",onChange:De},null,40,_o),[[Pe,t(i)]])]),c(Cn),c(to),c(Fn),c(no,{ref_key:"screenRef",ref:u},null,512),c(sn)])}}},bo=xe(co,[["__scopeId","data-v-07034813"]]);export{bo as default};
