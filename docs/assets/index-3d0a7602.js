import{_ as S,aV as l,o as C,c as E,a as n,b as o,f as c,bl as h,cw as b,E as T,l as O,m as g,cB as j,dd as q,da as z,g as J,p as A,q as G,cN as L,cv as H}from"./index-bef82f0e.js";/* empty css                        *//* empty css                    */import"./el-tag-8927c8cc.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-891820f9.js";import"./el-scrollbar-e41e7557.js";import{a as K,E as P}from"./index-6c4d92df.js";import"./Uint8Array-d7c98d02.js";import"./initCloneObject-ba528e70.js";import"./index-7dde30b4.js";import"./isEqual-504bd3c8.js";import"./debounce-cc98fddb.js";const y=i=>(A("data-v-9b2fa1ff"),i=i(),G(),i),Q={class:"page-container main-view"},W={class:"table-box content-container page-content-box",style:{"background-image":"linear-gradient(to bottom right, #d0dcdc95, #d5eedf17)"}},X=y(()=>n("h2",{style:{"margin-top":"1%","margin-left":"1%"}},"管理",-1)),Y=y(()=>n("div",{class:"hengxian"},null,-1)),Z={style:{display:"flex","align-items":"center"}},$=y(()=>n("br",null,null,-1)),ee={class:"button-container"},te={key:0},ae=["href"],oe={__name:"index",setup(i){const u=l(null),V=l(null),d=l(""),x=l(null),p=l(""),_=l(null),B=l(!1),w=()=>{let t={data:p.value};b({method:"post",url:"/api/get/files",data:JSON.stringify(t)}).then(e=>{x.value=e.data}).catch(e=>{}).finally(()=>{})},N=()=>{let t={file:d.value};b({method:"get",url:"/api/download",params:t,responseType:"blob"}).then(e=>{u.value=e.data,console.log("responseData",u.value);const f=new Blob([u.value],{type:"application/octet-stream"}),s=window.URL.createObjectURL(f),a=document.createElement("a");a.href=s,a.download=d.value,a.style.display="none",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}).catch(e=>{}).finally(()=>{})},U=(t,e)=>{L.confirm("下载文件？"+e.name,"提示").then(()=>{I(t,e)}).catch(()=>{})},D=(t,e)=>{L.confirm("删除文件？"+e.name,"提示").then(()=>{F(t,e)}).catch(()=>{})},I=(t,e)=>{t.preventDefault(),_.value=e,_.value&&(d.value=_.value.name,console.log("1111",d.value),N())},m=l(null),k=l(""),F=(t,e)=>{t.preventDefault(),m.value=e,m.value&&(k.value=m.value.name,M())},M=()=>{let t={dele:k.value};b({method:"get",url:"/api/download",params:t}).then(e=>{H.success("删除成功")}).catch(e=>{}).finally(()=>{}),w()};return(t,e)=>{const f=T,s=O,a=P,R=K;return C(),E("div",Q,[n("div",W,[X,Y,n("div",Z,[o(f,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=r=>p.value=r),style:{width:"70%","margin-right":"4%","margin-left":"2%","margin-top":"0%"},placeholder:"🤪文件名.."},null,8,["modelValue"]),o(s,{onClick:w,type:"primary",style:{width:"15%","margin-top":"0%"},icon:h(j)},{default:c(()=>[g("搜索")]),_:1},8,["icon"])]),$,o(R,{data:x.value},{default:c(()=>[o(a,{prop:"name",label:"文件名"}),o(a,{prop:"created",label:"创建时间"}),o(a,{prop:"modified",label:"修改时间"}),o(a,{prop:"size",label:"文件大小"}),o(a,{label:"操作"},{default:c(({row:r})=>[n("div",ee,[o(s,{type:"success",onClick:v=>U(v,r),icon:h(q)},{default:c(()=>[g("下载")]),_:2},1032,["onClick","icon"]),B.value?(C(),E("div",te,[o(s,{type:"danger",onClick:v=>D(v,r),icon:h(z)},{default:c(()=>[g("删除")]),_:2},1032,["onClick","icon"])])):J("",!0)])]),_:1})]),_:1},8,["data"]),n("a",{ref:"downloadLink",style:{display:"none"},href:V.value,download:""},null,8,ae)])])}}},he=S(oe,[["__scopeId","data-v-9b2fa1ff"]]);export{he as default};
