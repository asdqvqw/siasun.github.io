import{aV as h,bB as ce,o as U,c as S,F as P,aY as L,b as e,f as a,a as b,bc as T,m as c,g as q,E as Y,_ as le,bl as r,ct as G,l as z,p as ae,q as oe,bC as pe,Q as fe,e as re,cu as ue}from"./index-9c50c20e.js";import{E as X,a as Z}from"./el-table-column-82e0ec7b.js";/* empty css                    */import"./el-tag-e8a255d0.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-757f1225.js";import"./el-scrollbar-67d8ba2e.js";import{E as ne}from"./el-dialog-4f7eacff.js";import{_ as te}from"./DefinScrollbar-0bfae650.js";import{I as j,j as M,a as H,s as y,c as _e,E as be}from"./common-d5c8790e.js";/* empty css                */import{E as ie,a as de}from"./el-form-item-9477a5b7.js";import{E as se,a as ve}from"./el-select-8cc0ea64.js";/* empty css                 */import{E as ge}from"./index-d62db68e.js";import{E as Ve}from"./el-switch-12874a71.js";import"./_Uint8Array-9039b792.js";import"./_initCloneObject-fc5d75dc.js";import"./index-75039972.js";import"./isEqual-545b4e07.js";import"./debounce-21887a8c.js";/* empty css                                                                       */import"./index-7345dbc5.js";const Q=h(!1),W=h(!1),g=h({name:"",key:"",config:[1,1,1,1,1,1],editingIndex:-1}),m=h({name:"",key:"",config:[1,1,1,1,1,1],editingIndex:-1});h(!1);h({name:"",value:[1,1,1,1,1,1],editingIndex:-1});const l=h({name:"",key:"",config:{portID:0,unitID:0,canID:0,axisID:0,ratio:0,encoder:0,unitDist:0,maxRPM:0,normalvel:0,slowvel:0,neartarget:0,ontarget:0,motorDir:0,encoderDir:0,originmode:0,maxHeight:0,radius:0,isturn:0,syncFineVel:0,syncDir:0,syncVelRatioUp:0,steadyHeight:0},editingIndex:-1});h({id:-1,note:"",taskList:[],editingIndex:-1});const ye={key:0},Ie=b("br",null,null,-1),he=b("br",null,null,-1),ke=b("br",null,null,-1),we={key:1},xe=b("br",null,null,-1),Ce=b("br",null,null,-1),Ue=b("br",null,null,-1),Se={key:2},De=b("br",null,null,-1),$e=b("br",null,null,-1),Ne={key:3},Oe=b("br",null,null,-1),Re=b("br",null,null,-1),Ee=b("br",null,null,-1),Ae={key:4},Me=b("br",null,null,-1),Te={__name:"IO",setup(A){const s=h("1"),$=h(!0),N=h(!1),O=h(!1),R=h(!1),v=h(!1),o=h("1"),_=h("1"),V=h("1"),k=h("1"),d=h(""),p=h(""),f=()=>{if(s.value==="2"||s.value==="3"||s.value==="5")g.value.config=[parseInt(s.value),parseInt(o.value),parseInt(_.value),parseInt(V.value),parseInt(k.value)];else if(s.value==="1")g.value.config=[parseInt(s.value),0,parseInt(o.value),parseInt(_.value),parseInt(V.value)];else if(s.value==="4"){const x=parseInt(o.value,16);d.value=isNaN(x)?"":x.toString(),g.value.config=[parseInt(s.value),0,0,parseInt(d.value),parseInt(_.value)]}console.log("generateJSON",g.value.config)},D=[{label:"本地IO",value:"1"},{label:"CAN-POS",value:"2"},{label:"CAN-OPEN",value:"3"},{label:"GPIO",value:"4"},{label:"CAN-IO",value:"5"}],I=[{label:"CAN1",value:"0"},{label:"CAN2",value:"1"},{label:"CAN3",value:"2"}],u=()=>{if(g.value.config.value!==void 0){if(g.value.config.value[0]===2||g.value.config.value[0]===3||g.value.config.value[0]===5)s.value=g.value.config.value[0].toString(),o.value=g.value.config.value[1].toString(),_.value=g.value.config.value[2].toString(),V.value=g.value.config.value[3].toString(),k.value=g.value.config.value[4].toString(),C();else if(g.value.config.value[0]===1)s.value=g.value.config.value[0].toString(),o.value=g.value.config.value[2].toString(),_.value=g.value.config.value[3].toString(),V.value=g.value.config.value[4].toString(),C();else if(g.value.config.value[0]===4){s.value=g.value.config.value[0].toString();const x=parseInt(g.value.config.value[3],10);p.value=isNaN(x)?"":x.toString(16),o.value=p.value.toString(),_.value=g.value.config.value[4].toString(),C()}}else if(g.value.config!==void 0){if(g.value.config[0]===2||g.value.config[0]===3||g.value.config[0]===5)s.value=g.value.config[0].toString(),o.value=g.value.config[1].toString(),_.value=g.value.config[2].toString(),V.value=g.value.config[3].toString(),k.value=g.value.config[4].toString(),C();else if(g.value.config[0]===1)s.value=g.value.config[0].toString(),o.value=g.value.config.value[2].toString(),_.value=g.value.config.value[3].toString(),V.value=g.value.config.value[4].toString(),C();else if(g.value.config[0]===4){s.value=g.value.config[0].toString();const x=parseInt(g.value.config[3],10);p.value=isNaN(x)?"":x.toString(16),o.value=p.value.toString(),_.value=g.value.config.value[4].toString(),C()}}else s.value="1",o.value="1",_.value="1",V.value="1",k.value="1",C(),console.log("putJSONelse")},C=()=>{switch(console.log("handleChange",s.value),s.value){case"1":$.value=!0,N.value=!1,O.value=!1,R.value=!1,v.value=!1,f();return;case"2":$.value=!1,N.value=!0,O.value=!1,R.value=!1,v.value=!1,f();return;case"3":$.value=!1,N.value=!1,O.value=!0,R.value=!1,v.value=!1,f();return;case"4":$.value=!1,N.value=!1,O.value=!1,R.value=!0,v.value=!1,f();return;case"5":$.value=!1,N.value=!1,O.value=!1,R.value=!1,v.value=!0,f();return}};u();let F=0;return ce(Q,()=>{const x=Date.now();x-F>=700&&(u(),F=x)}),(x,n)=>{const E=ge,t=se,w=ve,K=Y;return U(),S("div",null,[(U(),S(P,null,L(D,(i,B)=>e(E,{key:B,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=J=>s.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,T(i.label),1)]),_:2},1032,["modelValue","label"])),64)),N.value?(U(),S("div",ye,[c(" 远程模块连接到: "),(U(),S(P,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,T(i.label),1)]),_:2},1032,["modelValue","label"])),64)),Ie,c(" CAN-POS模块编号: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[2]||(n[2]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),he,c(" 模块内输出点编号: "),e(w,{modelValue:V.value,"onUpdate:modelValue":n[3]||(n[3]=i=>V.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),ke,c(" 信号极性: "),e(w,{modelValue:k.value,"onUpdate:modelValue":n[4]||(n[4]=i=>k.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),O.value?(U(),S("div",we,[c(" 远程模块连接到: "),(U(),S(P,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,T(i.label),1)]),_:2},1032,["modelValue","label"])),64)),xe,c(" CAN-OPEN模块编号: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[6]||(n[6]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Ce,c(" 模块内输出点编号: "),e(w,{modelValue:V.value,"onUpdate:modelValue":n[7]||(n[7]=i=>V.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Ue,c(" 信号极性: "),e(w,{modelValue:k.value,"onUpdate:modelValue":n[8]||(n[8]=i=>k.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),$.value?(U(),S("div",Se,[c(" 本地IO地址: "),e(K,{modelValue:o.value,"onUpdate:modelValue":n[9]||(n[9]=i=>o.value=i),type:"number",onChange:f},null,8,["modelValue"]),De,c(" 输出点对应位: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[10]||(n[10]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"BIT1",value:"0"}),e(t,{label:"BIT2",value:"1"}),e(t,{label:"BIT3",value:"2"}),e(t,{label:"BIT4",value:"3"}),e(t,{label:"BIT5",value:"4"}),e(t,{label:"BIT6",value:"5"}),e(t,{label:"BIT7",value:"6"})]),_:1},8,["modelValue"]),$e,c(" 信号极性: "),e(w,{modelValue:V.value,"onUpdate:modelValue":n[11]||(n[11]=i=>V.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),v.value?(U(),S("div",Ne,[c(" 远程模块连接到: "),(U(),S(P,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[12]||(n[12]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,T(i.label),1)]),_:2},1032,["modelValue","label"])),64)),Oe,c(" CAN-IO模块编号: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[13]||(n[13]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Re,c(" 模块内输出点编号: "),e(w,{modelValue:V.value,"onUpdate:modelValue":n[14]||(n[14]=i=>V.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Ee,c(" 信号极性: "),e(w,{modelValue:k.value,"onUpdate:modelValue":n[15]||(n[15]=i=>k.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),R.value?(U(),S("div",Ae,[c(" 输入点对应位: "),e(K,{modelValue:o.value,"onUpdate:modelValue":n[16]||(n[16]=i=>o.value=i),onChange:f},null,8,["modelValue"]),Me,c(" 信号极性: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[17]||(n[17]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0)])}}};const Be=A=>(ae("data-v-f4bd165c"),A=A(),oe(),A),Je=Be(()=>b("br",null,null,-1)),Pe={slot:"footer",class:"dialog-footer"},je={__name:"index",setup(A){const s=h(!1),$=()=>{g.value.name="",g.value.key="",g.value.config.value=[1,1,1,1,1,1],g.value.editingIndex=-1,console.log("addNewRow",g.value.config.value),s.value=!0,Q.value=!Q.value},N=v=>{g.value.name=j.value[v].name,g.value.key=j.value[v].key,g.value.config.value=j.value[v].config,g.value.editingIndex=v,console.log("reedit",g.value.config.value),s.value=!0,Q.value=!Q.value},O=()=>{if(g.value.name){if(g.value.editingIndex!==-1)j.value[g.value.editingIndex].name=g.value.name,j.value[g.value.editingIndex].key=g.value.key,g.value.config!=null&&(j.value[g.value.editingIndex].config=g.value.config),M.value.IO.input=j,console.log("handleAddRow",g.value.config),console.log("handleAddRow",j.value[g.value.editingIndex].config);else{const v={...g.value};j.value.push(JSON.parse(JSON.stringify(v))),M.value.IO.input=j,console.log("handleAddRow",v)}s.value=!1}else G.error("请填写完整数据")},R=v=>{j.value.splice(v,1)};return(v,o)=>{const _=z,V=X,k=Z,d=Y,p=ie,f=de,D=ne;return U(),S(P,null,[e(k,{data:r(j),style:{width:"100%"},class:"IOinputdata"},{default:a(()=>[e(V,{prop:"key",label:"⚠️ 输入点IO"},{default:a(I=>[e(_,{type:"text",onClick:u=>N(I.$index)},{default:a(()=>[c(T(r(j)[I.$index].key),1)]),_:2},1032,["onClick"])]),_:1}),e(V,{prop:"name"},{header:a(()=>[e(_,{type:"primary",onClick:$},{default:a(()=>[c("添加新数据")]),_:1})]),_:1}),e(V,{prop:"config",label:"输入点"},{default:a(I=>[b("h4",null,T(I.row.config),1)]),_:1}),e(V,{label:"操作"},{default:a(I=>[e(_,{type:"danger",onClick:u=>R(I.$index)},{default:a(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(D,{title:"添加数据",modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=I=>s.value=I),visible:s.value,width:"900px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"55%"}},{default:a(()=>[Je,e(f,{ref:"form",model:r(g),"label-width":"80px"},{default:a(()=>[e(p,{label:"名称"},{default:a(()=>[e(d,{modelValue:r(g).key,"onUpdate:modelValue":o[0]||(o[0]=I=>r(g).key=I),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(p,{label:"key"},{default:a(()=>[e(d,{modelValue:r(g).name,"onUpdate:modelValue":o[1]||(o[1]=I=>r(g).name=I),placeholder:"英文KEY"},null,8,["modelValue"])]),_:1}),e(p,{label:"IO"},{default:a(()=>[e(Te)]),_:1})]),_:1},8,["model"]),b("div",Pe,[e(_,{onClick:o[2]||(o[2]=I=>s.value=!1),style:{"margin-left":"75%"}},{default:a(()=>[c("取 消")]),_:1}),e(_,{type:"primary",onClick:O},{default:a(()=>[c("确定")]),_:1})])]),_:1},8,["modelValue","visible"])],64)}}},He=le(je,[["__scopeId","data-v-f4bd165c"]]),Le={key:0},Fe=b("br",null,null,-1),qe=b("br",null,null,-1),Ge=b("br",null,null,-1),Ye={key:1},Ke=b("br",null,null,-1),Qe=b("br",null,null,-1),We=b("br",null,null,-1),ze={key:2},Xe=b("br",null,null,-1),Ze=b("br",null,null,-1),el={key:3},ll=b("br",null,null,-1),al=b("br",null,null,-1),ol=b("br",null,null,-1),nl={key:4},ul=b("br",null,null,-1),tl={__name:"IO",setup(A){const s=h("1"),$=h(!0),N=h(!1),O=h(!1),R=h(!1),v=h(!1),o=h("1"),_=h("1"),V=h("1"),k=h("1"),d=h(""),p=h(""),f=()=>{if(s.value==="2"||s.value==="3"||s.value==="5")m.value.config=[parseInt(s.value),parseInt(o.value),parseInt(_.value),parseInt(V.value),parseInt(k.value)];else if(s.value==="1")m.value.config=[parseInt(s.value),0,parseInt(o.value),parseInt(_.value),parseInt(V.value)];else if(s.value==="4"){const x=parseInt(o.value,16);d.value=isNaN(x)?"":x.toString(),m.value.config=[parseInt(s.value),0,0,parseInt(d.value),parseInt(_.value)]}console.log("generateJSON",m.value.config)},D=[{label:"本地IO",value:"1"},{label:"CAN-POS",value:"2"},{label:"CAN-OPEN",value:"3"},{label:"GPIO",value:"4"},{label:"CAN-IO",value:"5"}],I=[{label:"CAN1",value:"0"},{label:"CAN2",value:"1"},{label:"CAN3",value:"2"}],u=()=>{if(m.value.config.value!==void 0){if(m.value.config.value[0]===2||m.value.config.value[0]===3||m.value.config.value[0]===5)s.value=m.value.config.value[0].toString(),o.value=m.value.config.value[1].toString(),_.value=m.value.config.value[2].toString(),V.value=m.value.config.value[3].toString(),k.value=m.value.config.value[4].toString(),C();else if(m.value.config.value[0]===1)s.value=m.value.config.value[0].toString(),o.value=m.value.config.value[2].toString(),_.value=m.value.config.value[3].toString(),V.value=m.value.config.value[4].toString(),C();else if(m.value.config.value[0]===4){s.value=m.value.config.value[0].toString();const x=parseInt(m.value.config.value[3],10);p.value=isNaN(x)?"":x.toString(16),o.value=p.value.toString(),_.value=m.value.config.value[4].toString(),C()}}else if(m.value.config!==void 0){if(m.value.config[0]===2||m.value.config[0]===3||m.value.config[0]===5)s.value=m.value.config[0].toString(),o.value=m.value.config[1].toString(),_.value=m.value.config[2].toString(),V.value=m.value.config[3].toString(),k.value=m.value.config[4].toString(),C();else if(m.value.config[0]===1)s.value=m.value.config[0].toString(),o.value=m.value.config.value[2].toString(),_.value=m.value.config.value[3].toString(),V.value=m.value.config.value[4].toString(),C();else if(m.value.config[0]===4){s.value=m.value.config[0].toString();const x=parseInt(m.value.config[3],10);p.value=isNaN(x)?"":x.toString(16),o.value=p.value.toString(),_.value=m.value.config.value[4].toString(),C()}}else s.value="1",o.value="1",_.value="1",V.value="1",k.value="1",C(),console.log("putJSONelse")},C=()=>{switch(console.log("handleChange",s.value),s.value){case"1":$.value=!0,N.value=!1,O.value=!1,R.value=!1,v.value=!1,f();return;case"2":$.value=!1,N.value=!0,O.value=!1,R.value=!1,v.value=!1,f();return;case"3":$.value=!1,N.value=!1,O.value=!0,R.value=!1,v.value=!1,f();return;case"4":$.value=!1,N.value=!1,O.value=!1,R.value=!0,v.value=!1,f();return;case"5":$.value=!1,N.value=!1,O.value=!1,R.value=!1,v.value=!0,f();return}};u();let F=0;return ce(W,()=>{const x=Date.now();x-F>=700&&(u(),F=x)}),(x,n)=>{const E=ge,t=se,w=ve,K=Y;return U(),S("div",null,[(U(),S(P,null,L(D,(i,B)=>e(E,{key:B,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=J=>s.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,T(i.label),1)]),_:2},1032,["modelValue","label"])),64)),N.value?(U(),S("div",Le,[c(" 远程模块连接到: "),(U(),S(P,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,T(i.label),1)]),_:2},1032,["modelValue","label"])),64)),Fe,c(" CAN-POS模块编号: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[2]||(n[2]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),qe,c(" 模块内输出点编号: "),e(w,{modelValue:V.value,"onUpdate:modelValue":n[3]||(n[3]=i=>V.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Ge,c(" 信号极性: "),e(w,{modelValue:k.value,"onUpdate:modelValue":n[4]||(n[4]=i=>k.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),O.value?(U(),S("div",Ye,[c(" 远程模块连接到: "),(U(),S(P,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,T(i.label),1)]),_:2},1032,["modelValue","label"])),64)),Ke,c(" CAN-OPEN模块编号: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[6]||(n[6]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Qe,c(" 模块内输出点编号: "),e(w,{modelValue:V.value,"onUpdate:modelValue":n[7]||(n[7]=i=>V.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),We,c(" 信号极性: "),e(w,{modelValue:k.value,"onUpdate:modelValue":n[8]||(n[8]=i=>k.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),$.value?(U(),S("div",ze,[c(" 本地IO地址: "),e(K,{modelValue:o.value,"onUpdate:modelValue":n[9]||(n[9]=i=>o.value=i),type:"number",onChange:f},null,8,["modelValue"]),Xe,c(" 输出点对应位: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[10]||(n[10]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"BIT1",value:"0"}),e(t,{label:"BIT2",value:"1"}),e(t,{label:"BIT3",value:"2"}),e(t,{label:"BIT4",value:"3"}),e(t,{label:"BIT5",value:"4"}),e(t,{label:"BIT6",value:"5"}),e(t,{label:"BIT7",value:"6"})]),_:1},8,["modelValue"]),Ze,c(" 信号极性: "),e(w,{modelValue:V.value,"onUpdate:modelValue":n[11]||(n[11]=i=>V.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),v.value?(U(),S("div",el,[c(" 远程模块连接到: "),(U(),S(P,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[12]||(n[12]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,T(i.label),1)]),_:2},1032,["modelValue","label"])),64)),ll,c(" CAN-IO模块编号: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[13]||(n[13]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),al,c(" 模块内输出点编号: "),e(w,{modelValue:V.value,"onUpdate:modelValue":n[14]||(n[14]=i=>V.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),ol,c(" 信号极性: "),e(w,{modelValue:k.value,"onUpdate:modelValue":n[15]||(n[15]=i=>k.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),R.value?(U(),S("div",nl,[c(" 输入点对应位: "),e(K,{modelValue:o.value,"onUpdate:modelValue":n[16]||(n[16]=i=>o.value=i),onChange:f},null,8,["modelValue"]),ul,c(" 信号极性: "),e(w,{modelValue:_.value,"onUpdate:modelValue":n[17]||(n[17]=i=>_.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0)])}}};const il=A=>(ae("data-v-0ecb7fb1"),A=A(),oe(),A),dl=il(()=>b("br",null,null,-1)),sl={slot:"footer",class:"dialog-footer"},vl={__name:"index",setup(A){const s=h(!1),$=()=>{m.value.name="",m.value.key="",m.value.config.value=[1,1,1,1,1,1],m.value.editingIndex=-1,console.log("addnewoutRow",m.value.config.value),s.value=!0,W.value=!W.value},N=v=>{m.value.name=H.value[v].name,m.value.key=H.value[v].key,m.value.config.value=H.value[v].config,m.value.editingIndex=v,console.log("reedit",m.value.config.value),s.value=!0,W.value=!W.value},O=()=>{if(m.value.name){if(m.value.editingIndex!==-1)H.value[m.value.editingIndex].name=m.value.name,H.value[m.value.editingIndex].key=m.value.key,m.value.config!=null&&(H.value[m.value.editingIndex].config=m.value.config),M.value.IO.output=H,console.log("handleAddRow",m.value.config),console.log("handleAddRow",H.value[m.value.editingIndex].config);else{const v={...m.value};H.value.push(JSON.parse(JSON.stringify(v))),M.value.IO.output=H,console.log("handleAddRow",v)}s.value=!1}else G.error("请填写完整数据")},R=v=>{H.value.splice(v,1)};return(v,o)=>{const _=z,V=X,k=Z,d=Y,p=ie,f=de,D=ne;return U(),S(P,null,[e(k,{data:r(H),style:{width:"100%"},class:"IOoutputdata"},{default:a(()=>[e(V,{prop:"key",label:"⚠️ 输出点IO"},{default:a(I=>[e(_,{type:"text",onClick:u=>N(I.$index)},{default:a(()=>[c(T(r(H)[I.$index].key),1)]),_:2},1032,["onClick"])]),_:1}),e(V,{prop:"name"},{header:a(()=>[e(_,{type:"primary",onClick:$},{default:a(()=>[c("添加新数据")]),_:1})]),_:1}),e(V,{prop:"config",label:"输出点"},{default:a(I=>[b("h4",null,T(I.row.config),1)]),_:1}),e(V,{label:"操作"},{default:a(I=>[e(_,{type:"danger",onClick:u=>R(I.$index)},{default:a(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(D,{title:"添加数据",modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=I=>s.value=I),visible:s.value,width:"900px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"55%"}},{default:a(()=>[dl,e(f,{ref:"form",model:r(m),"label-width":"80px"},{default:a(()=>[e(p,{label:"名称"},{default:a(()=>[e(d,{modelValue:r(m).key,"onUpdate:modelValue":o[0]||(o[0]=I=>r(m).key=I),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(p,{label:"key"},{default:a(()=>[e(d,{modelValue:r(m).name,"onUpdate:modelValue":o[1]||(o[1]=I=>r(m).name=I),placeholder:"英文KEY"},null,8,["modelValue"])]),_:1}),e(p,{label:"IO"},{default:a(()=>[e(tl)]),_:1})]),_:1},8,["model"]),b("div",sl,[e(_,{onClick:o[2]||(o[2]=I=>s.value=!1),style:{"margin-left":"75%"}},{default:a(()=>[c("取 消")]),_:1}),e(_,{type:"primary",onClick:O},{default:a(()=>[c("确定")]),_:1})])]),_:1},8,["modelValue","visible"])],64)}}},rl=le(vl,[["__scopeId","data-v-0ecb7fb1"]]);const me=A=>(ae("data-v-1d80505d"),A=A(),oe(),A),cl=me(()=>b("br",null,null,-1)),fl={style:{"margin-top":"2%","margin-left":"75%"}},gl=me(()=>b("br",null,null,-1)),ml={__name:"index",setup(A){const s=h(!1),$=()=>{l.value.name="",l.value.key="",l.value.config.portID=0,l.value.config.unitID=0,l.value.config.canID=0,l.value.config.axisID=0,l.value.config.ratio=0,l.value.config.encoder=0,l.value.config.unitDist=0,l.value.config.maxRPM=0,l.value.config.normalvel=0,l.value.config.slowvel=0,l.value.config.neartarget=0,l.value.config.ontarget=0,l.value.config.motorDir=0,l.value.config.encoderDir=0,l.value.config.originmode=0,l.value.config.maxHeight=0,l.value.config.isturn=0,l.value.config.syncFineVel=0,l.value.config.syncDir=0,l.value.config.syncVelRatioUp=0,l.value.config.steadyHeight=0,l.value.config.radius=0,l.value.editingIndex=-1,s.value=!0},N=v=>{l.value.name=y.value[v].name,l.value.key=y.value[v].key,l.value.config.portID=y.value[v].config.portID,l.value.config.unitID=y.value[v].config.unitID,l.value.config.canID=y.value[v].config.canID,l.value.config.axisID=y.value[v].config.axisID,l.value.config.ratio=y.value[v].config.ratio,l.value.config.encoder=y.value[v].config.encoder,l.value.config.unitDist=y.value[v].config.unitDist,l.value.config.maxRPM=y.value[v].config.maxRPM,l.value.config.normalvel=y.value[v].config.normalvel,l.value.config.slowvel=y.value[v].config.slowvel,l.value.config.neartarget=y.value[v].config.neartarget,l.value.config.ontarget=y.value[v].config.ontarget,l.value.config.motorDir=y.value[v].config.motorDir,l.value.config.encoderDir=y.value[v].config.encoderDir,l.value.config.originmode=y.value[v].config.originmode,l.value.config.maxHeight=y.value[v].config.maxHeight,l.value.config.isturn=y.value[v].config.isturn,l.value.config.syncFineVel=y.value[v].config.syncFineVel,l.value.config.syncDir=y.value[v].config.syncDir,l.value.config.syncVelRatioUp=y.value[v].config.syncVelRatioUp,l.value.config.steadyHeight=y.value[v].config.steadyHeight,l.value.config.radius=y.value[v].config.radius,l.value.editingIndex=v,s.value=!0},O=()=>{if(l.value.name){if(l.value.editingIndex!==-1)y.value[l.value.editingIndex].name=l.value.name,y.value[l.value.editingIndex].key=l.value.key,y.value[l.value.editingIndex].config.portID=l.value.config.portID,y.value[l.value.editingIndex].config.unitID=l.value.config.unitID,y.value[l.value.editingIndex].config.canID=l.value.config.canID,y.value[l.value.editingIndex].config.axisID=l.value.config.axisID,y.value[l.value.editingIndex].config.ratio=l.value.config.ratio,y.value[l.value.editingIndex].config.encoder=l.value.config.encoder,y.value[l.value.editingIndex].config.unitDist=l.value.config.unitDist,y.value[l.value.editingIndex].config.maxRPM=l.value.config.maxRPM,y.value[l.value.editingIndex].config.normalvel=l.value.config.normalvel,y.value[l.value.editingIndex].config.slowvel=l.value.config.slowvel,y.value[l.value.editingIndex].config.neartarget=l.value.config.neartarget,y.value[l.value.editingIndex].config.ontarget=l.value.config.ontarget,y.value[l.value.editingIndex].config.motorDir=l.value.config.motorDir,y.value[l.value.editingIndex].config.encoderDir=l.value.config.encoderDir,y.value[l.value.editingIndex].config.originmode=l.value.config.originmode,y.value[l.value.editingIndex].config.maxHeight=l.value.config.maxHeight,y.value[l.value.editingIndex].config.isturn=l.value.config.isturn,y.value[l.value.editingIndex].config.syncFineVel=l.value.config.syncFineVel,y.value[l.value.editingIndex].config.syncDir=l.value.config.syncDir,y.value[l.value.editingIndex].config.syncVelRatioUp=l.value.config.syncVelRatioUp,y.value[l.value.editingIndex].config.steadyHeight=l.value.config.steadyHeight,y.value[l.value.editingIndex].config.radius=l.value.config.radius,M.value.servo.kinco=y;else{const v={...l.value};y.value.push(JSON.parse(JSON.stringify(v))),M.value.servo.kinco=y,console.log("handleAddRow",v)}s.value=!1}else G.error("请填写完整数据")},R=v=>{y.value.splice(v,1)};return(v,o)=>{const _=z,V=X,k=Z,d=Y,p=ie,f=Ve,D=de,I=ne;return U(),S(P,null,[e(k,{data:r(y),style:{width:"100%"},class:"servodata"},{default:a(()=>[e(V,{prop:"key",label:"⚠️ 上装伺服"},{default:a(u=>[e(_,{type:"text",onClick:C=>N(u.$index)},{default:a(()=>[c(T(r(y)[u.$index].key),1)]),_:2},1032,["onClick"])]),_:1}),e(V,{prop:"name"},{header:a(()=>[e(_,{type:"primary",onClick:$},{default:a(()=>[c("添加新数据")]),_:1})]),_:1}),e(V,{label:"CAN口号"},{default:a(u=>[c(T(u.row.config.portID),1)]),_:1}),e(V,{label:"单元号"},{default:a(u=>[c(T(u.row.config.unitID),1)]),_:1}),e(V,{label:"模块内对应编号"},{default:a(u=>[c(T(u.row.config.canID),1)]),_:1}),e(V,{label:"原点模式"},{default:a(u=>[b("h4",null,T(u.row.config.originmode===1?"是":"否"),1)]),_:1}),e(V,{label:"是否有转盘"},{default:a(u=>[b("h4",null,T(u.row.config.isturn===1?"是":"否"),1)]),_:1}),e(V,{label:"操作"},{default:a(u=>[e(_,{type:"danger",onClick:C=>R(u.$index)},{default:a(()=>[c("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(I,{title:"添加数据",modelValue:s.value,"onUpdate:modelValue":o[25]||(o[25]=u=>s.value=u),visible:s.value,width:"900px","close-on-click-modal":!1,"modal-class":"kk-dialog-class","custom-class":"custom-dialog"},{default:a(()=>[e(te,{height:"100%",showUpBt:!0},{default:a(()=>[cl,e(D,{ref:"form",model:r(l),"label-width":"180px"},{default:a(()=>[e(p,{label:"名称"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).key,"onUpdate:modelValue":o[0]||(o[0]=u=>r(l).key=u),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(p,{label:"key"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).name,"onUpdate:modelValue":o[1]||(o[1]=u=>r(l).name=u),placeholder:"英文KEY"},null,8,["modelValue"])]),_:1}),e(p,{label:"CAN-ID"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.portID,"onUpdate:modelValue":o[2]||(o[2]=u=>r(l).config.portID=u),modelModifiers:{number:!0},placeholder:"can口号"},null,8,["modelValue"])]),_:1}),e(p,{label:"CAN单元号"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.unitID,"onUpdate:modelValue":o[3]||(o[3]=u=>r(l).config.unitID=u),modelModifiers:{number:!0},placeholder:"单元号"},null,8,["modelValue"])]),_:1}),e(p,{label:"模块内对应点编号"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.canID,"onUpdate:modelValue":o[4]||(o[4]=u=>r(l).config.canID=u),modelModifiers:{number:!0},placeholder:"模块内对应点编号"},null,8,["modelValue"])]),_:1}),e(p,{label:"轴ID"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.axisID,"onUpdate:modelValue":o[5]||(o[5]=u=>r(l).config.axisID=u),modelModifiers:{number:!0},placeholder:"轴ID"},null,8,["modelValue"])]),_:1}),e(p,{label:"减速比"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.ratio,"onUpdate:modelValue":o[6]||(o[6]=u=>r(l).config.ratio=u),modelModifiers:{number:!0},placeholder:"减速比"},null,8,["modelValue"])]),_:1}),e(p,{label:"编码器绝对值"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.encoder,"onUpdate:modelValue":o[7]||(o[7]=u=>r(l).config.encoder=u),modelModifiers:{number:!0},placeholder:"编码器绝对值"},null,8,["modelValue"])]),_:1}),e(p,{label:"伺服行程转换比"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.unitDist,"onUpdate:modelValue":o[8]||(o[8]=u=>r(l).config.unitDist=u),modelModifiers:{number:!0},placeholder:"伺服行程转换比"},null,8,["modelValue"])]),_:1}),e(p,{label:"最大转速"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.maxRPM,"onUpdate:modelValue":o[9]||(o[9]=u=>r(l).config.maxRPM=u),modelModifiers:{number:!0},placeholder:"最大转速"},null,8,["modelValue"])]),_:1}),e(p,{label:"正常速度"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.normalvel,"onUpdate:modelValue":o[10]||(o[10]=u=>r(l).config.normalvel=u),modelModifiers:{number:!0},placeholder:"正常速度"},null,8,["modelValue"])]),_:1}),e(p,{label:"减速速度"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.slowvel,"onUpdate:modelValue":o[11]||(o[11]=u=>r(l).config.slowvel=u),modelModifiers:{number:!0},placeholder:"减速速度"},null,8,["modelValue"])]),_:1}),e(p,{label:"切换速度的临界距离"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.neartarget,"onUpdate:modelValue":o[12]||(o[12]=u=>r(l).config.neartarget=u),modelModifiers:{number:!0},placeholder:"切换速度的临界距离"},null,8,["modelValue"])]),_:1}),e(p,{label:"允许误差"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.ontarget,"onUpdate:modelValue":o[13]||(o[13]=u=>r(l).config.ontarget=u),modelModifiers:{number:!0},placeholder:"允许误差"},null,8,["modelValue"])]),_:1}),e(p,{label:"电机方向"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.motorDir,"onUpdate:modelValue":o[14]||(o[14]=u=>r(l).config.motorDir=u),modelModifiers:{number:!0},placeholder:"电机方向"},null,8,["modelValue"])]),_:1}),e(p,{label:"码盘方向"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.encoderDir,"onUpdate:modelValue":o[15]||(o[15]=u=>r(l).config.encoderDir=u),modelModifiers:{number:!0},placeholder:"码盘方向"},null,8,["modelValue"])]),_:1}),e(p,{label:"原点模式"},{default:a(()=>[e(f,{style:{width:"80%"},modelValue:r(l).config.originmode,"onUpdate:modelValue":o[16]||(o[16]=u=>r(l).config.originmode=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),e(p,{label:"最大行程"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.maxHeight,"onUpdate:modelValue":o[17]||(o[17]=u=>r(l).config.maxHeight=u),modelModifiers:{number:!0},placeholder:"最大行程"},null,8,["modelValue"])]),_:1}),e(p,{label:"凸轮半径"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.radius,"onUpdate:modelValue":o[18]||(o[18]=u=>r(l).config.radius=u),modelModifiers:{number:!0},placeholder:"凸轮半径"},null,8,["modelValue"])]),_:1}),e(p,{label:"是否是转盘"},{default:a(()=>[e(f,{style:{width:"80%"},modelValue:r(l).config.isturn,"onUpdate:modelValue":o[19]||(o[19]=u=>r(l).config.isturn=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),e(p,{label:"转盘速度"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.syncFineVel,"onUpdate:modelValue":o[20]||(o[20]=u=>r(l).config.syncFineVel=u),modelModifiers:{number:!0},placeholder:"转盘速度"},null,8,["modelValue"])]),_:1}),e(p,{label:"转盘方向"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.syncDir,"onUpdate:modelValue":o[21]||(o[21]=u=>r(l).config.syncDir=u),modelModifiers:{number:!0},placeholder:"转盘方向"},null,8,["modelValue"])]),_:1}),e(p,{label:"syncVelRatioUp"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.syncVelRatioUp,"onUpdate:modelValue":o[22]||(o[22]=u=>r(l).config.syncVelRatioUp=u),modelModifiers:{number:!0},placeholder:"syncVelRatioUp"},null,8,["modelValue"])]),_:1}),e(p,{label:"复位初始值"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:r(l).config.steadyHeight,"onUpdate:modelValue":o[23]||(o[23]=u=>r(l).config.steadyHeight=u),modelModifiers:{number:!0},placeholder:"复位初始值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),b("div",fl,[e(_,{onClick:o[24]||(o[24]=u=>s.value=!1)},{default:a(()=>[c("取 消")]),_:1}),e(_,{type:"primary",onClick:O},{default:a(()=>[c("确定")]),_:1})]),gl]),_:1})]),_:1},8,["modelValue","visible"])],64)}}},pl=le(ml,[["__scopeId","data-v-1d80505d"]]);const _l={style:{width:"95%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},bl=b("br",null,null,-1),Vl={style:{width:"95%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},yl=b("br",null,null,-1),Il={style:{width:"95%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},hl={__name:"task",setup(A){const s=h([]);h(null),pe(()=>{let d="";s.value=_e.value.split(`
`).reduce((p,f)=>{if(f.trim().startsWith("function")){const D=f.split("(")[0].split(" ")[1];d||(d=D),p.push({name:d,key:D}),d=f}else d=f;return p},[])});const $=h("");function N(){M.value.Task.push({note:"",id:0,taskList:[]})}function O(){M.value.Task.pop()}fe(()=>s.value.map(d=>({value:d.key,label:d.name})));function R(d){d.taskList.push({main:"",exceptions:[""],jump:[{condition:0,index:0}]})}function v(d){d.taskList.pop()}function o(d){d.exceptions.push($.value),$.value=""}function _(d,p){d.exceptions.splice(p,1)}function V(d){d.jump.push({condition:0,index:0})}function k(d,p){d.jump.splice(p,1)}return(d,p)=>{const f=Y,D=X,I=z,u=se,C=ve,F=Z;return U(),S("div",null,[e(F,{data:r(M).Task,style:{width:"100%"},class:"jsondatatask"},{default:a(()=>[e(D,{label:"⚠️ 任务列表",width:"120"},{default:a(({row:x})=>[e(f,{modelValue:x.note,"onUpdate:modelValue":n=>x.note=n,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"任务 ID",width:"100"},{default:a(({row:x})=>[e(f,{modelValue:x.id,"onUpdate:modelValue":n=>x.id=n,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"任务步骤"},{default:a(({row:x})=>[b("div",null,[e(I,{type:"primary",onClick:n=>R(x)},{default:a(()=>[c("添加函数")]),_:2},1032,["onClick"]),e(I,{type:"danger",onClick:n=>v(x)},{default:a(()=>[c("删除函数")]),_:2},1032,["onClick"])]),e(F,{data:x.taskList,style:{width:"100%"}},{default:a(()=>[e(D,{label:"函数"},{default:a(({row:n})=>[e(C,{modelValue:n.main,"onUpdate:modelValue":E=>n.main=E,placeholder:"选择函数"},{default:a(()=>[(U(!0),S(P,null,L(s.value,E=>(U(),re(u,{key:E,label:E.name,value:E.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"异常"},{default:a(({row:n})=>[b("ul",null,[(U(!0),S(P,null,L(n.exceptions,(E,t)=>(U(),S("li",{key:`exception-${t}`},[b("div",_l,[e(C,{modelValue:n.exceptions[t],"onUpdate:modelValue":w=>n.exceptions[t]=w,placeholder:"选择异常"},{default:a(()=>[(U(!0),S(P,null,L(s.value,w=>(U(),re(u,{key:w,label:w.name,value:w.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),c("   "),e(I,{type:"danger",onClick:w=>_(n,t)},{default:a(()=>[c("删除")]),_:2},1032,["onClick"])])]))),128)),bl,e(I,{type:"primary",onClick:E=>o(n)},{default:a(()=>[c("添加异常")]),_:2},1032,["onClick"])])]),_:1}),e(D,{label:"返回和跳转"},{default:a(({row:n})=>[(U(!0),S(P,null,L(n.jump,(E,t)=>(U(),S("div",{key:`jump-${t}`},[b("div",Vl,[e(f,{modelValue:E.condition,"onUpdate:modelValue":w=>E.condition=w,modelModifiers:{number:!0},placeholder:"条件"},null,8,["modelValue","onUpdate:modelValue"]),e(f,{modelValue:E.index,"onUpdate:modelValue":w=>E.index=w,modelModifiers:{number:!0},placeholder:"跳转索引"},null,8,["modelValue","onUpdate:modelValue"]),c("   "),e(I,{type:"danger",onClick:w=>k(n,t)},{default:a(()=>[c("删除")]),_:2},1032,["onClick"])])]))),128)),yl,e(I,{type:"primary",onClick:E=>V(n)},{default:a(()=>[c("添加跳转")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])]),_:1}),e(D,{width:"180"},{header:a(()=>[b("div",Il,[e(I,{style:{width:"40%"},type:"primary",onClick:N},{default:a(()=>[c("添加任务")]),_:1}),e(I,{style:{width:"40%"},type:"danger",onClick:O},{default:a(()=>[c("删除任务")]),_:1})])]),_:1})]),_:1},8,["data"])])}}};const ee=A=>(ae("data-v-2916a203"),A=A(),oe(),A),kl={class:"page-container main-view"},wl={class:"table-box content-container page-content-box",style:{"background-image":"linear-gradient(to bottom right, #d0dcdc95, #d5eedf17)"}},xl={class:"left"},Cl=ee(()=>b("hr",{class:"hengxian"},null,-1)),Ul=ee(()=>b("hr",{class:"hengxian3"},null,-1)),Sl=ee(()=>b("hr",{class:"hengxian3"},null,-1)),Dl=ee(()=>b("hr",{class:"hengxian3"},null,-1)),$l=ee(()=>b("hr",{class:"hengxian2"},null,-1)),Nl={__name:"index",setup(A){const s=h(!1),$=fe(()=>JSON.stringify(M.value,null,2)),N=()=>{s.value=!0},O=()=>{let k={data:{file:"equipment.json",value:M.value},group:"siasun",account:"test",password:"123456"};console.log(k),ue({method:"post",url:"/api/ctrl/jsoneditor",data:JSON.stringify(k)}).then(d=>{G.success("请求成功");var p={type:"syncParm",data:!0};console.log(JSON.stringify(p)),ue({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(p)}).then(f=>{G.success("同步参数")}).catch(f=>{}).finally(()=>{})}).catch(d=>{G.error("请求失败")}).finally(()=>{})},R=h(null),v=()=>{ue({method:"post",url:"/api/data/jsoneditor",data:JSON.stringify({data:"equipment.json",group:"siasun",account:"test",password:"123456"})}).then(d=>{G.success("请求成功"),R.value=d.data,M.value=d.data,V()}).catch(d=>{G.error("请求失败")}).finally(()=>{})},o=()=>{const k=JSON.stringify(M.value),d=new Blob([k],{type:"application/json"}),p=window.URL.createObjectURL(d),f=document.createElement("a");f.href=p,f.download="equipment.json",document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(p),document.body.removeChild(f)},_=k=>{const d=k.target.files[0],p=new FileReader;p.onload=f=>{const D=JSON.parse(f.target.result);M.value=D,V()},p.readAsText(d),G.success("导入成功")},V=()=>{j.value=M.value.IO.input,H.value=M.value.IO.output,y.value=M.value.servo.kinco};return(k,d)=>{const p=z,f=ne,D=X,I=Y,u=Z;return U(),S("div",null,[b("div",kl,[b("div",wl,[e(te,{height:"100%",showUpBt:!0},{default:a(()=>[b("div",xl,[e(p,{type:"info",onClick:N},{default:a(()=>[c(" 查看 ")]),_:1}),e(f,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=C=>s.value=C),title:"数据",visible:s.value,onClose:d[1]||(d[1]=C=>s.value=!1),"modal-class":"kk-dialog-class","custom-class":"custom-dialog"},{default:a(()=>[e(te,{height:"100%",showUpBt:!0},{default:a(()=>[b("pre",null,T($.value),1)]),_:1})]),_:1},8,["modelValue","visible"]),c("   "),e(p,{type:"primary",onClick:v},{default:a(()=>[c(" 从AGV同步参数 ")]),_:1}),e(p,{type:"primary",onClick:O},{default:a(()=>[c("同步到AGV")]),_:1}),c("   "),b("input",{ref:"importInput",type:"file",accept:".json",style:{display:"none"},onChange:_},null,544),e(p,{onClick:d[2]||(d[2]=C=>k.$refs.importInput.click()),type:"success"},{default:a(()=>[c(" 本地导入 ")]),_:1}),e(p,{type:"success",onClick:o},{default:a(()=>[c("导出到本地")]),_:1})]),Cl,e(u,{data:r(be),style:{width:"100%"},class:"EQUversion"},{default:a(()=>[e(D,{prop:"name",label:"⚠️ 版本"}),e(D,{prop:"value"},{default:a(C=>[e(I,{modelValue:r(M).version,"onUpdate:modelValue":d[3]||(d[3]=F=>r(M).version=F),placeholder:"请选择",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["data"]),Ul,e(He),e(rl),Sl,e(pl),Dl,e(hl),$l]),_:1})])])])}}},la=le(Nl,[["__scopeId","data-v-2916a203"]]);export{la as default};
