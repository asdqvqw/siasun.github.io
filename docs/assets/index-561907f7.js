import{aV as k,bB as ce,o as U,c as S,F as H,aY as L,b as e,f as a,a as b,bc as M,m as r,g as q,E as Y,_ as le,bl as v,ct as G,l as z,p as ae,q as oe,bC as pe,Q as fe,e as re,cu as ue}from"./index-07ba0ec2.js";import{E as X,a as Z}from"./el-table-column-bae12f46.js";/* empty css                    */import"./el-tag-759dd9cb.js";import"./el-tooltip-4ed993c7.js";import"./el-popper-3468e961.js";import"./el-scrollbar-4234c05b.js";import{E as ne}from"./el-dialog-97d0638d.js";import{_ as te}from"./DefinScrollbar-95853580.js";import{I as P,j as T,a as j,s as V,c as _e,E as be}from"./common-7ae204be.js";/* empty css                */import{E as ie,a as de}from"./el-form-item-089a9983.js";import{E as se,a as ve}from"./el-select-7888a24b.js";/* empty css                 */import{E as ge}from"./index-1d7dff43.js";import{E as Ve}from"./el-switch-3c6cb5c8.js";import"./8Array-57f4f987.js";import"./CloneObject-bc182e64.js";import"./index-cc3e8e44.js";import"./isEqual-92748bab.js";import"./debounce-b1d69dcc.js";/* empty css                                                                       */import"./index-12d0a64b.js";const Q=k(!1),W=k(!1),g=k({name:"",key:"",config:[1,1,1,1,1,1],editingIndex:-1}),m=k({name:"",key:"",config:[1,1,1,1,1,1],editingIndex:-1});k(!1);k({name:"",value:[1,1,1,1,1,1],editingIndex:-1});const l=k({name:"",key:"",config:{portID:0,unitID:0,canID:0,axisID:0,ratio:0,encoder:0,unitDist:0,maxRPM:0,normalvel:0,slowvel:0,neartarget:0,ontarget:0,motorDir:0,encoderDir:0,originmode:0,maxHeight:0,radius:0,isturn:0,syncFineVel:0,syncDir:0,syncVelRatioUp:0,steadyHeight:0},editingIndex:-1});k({id:-1,note:"",taskList:[],editingIndex:-1});const ye={key:0},Ie=b("br",null,null,-1),ke=b("br",null,null,-1),he=b("br",null,null,-1),xe={key:1},we=b("br",null,null,-1),Ce=b("br",null,null,-1),Ue=b("br",null,null,-1),Se={key:2},$e=b("br",null,null,-1),De=b("br",null,null,-1),Ne={key:3},Oe=b("br",null,null,-1),Re=b("br",null,null,-1),Ee=b("br",null,null,-1),Ae={key:4},Me=b("br",null,null,-1),Te={__name:"IO",setup(A){const s=k("1"),N=k(!0),$=k(!1),O=k(!1),R=k(!1),c=k(!1),o=k("1"),p=k("1"),y=k("1"),h=k("1"),d=k(""),_=k(""),f=()=>{if(s.value==="2"||s.value==="3"||s.value==="5")g.value.config=[parseInt(s.value),parseInt(o.value),parseInt(p.value),parseInt(y.value),parseInt(h.value)];else if(s.value==="1")g.value.config=[parseInt(s.value),0,parseInt(o.value),parseInt(p.value),parseInt(y.value)];else if(s.value==="4"){const w=parseInt(o.value,16);d.value=isNaN(w)?"":w.toString(),g.value.config=[parseInt(s.value),0,0,parseInt(d.value),parseInt(p.value)]}console.log("generateJSON",g.value.config)},D=[{label:"本地IO",value:"1"},{label:"CAN-POS",value:"2"},{label:"CAN-OPEN",value:"3"},{label:"GPIO",value:"4"},{label:"CAN-IO",value:"5"}],I=[{label:"CAN1",value:"0"},{label:"CAN2",value:"1"},{label:"CAN3",value:"2"}],u=()=>{if(g.value.config.value!==void 0){if(g.value.config.value[0]===2||g.value.config.value[0]===3||g.value.config.value[0]===5)s.value=g.value.config.value[0].toString(),o.value=g.value.config.value[1].toString(),p.value=g.value.config.value[2].toString(),y.value=g.value.config.value[3].toString(),h.value=g.value.config.value[4].toString(),C();else if(g.value.config.value[0]===1)s.value=g.value.config.value[0].toString(),o.value=g.value.config.value[2].toString(),p.value=g.value.config.value[3].toString(),y.value=g.value.config.value[4].toString(),C();else if(g.value.config.value[0]===4){s.value=g.value.config.value[0].toString();const w=parseInt(g.value.config.value[3],10);_.value=isNaN(w)?"":w.toString(16),o.value=_.value.toString(),p.value=g.value.config.value[4].toString(),C()}}else if(g.value.config!==void 0){if(g.value.config[0]===2||g.value.config[0]===3||g.value.config[0]===5)s.value=g.value.config[0].toString(),o.value=g.value.config[1].toString(),p.value=g.value.config[2].toString(),y.value=g.value.config[3].toString(),h.value=g.value.config[4].toString(),C();else if(g.value.config[0]===1)s.value=g.value.config[0].toString(),o.value=g.value.config.value[2].toString(),p.value=g.value.config.value[3].toString(),y.value=g.value.config.value[4].toString(),C();else if(g.value.config[0]===4){s.value=g.value.config[0].toString();const w=parseInt(g.value.config[3],10);_.value=isNaN(w)?"":w.toString(16),o.value=_.value.toString(),p.value=g.value.config.value[4].toString(),C()}}else s.value="1",o.value="1",p.value="1",y.value="1",h.value="1",C(),console.log("putJSONelse")},C=()=>{switch(console.log("handleChange",s.value),s.value){case"1":N.value=!0,$.value=!1,O.value=!1,R.value=!1,c.value=!1,f();return;case"2":N.value=!1,$.value=!0,O.value=!1,R.value=!1,c.value=!1,f();return;case"3":N.value=!1,$.value=!1,O.value=!0,R.value=!1,c.value=!1,f();return;case"4":N.value=!1,$.value=!1,O.value=!1,R.value=!0,c.value=!1,f();return;case"5":N.value=!1,$.value=!1,O.value=!1,R.value=!1,c.value=!0,f();return}};u();let F=0;return ce(Q,()=>{const w=Date.now();w-F>=700&&(u(),F=w)}),(w,n)=>{const E=ge,t=se,x=ve,K=Y;return U(),S("div",null,[(U(),S(H,null,L(D,(i,B)=>e(E,{key:B,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=J=>s.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,M(i.label),1)]),_:2},1032,["modelValue","label"])),64)),$.value?(U(),S("div",ye,[r(" 远程模块连接到: "),(U(),S(H,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,M(i.label),1)]),_:2},1032,["modelValue","label"])),64)),Ie,r(" CAN-POS模块编号: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[2]||(n[2]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),ke,r(" 模块内输出点编号: "),e(x,{modelValue:y.value,"onUpdate:modelValue":n[3]||(n[3]=i=>y.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),he,r(" 信号极性: "),e(x,{modelValue:h.value,"onUpdate:modelValue":n[4]||(n[4]=i=>h.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),O.value?(U(),S("div",xe,[r(" 远程模块连接到: "),(U(),S(H,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,M(i.label),1)]),_:2},1032,["modelValue","label"])),64)),we,r(" CAN-OPEN模块编号: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[6]||(n[6]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Ce,r(" 模块内输出点编号: "),e(x,{modelValue:y.value,"onUpdate:modelValue":n[7]||(n[7]=i=>y.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Ue,r(" 信号极性: "),e(x,{modelValue:h.value,"onUpdate:modelValue":n[8]||(n[8]=i=>h.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),N.value?(U(),S("div",Se,[r(" 本地IO地址: "),e(K,{modelValue:o.value,"onUpdate:modelValue":n[9]||(n[9]=i=>o.value=i),type:"number",onChange:f},null,8,["modelValue"]),$e,r(" 输出点对应位: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[10]||(n[10]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"BIT1",value:"0"}),e(t,{label:"BIT2",value:"1"}),e(t,{label:"BIT3",value:"2"}),e(t,{label:"BIT4",value:"3"}),e(t,{label:"BIT5",value:"4"}),e(t,{label:"BIT6",value:"5"}),e(t,{label:"BIT7",value:"6"})]),_:1},8,["modelValue"]),De,r(" 信号极性: "),e(x,{modelValue:y.value,"onUpdate:modelValue":n[11]||(n[11]=i=>y.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),c.value?(U(),S("div",Ne,[r(" 远程模块连接到: "),(U(),S(H,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[12]||(n[12]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,M(i.label),1)]),_:2},1032,["modelValue","label"])),64)),Oe,r(" CAN-IO模块编号: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[13]||(n[13]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Re,r(" 模块内输出点编号: "),e(x,{modelValue:y.value,"onUpdate:modelValue":n[14]||(n[14]=i=>y.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Ee,r(" 信号极性: "),e(x,{modelValue:h.value,"onUpdate:modelValue":n[15]||(n[15]=i=>h.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),R.value?(U(),S("div",Ae,[r(" 输入点对应位: "),e(K,{modelValue:o.value,"onUpdate:modelValue":n[16]||(n[16]=i=>o.value=i),onChange:f},null,8,["modelValue"]),Me,r(" 信号极性: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[17]||(n[17]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0)])}}};const Be=A=>(ae("data-v-ce56ca1d"),A=A(),oe(),A),Je=Be(()=>b("br",null,null,-1)),Pe={slot:"footer",class:"dialog-footer"},je={__name:"index",setup(A){const s=k(!1),N=()=>{g.value.name="",g.value.key="",g.value.config.value=[1,1,1,1,1,1],g.value.editingIndex=-1,console.log("addNewRow",g.value.config.value),s.value=!0,Q.value=!Q.value},$=c=>{g.value.name=P.value[c].name,g.value.key=P.value[c].key,g.value.config.value=P.value[c].config,g.value.editingIndex=c,console.log("reedit",g.value.config.value),s.value=!0,Q.value=!Q.value},O=()=>{if(g.value.name){if(g.value.editingIndex!==-1)P.value[g.value.editingIndex].name=g.value.name,P.value[g.value.editingIndex].key=g.value.key,g.value.config!=null&&(P.value[g.value.editingIndex].config=g.value.config),T.value.IO.input=P,console.log("handleAddRow",g.value.config),console.log("handleAddRow",P.value[g.value.editingIndex].config);else{const c={...g.value};P.value.push(JSON.parse(JSON.stringify(c))),T.value.IO.input=P,console.log("handleAddRow",c)}s.value=!1}else G.error("请填写完整数据")},R=c=>{P.value.splice(c,1)};return(c,o)=>{const p=z,y=X,h=Z,d=Y,_=ie,f=de,D=ne;return U(),S(H,null,[e(h,{data:v(P),style:{width:"100%"},class:"IOinputdata"},{default:a(()=>[e(y,{prop:"key",label:"⚠️ 输入点IO"},{default:a(I=>[e(p,{type:"text",onClick:u=>$(I.$index)},{default:a(()=>[r(M(v(P)[I.$index].key),1)]),_:2},1032,["onClick"])]),_:1}),e(y,{prop:"name"},{header:a(()=>[e(p,{type:"primary",onClick:N},{default:a(()=>[r("添加新数据")]),_:1})]),default:a(I=>[e(p,{type:"text",onClick:u=>$(I.$index)},{default:a(()=>[r(M(v(P)[I.$index].name),1)]),_:2},1032,["onClick"])]),_:1}),e(y,{prop:"config",label:"输入点"},{default:a(I=>[b("h4",null,M(I.row.config),1)]),_:1}),e(y,{label:"操作"},{default:a(I=>[e(p,{type:"danger",onClick:u=>R(I.$index)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(D,{title:"添加数据",modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=I=>s.value=I),visible:s.value,width:"900px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"55%"}},{default:a(()=>[Je,e(f,{ref:"form",model:v(g),"label-width":"80px"},{default:a(()=>[e(_,{label:"名称"},{default:a(()=>[e(d,{modelValue:v(g).key,"onUpdate:modelValue":o[0]||(o[0]=I=>v(g).key=I),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(_,{label:"key"},{default:a(()=>[e(d,{modelValue:v(g).name,"onUpdate:modelValue":o[1]||(o[1]=I=>v(g).name=I),placeholder:"英文KEY"},null,8,["modelValue"])]),_:1}),e(_,{label:"IO"},{default:a(()=>[e(Te)]),_:1})]),_:1},8,["model"]),b("div",Pe,[e(p,{onClick:o[2]||(o[2]=I=>s.value=!1),style:{"margin-left":"75%"}},{default:a(()=>[r("取 消")]),_:1}),e(p,{type:"primary",onClick:O},{default:a(()=>[r("确定")]),_:1})])]),_:1},8,["modelValue","visible"])],64)}}},He=le(je,[["__scopeId","data-v-ce56ca1d"]]),Le={key:0},Fe=b("br",null,null,-1),qe=b("br",null,null,-1),Ge=b("br",null,null,-1),Ye={key:1},Ke=b("br",null,null,-1),Qe=b("br",null,null,-1),We=b("br",null,null,-1),ze={key:2},Xe=b("br",null,null,-1),Ze=b("br",null,null,-1),el={key:3},ll=b("br",null,null,-1),al=b("br",null,null,-1),ol=b("br",null,null,-1),nl={key:4},ul=b("br",null,null,-1),tl={__name:"IO",setup(A){const s=k("1"),N=k(!0),$=k(!1),O=k(!1),R=k(!1),c=k(!1),o=k("1"),p=k("1"),y=k("1"),h=k("1"),d=k(""),_=k(""),f=()=>{if(s.value==="2"||s.value==="3"||s.value==="5")m.value.config=[parseInt(s.value),parseInt(o.value),parseInt(p.value),parseInt(y.value),parseInt(h.value)];else if(s.value==="1")m.value.config=[parseInt(s.value),0,parseInt(o.value),parseInt(p.value),parseInt(y.value)];else if(s.value==="4"){const w=parseInt(o.value,16);d.value=isNaN(w)?"":w.toString(),m.value.config=[parseInt(s.value),0,0,parseInt(d.value),parseInt(p.value)]}console.log("generateJSON",m.value.config)},D=[{label:"本地IO",value:"1"},{label:"CAN-POS",value:"2"},{label:"CAN-OPEN",value:"3"},{label:"GPIO",value:"4"},{label:"CAN-IO",value:"5"}],I=[{label:"CAN1",value:"0"},{label:"CAN2",value:"1"},{label:"CAN3",value:"2"}],u=()=>{if(m.value.config.value!==void 0){if(m.value.config.value[0]===2||m.value.config.value[0]===3||m.value.config.value[0]===5)s.value=m.value.config.value[0].toString(),o.value=m.value.config.value[1].toString(),p.value=m.value.config.value[2].toString(),y.value=m.value.config.value[3].toString(),h.value=m.value.config.value[4].toString(),C();else if(m.value.config.value[0]===1)s.value=m.value.config.value[0].toString(),o.value=m.value.config.value[2].toString(),p.value=m.value.config.value[3].toString(),y.value=m.value.config.value[4].toString(),C();else if(m.value.config.value[0]===4){s.value=m.value.config.value[0].toString();const w=parseInt(m.value.config.value[3],10);_.value=isNaN(w)?"":w.toString(16),o.value=_.value.toString(),p.value=m.value.config.value[4].toString(),C()}}else if(m.value.config!==void 0){if(m.value.config[0]===2||m.value.config[0]===3||m.value.config[0]===5)s.value=m.value.config[0].toString(),o.value=m.value.config[1].toString(),p.value=m.value.config[2].toString(),y.value=m.value.config[3].toString(),h.value=m.value.config[4].toString(),C();else if(m.value.config[0]===1)s.value=m.value.config[0].toString(),o.value=m.value.config.value[2].toString(),p.value=m.value.config.value[3].toString(),y.value=m.value.config.value[4].toString(),C();else if(m.value.config[0]===4){s.value=m.value.config[0].toString();const w=parseInt(m.value.config[3],10);_.value=isNaN(w)?"":w.toString(16),o.value=_.value.toString(),p.value=m.value.config.value[4].toString(),C()}}else s.value="1",o.value="1",p.value="1",y.value="1",h.value="1",C(),console.log("putJSONelse")},C=()=>{switch(console.log("handleChange",s.value),s.value){case"1":N.value=!0,$.value=!1,O.value=!1,R.value=!1,c.value=!1,f();return;case"2":N.value=!1,$.value=!0,O.value=!1,R.value=!1,c.value=!1,f();return;case"3":N.value=!1,$.value=!1,O.value=!0,R.value=!1,c.value=!1,f();return;case"4":N.value=!1,$.value=!1,O.value=!1,R.value=!0,c.value=!1,f();return;case"5":N.value=!1,$.value=!1,O.value=!1,R.value=!1,c.value=!0,f();return}};u();let F=0;return ce(W,()=>{const w=Date.now();w-F>=700&&(u(),F=w)}),(w,n)=>{const E=ge,t=se,x=ve,K=Y;return U(),S("div",null,[(U(),S(H,null,L(D,(i,B)=>e(E,{key:B,modelValue:s.value,"onUpdate:modelValue":n[0]||(n[0]=J=>s.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,M(i.label),1)]),_:2},1032,["modelValue","label"])),64)),$.value?(U(),S("div",Le,[r(" 远程模块连接到: "),(U(),S(H,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,M(i.label),1)]),_:2},1032,["modelValue","label"])),64)),Fe,r(" CAN-POS模块编号: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[2]||(n[2]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),qe,r(" 模块内输出点编号: "),e(x,{modelValue:y.value,"onUpdate:modelValue":n[3]||(n[3]=i=>y.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Ge,r(" 信号极性: "),e(x,{modelValue:h.value,"onUpdate:modelValue":n[4]||(n[4]=i=>h.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),O.value?(U(),S("div",Ye,[r(" 远程模块连接到: "),(U(),S(H,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[5]||(n[5]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,M(i.label),1)]),_:2},1032,["modelValue","label"])),64)),Ke,r(" CAN-OPEN模块编号: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[6]||(n[6]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),Qe,r(" 模块内输出点编号: "),e(x,{modelValue:y.value,"onUpdate:modelValue":n[7]||(n[7]=i=>y.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),We,r(" 信号极性: "),e(x,{modelValue:h.value,"onUpdate:modelValue":n[8]||(n[8]=i=>h.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),N.value?(U(),S("div",ze,[r(" 本地IO地址: "),e(K,{modelValue:o.value,"onUpdate:modelValue":n[9]||(n[9]=i=>o.value=i),type:"number",onChange:f},null,8,["modelValue"]),Xe,r(" 输出点对应位: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[10]||(n[10]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"BIT1",value:"0"}),e(t,{label:"BIT2",value:"1"}),e(t,{label:"BIT3",value:"2"}),e(t,{label:"BIT4",value:"3"}),e(t,{label:"BIT5",value:"4"}),e(t,{label:"BIT6",value:"5"}),e(t,{label:"BIT7",value:"6"})]),_:1},8,["modelValue"]),Ze,r(" 信号极性: "),e(x,{modelValue:y.value,"onUpdate:modelValue":n[11]||(n[11]=i=>y.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),c.value?(U(),S("div",el,[r(" 远程模块连接到: "),(U(),S(H,null,L(I,(i,B)=>e(E,{key:B,modelValue:o.value,"onUpdate:modelValue":n[12]||(n[12]=J=>o.value=J),label:i.value,onChange:C},{default:a(()=>[b("pre",null,M(i.label),1)]),_:2},1032,["modelValue","label"])),64)),ll,r(" CAN-IO模块编号: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[13]||(n[13]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),al,r(" 模块内输出点编号: "),e(x,{modelValue:y.value,"onUpdate:modelValue":n[14]||(n[14]=i=>y.value=i),onChange:f},{default:a(()=>[e(t,{label:"0",value:"0"}),e(t,{label:"1",value:"1"}),e(t,{label:"2",value:"2"})]),_:1},8,["modelValue"]),ol,r(" 信号极性: "),e(x,{modelValue:h.value,"onUpdate:modelValue":n[15]||(n[15]=i=>h.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0),R.value?(U(),S("div",nl,[r(" 输入点对应位: "),e(K,{modelValue:o.value,"onUpdate:modelValue":n[16]||(n[16]=i=>o.value=i),onChange:f},null,8,["modelValue"]),ul,r(" 信号极性: "),e(x,{modelValue:p.value,"onUpdate:modelValue":n[17]||(n[17]=i=>p.value=i),onChange:f},{default:a(()=>[e(t,{label:"输出高电平有效",value:"0"}),e(t,{label:"输出低电平有效",value:"1"})]),_:1},8,["modelValue"])])):q("",!0)])}}};const il=A=>(ae("data-v-7d0265ff"),A=A(),oe(),A),dl=il(()=>b("br",null,null,-1)),sl={slot:"footer",class:"dialog-footer"},vl={__name:"index",setup(A){const s=k(!1),N=()=>{m.value.name="",m.value.key="",m.value.config.value=[1,1,1,1,1,1],m.value.editingIndex=-1,console.log("addnewoutRow",m.value.config.value),s.value=!0,W.value=!W.value},$=c=>{m.value.name=j.value[c].name,m.value.key=j.value[c].key,m.value.config.value=j.value[c].config,m.value.editingIndex=c,console.log("reedit",m.value.config.value),s.value=!0,W.value=!W.value},O=()=>{if(m.value.name){if(m.value.editingIndex!==-1)j.value[m.value.editingIndex].name=m.value.name,j.value[m.value.editingIndex].key=m.value.key,m.value.config!=null&&(j.value[m.value.editingIndex].config=m.value.config),T.value.IO.output=j,console.log("handleAddRow",m.value.config),console.log("handleAddRow",j.value[m.value.editingIndex].config);else{const c={...m.value};j.value.push(JSON.parse(JSON.stringify(c))),T.value.IO.output=j,console.log("handleAddRow",c)}s.value=!1}else G.error("请填写完整数据")},R=c=>{j.value.splice(c,1)};return(c,o)=>{const p=z,y=X,h=Z,d=Y,_=ie,f=de,D=ne;return U(),S(H,null,[e(h,{data:v(j),style:{width:"100%"},class:"IOoutputdata"},{default:a(()=>[e(y,{prop:"key",label:"⚠️ 输出点IO"},{default:a(I=>[e(p,{type:"text",onClick:u=>$(I.$index)},{default:a(()=>[r(M(v(j)[I.$index].key),1)]),_:2},1032,["onClick"])]),_:1}),e(y,{prop:"name"},{header:a(()=>[e(p,{type:"primary",onClick:N},{default:a(()=>[r("添加新数据")]),_:1})]),default:a(I=>[e(p,{type:"text",onClick:u=>$(I.$index)},{default:a(()=>[r(M(v(j)[I.$index].name),1)]),_:2},1032,["onClick"])]),_:1}),e(y,{prop:"config",label:"输出点"},{default:a(I=>[b("h4",null,M(I.row.config),1)]),_:1}),e(y,{label:"操作"},{default:a(I=>[e(p,{type:"danger",onClick:u=>R(I.$index)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(D,{title:"添加数据",modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=I=>s.value=I),visible:s.value,width:"900px","close-on-click-modal":!1,class:"edit-data-dialog",style:{height:"55%"}},{default:a(()=>[dl,e(f,{ref:"form",model:v(m),"label-width":"80px"},{default:a(()=>[e(_,{label:"名称"},{default:a(()=>[e(d,{modelValue:v(m).key,"onUpdate:modelValue":o[0]||(o[0]=I=>v(m).key=I),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(_,{label:"key"},{default:a(()=>[e(d,{modelValue:v(m).name,"onUpdate:modelValue":o[1]||(o[1]=I=>v(m).name=I),placeholder:"英文KEY"},null,8,["modelValue"])]),_:1}),e(_,{label:"IO"},{default:a(()=>[e(tl)]),_:1})]),_:1},8,["model"]),b("div",sl,[e(p,{onClick:o[2]||(o[2]=I=>s.value=!1),style:{"margin-left":"75%"}},{default:a(()=>[r("取 消")]),_:1}),e(p,{type:"primary",onClick:O},{default:a(()=>[r("确定")]),_:1})])]),_:1},8,["modelValue","visible"])],64)}}},rl=le(vl,[["__scopeId","data-v-7d0265ff"]]);const me=A=>(ae("data-v-45560449"),A=A(),oe(),A),cl=me(()=>b("br",null,null,-1)),fl={style:{"margin-top":"2%","margin-left":"75%"}},gl=me(()=>b("br",null,null,-1)),ml={__name:"index",setup(A){const s=k(!1),N=()=>{l.value.name="",l.value.key="",l.value.config.portID=0,l.value.config.unitID=0,l.value.config.canID=0,l.value.config.axisID=0,l.value.config.ratio=0,l.value.config.encoder=0,l.value.config.unitDist=0,l.value.config.maxRPM=0,l.value.config.normalvel=0,l.value.config.slowvel=0,l.value.config.neartarget=0,l.value.config.ontarget=0,l.value.config.motorDir=0,l.value.config.encoderDir=0,l.value.config.originmode=0,l.value.config.maxHeight=0,l.value.config.isturn=0,l.value.config.syncFineVel=0,l.value.config.syncDir=0,l.value.config.syncVelRatioUp=0,l.value.config.steadyHeight=0,l.value.config.radius=0,l.value.editingIndex=-1,s.value=!0},$=c=>{l.value.name=V.value[c].name,l.value.key=V.value[c].key,l.value.config.portID=V.value[c].config.portID,l.value.config.unitID=V.value[c].config.unitID,l.value.config.canID=V.value[c].config.canID,l.value.config.axisID=V.value[c].config.axisID,l.value.config.ratio=V.value[c].config.ratio,l.value.config.encoder=V.value[c].config.encoder,l.value.config.unitDist=V.value[c].config.unitDist,l.value.config.maxRPM=V.value[c].config.maxRPM,l.value.config.normalvel=V.value[c].config.normalvel,l.value.config.slowvel=V.value[c].config.slowvel,l.value.config.neartarget=V.value[c].config.neartarget,l.value.config.ontarget=V.value[c].config.ontarget,l.value.config.motorDir=V.value[c].config.motorDir,l.value.config.encoderDir=V.value[c].config.encoderDir,l.value.config.originmode=V.value[c].config.originmode,l.value.config.maxHeight=V.value[c].config.maxHeight,l.value.config.isturn=V.value[c].config.isturn,l.value.config.syncFineVel=V.value[c].config.syncFineVel,l.value.config.syncDir=V.value[c].config.syncDir,l.value.config.syncVelRatioUp=V.value[c].config.syncVelRatioUp,l.value.config.steadyHeight=V.value[c].config.steadyHeight,l.value.config.radius=V.value[c].config.radius,l.value.editingIndex=c,s.value=!0},O=()=>{if(l.value.name){if(l.value.editingIndex!==-1)V.value[l.value.editingIndex].name=l.value.name,V.value[l.value.editingIndex].key=l.value.key,V.value[l.value.editingIndex].config.portID=l.value.config.portID,V.value[l.value.editingIndex].config.unitID=l.value.config.unitID,V.value[l.value.editingIndex].config.canID=l.value.config.canID,V.value[l.value.editingIndex].config.axisID=l.value.config.axisID,V.value[l.value.editingIndex].config.ratio=l.value.config.ratio,V.value[l.value.editingIndex].config.encoder=l.value.config.encoder,V.value[l.value.editingIndex].config.unitDist=l.value.config.unitDist,V.value[l.value.editingIndex].config.maxRPM=l.value.config.maxRPM,V.value[l.value.editingIndex].config.normalvel=l.value.config.normalvel,V.value[l.value.editingIndex].config.slowvel=l.value.config.slowvel,V.value[l.value.editingIndex].config.neartarget=l.value.config.neartarget,V.value[l.value.editingIndex].config.ontarget=l.value.config.ontarget,V.value[l.value.editingIndex].config.motorDir=l.value.config.motorDir,V.value[l.value.editingIndex].config.encoderDir=l.value.config.encoderDir,V.value[l.value.editingIndex].config.originmode=l.value.config.originmode,V.value[l.value.editingIndex].config.maxHeight=l.value.config.maxHeight,V.value[l.value.editingIndex].config.isturn=l.value.config.isturn,V.value[l.value.editingIndex].config.syncFineVel=l.value.config.syncFineVel,V.value[l.value.editingIndex].config.syncDir=l.value.config.syncDir,V.value[l.value.editingIndex].config.syncVelRatioUp=l.value.config.syncVelRatioUp,V.value[l.value.editingIndex].config.steadyHeight=l.value.config.steadyHeight,V.value[l.value.editingIndex].config.radius=l.value.config.radius,T.value.servo.kinco=V;else{const c={...l.value};V.value.push(JSON.parse(JSON.stringify(c))),T.value.servo.kinco=V,console.log("handleAddRow",c)}s.value=!1}else G.error("请填写完整数据")},R=c=>{V.value.splice(c,1)};return(c,o)=>{const p=z,y=X,h=Z,d=Y,_=ie,f=Ve,D=de,I=ne;return U(),S(H,null,[e(h,{data:v(V),style:{width:"100%"},class:"servodata"},{default:a(()=>[e(y,{prop:"key",label:"⚠️ 上装伺服"},{default:a(u=>[e(p,{type:"text",onClick:C=>$(u.$index)},{default:a(()=>[r(M(v(V)[u.$index].key),1)]),_:2},1032,["onClick"])]),_:1}),e(y,{prop:"name"},{header:a(()=>[e(p,{type:"primary",onClick:N},{default:a(()=>[r("添加新数据")]),_:1})]),default:a(u=>[e(p,{type:"text",onClick:C=>$(u.$index)},{default:a(()=>[r(M(v(V)[u.$index].name),1)]),_:2},1032,["onClick"])]),_:1}),e(y,{label:"CAN口号"},{default:a(u=>[r(M(u.row.config.portID),1)]),_:1}),e(y,{label:"单元号"},{default:a(u=>[r(M(u.row.config.unitID),1)]),_:1}),e(y,{label:"模块内对应编号"},{default:a(u=>[r(M(u.row.config.canID),1)]),_:1}),e(y,{label:"原点模式"},{default:a(u=>[b("h4",null,M(u.row.config.originmode===1?"是":"否"),1)]),_:1}),e(y,{label:"是否有转盘"},{default:a(u=>[b("h4",null,M(u.row.config.isturn===1?"是":"否"),1)]),_:1}),e(y,{label:"操作"},{default:a(u=>[e(p,{type:"danger",onClick:C=>R(u.$index)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(I,{title:"添加数据",modelValue:s.value,"onUpdate:modelValue":o[25]||(o[25]=u=>s.value=u),visible:s.value,width:"900px","close-on-click-modal":!1,"modal-class":"kk-dialog-class","custom-class":"custom-dialog"},{default:a(()=>[e(te,{height:"100%",showUpBt:!0},{default:a(()=>[cl,e(D,{ref:"form",model:v(l),"label-width":"180px"},{default:a(()=>[e(_,{label:"名称"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).key,"onUpdate:modelValue":o[0]||(o[0]=u=>v(l).key=u),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),e(_,{label:"key"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).name,"onUpdate:modelValue":o[1]||(o[1]=u=>v(l).name=u),placeholder:"英文KEY"},null,8,["modelValue"])]),_:1}),e(_,{label:"CAN-ID"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.portID,"onUpdate:modelValue":o[2]||(o[2]=u=>v(l).config.portID=u),modelModifiers:{number:!0},placeholder:"can口号"},null,8,["modelValue"])]),_:1}),e(_,{label:"CAN单元号"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.unitID,"onUpdate:modelValue":o[3]||(o[3]=u=>v(l).config.unitID=u),modelModifiers:{number:!0},placeholder:"单元号"},null,8,["modelValue"])]),_:1}),e(_,{label:"模块内对应点编号"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.canID,"onUpdate:modelValue":o[4]||(o[4]=u=>v(l).config.canID=u),modelModifiers:{number:!0},placeholder:"模块内对应点编号"},null,8,["modelValue"])]),_:1}),e(_,{label:"轴ID"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.axisID,"onUpdate:modelValue":o[5]||(o[5]=u=>v(l).config.axisID=u),modelModifiers:{number:!0},placeholder:"轴ID"},null,8,["modelValue"])]),_:1}),e(_,{label:"减速比"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.ratio,"onUpdate:modelValue":o[6]||(o[6]=u=>v(l).config.ratio=u),modelModifiers:{number:!0},placeholder:"减速比"},null,8,["modelValue"])]),_:1}),e(_,{label:"编码器绝对值"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.encoder,"onUpdate:modelValue":o[7]||(o[7]=u=>v(l).config.encoder=u),modelModifiers:{number:!0},placeholder:"编码器绝对值"},null,8,["modelValue"])]),_:1}),e(_,{label:"伺服行程转换比"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.unitDist,"onUpdate:modelValue":o[8]||(o[8]=u=>v(l).config.unitDist=u),modelModifiers:{number:!0},placeholder:"伺服行程转换比"},null,8,["modelValue"])]),_:1}),e(_,{label:"最大转速"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.maxRPM,"onUpdate:modelValue":o[9]||(o[9]=u=>v(l).config.maxRPM=u),modelModifiers:{number:!0},placeholder:"最大转速"},null,8,["modelValue"])]),_:1}),e(_,{label:"正常速度"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.normalvel,"onUpdate:modelValue":o[10]||(o[10]=u=>v(l).config.normalvel=u),modelModifiers:{number:!0},placeholder:"正常速度"},null,8,["modelValue"])]),_:1}),e(_,{label:"减速速度"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.slowvel,"onUpdate:modelValue":o[11]||(o[11]=u=>v(l).config.slowvel=u),modelModifiers:{number:!0},placeholder:"减速速度"},null,8,["modelValue"])]),_:1}),e(_,{label:"切换速度的临界距离"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.neartarget,"onUpdate:modelValue":o[12]||(o[12]=u=>v(l).config.neartarget=u),modelModifiers:{number:!0},placeholder:"切换速度的临界距离"},null,8,["modelValue"])]),_:1}),e(_,{label:"允许误差"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.ontarget,"onUpdate:modelValue":o[13]||(o[13]=u=>v(l).config.ontarget=u),modelModifiers:{number:!0},placeholder:"允许误差"},null,8,["modelValue"])]),_:1}),e(_,{label:"电机方向"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.motorDir,"onUpdate:modelValue":o[14]||(o[14]=u=>v(l).config.motorDir=u),modelModifiers:{number:!0},placeholder:"电机方向"},null,8,["modelValue"])]),_:1}),e(_,{label:"码盘方向"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.encoderDir,"onUpdate:modelValue":o[15]||(o[15]=u=>v(l).config.encoderDir=u),modelModifiers:{number:!0},placeholder:"码盘方向"},null,8,["modelValue"])]),_:1}),e(_,{label:"原点模式"},{default:a(()=>[e(f,{style:{width:"80%"},modelValue:v(l).config.originmode,"onUpdate:modelValue":o[16]||(o[16]=u=>v(l).config.originmode=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),e(_,{label:"最大行程"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.maxHeight,"onUpdate:modelValue":o[17]||(o[17]=u=>v(l).config.maxHeight=u),modelModifiers:{number:!0},placeholder:"最大行程"},null,8,["modelValue"])]),_:1}),e(_,{label:"凸轮半径"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.radius,"onUpdate:modelValue":o[18]||(o[18]=u=>v(l).config.radius=u),modelModifiers:{number:!0},placeholder:"凸轮半径"},null,8,["modelValue"])]),_:1}),e(_,{label:"是否是转盘"},{default:a(()=>[e(f,{style:{width:"80%"},modelValue:v(l).config.isturn,"onUpdate:modelValue":o[19]||(o[19]=u=>v(l).config.isturn=u),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),e(_,{label:"转盘速度"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.syncFineVel,"onUpdate:modelValue":o[20]||(o[20]=u=>v(l).config.syncFineVel=u),modelModifiers:{number:!0},placeholder:"转盘速度"},null,8,["modelValue"])]),_:1}),e(_,{label:"转盘方向"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.syncDir,"onUpdate:modelValue":o[21]||(o[21]=u=>v(l).config.syncDir=u),modelModifiers:{number:!0},placeholder:"转盘方向"},null,8,["modelValue"])]),_:1}),e(_,{label:"syncVelRatioUp"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.syncVelRatioUp,"onUpdate:modelValue":o[22]||(o[22]=u=>v(l).config.syncVelRatioUp=u),modelModifiers:{number:!0},placeholder:"syncVelRatioUp"},null,8,["modelValue"])]),_:1}),e(_,{label:"复位初始值"},{default:a(()=>[e(d,{style:{width:"80%"},modelValue:v(l).config.steadyHeight,"onUpdate:modelValue":o[23]||(o[23]=u=>v(l).config.steadyHeight=u),modelModifiers:{number:!0},placeholder:"复位初始值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),b("div",fl,[e(p,{onClick:o[24]||(o[24]=u=>s.value=!1)},{default:a(()=>[r("取 消")]),_:1}),e(p,{type:"primary",onClick:O},{default:a(()=>[r("确定")]),_:1})]),gl]),_:1})]),_:1},8,["modelValue","visible"])],64)}}},pl=le(ml,[["__scopeId","data-v-45560449"]]);const _l={style:{width:"95%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},bl=b("br",null,null,-1),Vl={style:{width:"95%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},yl=b("br",null,null,-1),Il={style:{width:"95%",display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"0.5%"}},kl={__name:"task",setup(A){const s=k([]);k(null),pe(()=>{let d="";s.value=_e.value.split(`
`).reduce((_,f)=>{if(f.trim().startsWith("function")){const D=f.split("(")[0].split(" ")[1];d||(d=D),_.push({name:d,key:D}),d=f}else d=f;return _},[])});const N=k("");function $(){T.value.Task.push({note:"",id:0,taskList:[]})}function O(){T.value.Task.pop()}fe(()=>s.value.map(d=>({value:d.key,label:d.name})));function R(d){d.taskList.push({main:"",exceptions:[""],jump:[{condition:0,index:0}]})}function c(d){d.taskList.pop()}function o(d){d.exceptions.push(N.value),N.value=""}function p(d,_){d.exceptions.splice(_,1)}function y(d){d.jump.push({condition:0,index:0})}function h(d,_){d.jump.splice(_,1)}return(d,_)=>{const f=Y,D=X,I=z,u=se,C=ve,F=Z;return U(),S("div",null,[e(F,{data:v(T).Task,style:{width:"100%"},class:"jsondatatask"},{default:a(()=>[e(D,{label:"⚠️ 任务列表",width:"120"},{default:a(({row:w})=>[e(f,{modelValue:w.note,"onUpdate:modelValue":n=>w.note=n,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"任务 ID",width:"100"},{default:a(({row:w})=>[e(f,{modelValue:w.id,"onUpdate:modelValue":n=>w.id=n,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"任务步骤"},{default:a(({row:w})=>[b("div",null,[e(I,{type:"primary",onClick:n=>R(w)},{default:a(()=>[r("添加函数")]),_:2},1032,["onClick"]),e(I,{type:"danger",onClick:n=>c(w)},{default:a(()=>[r("删除函数")]),_:2},1032,["onClick"])]),e(F,{data:w.taskList,style:{width:"100%"}},{default:a(()=>[e(D,{label:"函数"},{default:a(({row:n})=>[e(C,{modelValue:n.main,"onUpdate:modelValue":E=>n.main=E,placeholder:"选择函数"},{default:a(()=>[(U(!0),S(H,null,L(s.value,E=>(U(),re(u,{key:E,label:E.name,value:E.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(D,{label:"异常"},{default:a(({row:n})=>[b("ul",null,[(U(!0),S(H,null,L(n.exceptions,(E,t)=>(U(),S("li",{key:`exception-${t}`},[b("div",_l,[e(C,{modelValue:n.exceptions[t],"onUpdate:modelValue":x=>n.exceptions[t]=x,placeholder:"选择异常"},{default:a(()=>[(U(!0),S(H,null,L(s.value,x=>(U(),re(u,{key:x,label:x.name,value:x.key},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),r("   "),e(I,{type:"danger",onClick:x=>p(n,t)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])])]))),128)),bl,e(I,{type:"primary",onClick:E=>o(n)},{default:a(()=>[r("添加异常")]),_:2},1032,["onClick"])])]),_:1}),e(D,{label:"返回和跳转"},{default:a(({row:n})=>[(U(!0),S(H,null,L(n.jump,(E,t)=>(U(),S("div",{key:`jump-${t}`},[b("div",Vl,[e(f,{modelValue:E.condition,"onUpdate:modelValue":x=>E.condition=x,modelModifiers:{number:!0},placeholder:"条件"},null,8,["modelValue","onUpdate:modelValue"]),e(f,{modelValue:E.index,"onUpdate:modelValue":x=>E.index=x,modelModifiers:{number:!0},placeholder:"跳转索引"},null,8,["modelValue","onUpdate:modelValue"]),r("   "),e(I,{type:"danger",onClick:x=>h(n,t)},{default:a(()=>[r("删除")]),_:2},1032,["onClick"])])]))),128)),yl,e(I,{type:"primary",onClick:E=>y(n)},{default:a(()=>[r("添加跳转")]),_:2},1032,["onClick"])]),_:1})]),_:2},1032,["data"])]),_:1}),e(D,{width:"180"},{header:a(()=>[b("div",Il,[e(I,{style:{width:"40%"},type:"primary",onClick:$},{default:a(()=>[r("添加任务")]),_:1}),e(I,{style:{width:"40%"},type:"danger",onClick:O},{default:a(()=>[r("删除任务")]),_:1})])]),_:1})]),_:1},8,["data"])])}}};const ee=A=>(ae("data-v-2916a203"),A=A(),oe(),A),hl={class:"page-container main-view"},xl={class:"table-box content-container page-content-box",style:{"background-image":"linear-gradient(to bottom right, #d0dcdc95, #d5eedf17)"}},wl={class:"left"},Cl=ee(()=>b("hr",{class:"hengxian"},null,-1)),Ul=ee(()=>b("hr",{class:"hengxian3"},null,-1)),Sl=ee(()=>b("hr",{class:"hengxian3"},null,-1)),$l=ee(()=>b("hr",{class:"hengxian3"},null,-1)),Dl=ee(()=>b("hr",{class:"hengxian2"},null,-1)),Nl={__name:"index",setup(A){const s=k(!1),N=fe(()=>JSON.stringify(T.value,null,2)),$=()=>{s.value=!0},O=()=>{let h={data:{file:"equipment.json",value:T.value},group:"siasun",account:"test",password:"123456"};console.log(h),ue({method:"post",url:"/api/ctrl/jsoneditor",data:JSON.stringify(h)}).then(d=>{G.success("请求成功");var _={type:"syncParm",data:!0};console.log(JSON.stringify(_)),ue({method:"post",url:"/api/ctrl/manualdata",data:JSON.stringify(_)}).then(f=>{G.success("同步参数")}).catch(f=>{}).finally(()=>{})}).catch(d=>{G.error("请求失败")}).finally(()=>{})},R=k(null),c=()=>{ue({method:"post",url:"/api/data/jsoneditor",data:JSON.stringify({data:"equipment.json",group:"siasun",account:"test",password:"123456"})}).then(d=>{G.success("请求成功"),R.value=d.data,T.value=d.data,y()}).catch(d=>{G.error("请求失败")}).finally(()=>{})},o=()=>{const h=JSON.stringify(T.value),d=new Blob([h],{type:"application/json"}),_=window.URL.createObjectURL(d),f=document.createElement("a");f.href=_,f.download="equipment.json",document.body.appendChild(f),f.click(),window.URL.revokeObjectURL(_),document.body.removeChild(f)},p=h=>{const d=h.target.files[0],_=new FileReader;_.onload=f=>{const D=JSON.parse(f.target.result);T.value=D,y()},_.readAsText(d),G.success("导入成功")},y=()=>{P.value=T.value.IO.input,j.value=T.value.IO.output,V.value=T.value.servo.kinco};return(h,d)=>{const _=z,f=ne,D=X,I=Y,u=Z;return U(),S("div",null,[b("div",hl,[b("div",xl,[e(te,{height:"100%",showUpBt:!0},{default:a(()=>[b("div",wl,[e(_,{type:"info",onClick:$},{default:a(()=>[r(" 查看 ")]),_:1}),e(f,{modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=C=>s.value=C),title:"数据",visible:s.value,onClose:d[1]||(d[1]=C=>s.value=!1),"modal-class":"kk-dialog-class","custom-class":"custom-dialog"},{default:a(()=>[e(te,{height:"100%",showUpBt:!0},{default:a(()=>[b("pre",null,M(N.value),1)]),_:1})]),_:1},8,["modelValue","visible"]),r("   "),e(_,{type:"primary",onClick:c},{default:a(()=>[r(" 从AGV同步参数 ")]),_:1}),e(_,{type:"primary",onClick:O},{default:a(()=>[r("同步到AGV")]),_:1}),r("   "),b("input",{ref:"importInput",type:"file",accept:".json",style:{display:"none"},onChange:p},null,544),e(_,{onClick:d[2]||(d[2]=C=>h.$refs.importInput.click()),type:"success"},{default:a(()=>[r(" 本地导入 ")]),_:1}),e(_,{type:"success",onClick:o},{default:a(()=>[r("导出到本地")]),_:1})]),Cl,e(u,{data:v(be),style:{width:"100%"},class:"EQUversion"},{default:a(()=>[e(D,{prop:"name",label:"⚠️ 版本"}),e(D,{prop:"value"},{default:a(C=>[e(I,{modelValue:v(T).version,"onUpdate:modelValue":d[3]||(d[3]=F=>v(T).version=F),placeholder:"请选择",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["data"]),Ul,e(He),e(rl),Sl,e(pl),$l,e(kl),Dl]),_:1})])])])}}},la=le(Nl,[["__scopeId","data-v-2916a203"]]);export{la as default};
